{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport './ManyPost.css';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\nimport manyComment from '../../../../../assets/manyComment.png';\nimport manyFlame from '../../../../../assets/manyFlame.png';\nimport ViewedPost from '../../../../../components/Scribble/MyBars/ViewedBar/ViewedPost';\nimport scrollToElement from 'scroll-to-element';\n\nclass ManyPost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      photoURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n      score: 0,\n      commentsCount: 0\n    };\n\n    this.scrollToElement = () => {\n      console.log(this.props); // scrollToElement()\n    };\n\n    this.fetchPhotoURL = async photoRef => {\n      var storage = firebase.storage();\n      storage.ref(photoRef).getDownloadURL().then(url => {\n        this.setState(_objectSpread({}, this.state, {\n          photoURL: url\n        }));\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.fetchScore = () => {\n      var db = firebase.firestore();\n      db.collection('postVotes').where('pid', '==', this.props.pid).onSnapshot(snap => {\n        var score = 0;\n        snap.docs.forEach(doc => {\n          score += doc.data().value;\n        });\n        score = Math.max(score, 0);\n        this.setState(_objectSpread({}, this.state, {\n          score: score\n        }));\n      });\n    };\n\n    this.fetchCommentsCount = () => {\n      var db = firebase.firestore();\n      db.collection('postComments').where('pid', '==', this.props.pid).onSnapshot(snap => {\n        const count = snap.size;\n        this.setState(_objectSpread({}, this.state, {\n          commentsCount: count\n        }));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchPhotoURL(this.props.photoRef);\n    this.fetchScore();\n    this.fetchCommentsCount(); // document.addEventListener('click', scrollToElement)\n  }\n\n  render() {\n    // date\n    var verboseDate = this.props.createdOn.toDate().toDateString();\n    const date = verboseDate.slice(4, verboseDate.length); // content\n\n    var content = this.props.content.lineOne + ' / ' + this.props.content.lineTwo + ' / ' + this.props.content.lineThree + ' / ' + this.props.content.lineFour; // votes \n\n    var score = this.state.score; // comments count\n\n    const commentsCount = this.state.commentsCount; // dict {coast: color}\n\n    const colorDict = {\n      'West': 'yellow',\n      'East': 'green',\n      'South': 'blue',\n      'Midwest': 'purple'\n    };\n    const coastColor = colorDict[this.props.address.region];\n    return React.createElement(\"div\", {\n      className: \"many-post\",\n      id: this.props.pid,\n      onClick: () => this.props.selectPost(this.props.pid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"many-post-details\",\n      id: this.props.pid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"many-post-pic\",\n      src: this.state.photoURL,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"many-post-name-date-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, this.props.username), React.createElement(\"p\", {\n      id: this.props.pid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, date))), React.createElement(\"div\", {\n      className: \"many-post-region\",\n      id: coastColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.props.address.region.toLowerCase()), React.createElement(\"div\", {\n      className: \"many-post-misc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"manyComment\",\n      src: manyComment,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), commentsCount, React.createElement(\"img\", {\n      className: \"manyFlame\",\n      src: manyFlame,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), score)), React.createElement(\"div\", {\n      className: \"many-post-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\\"\".concat(content, \"\\\"\"))), React.createElement(\"div\", {\n      className: \"vote-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"vote-button dislike-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"vote-button like-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-fire\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default ManyPost;","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js"],"names":["React","Component","firebase","manyComment","manyFlame","ViewedPost","scrollToElement","ManyPost","state","photoURL","score","commentsCount","console","log","props","fetchPhotoURL","photoRef","storage","ref","getDownloadURL","then","url","setState","catch","err","fetchScore","db","firestore","collection","where","pid","onSnapshot","snap","docs","forEach","doc","data","value","Math","max","fetchCommentsCount","count","size","componentDidMount","render","verboseDate","createdOn","toDate","toDateString","date","slice","length","content","lineOne","lineTwo","lineThree","lineFour","colorDict","coastColor","address","region","selectPost","username","toLowerCase"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,gBAAP;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAO,oBAAP;AACA,OAAOC,WAAP,MAAwB,uCAAxB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,UAAP,MAAuB,gEAAvB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;;AAEA,MAAMC,QAAN,SAAuBN,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC7BO,KAD6B,GACrB;AACJC,MAAAA,QAAQ,EAAE,uJADN;AAEJC,MAAAA,KAAK,EAAE,CAFH;AAGJC,MAAAA,aAAa,EAAE;AAHX,KADqB;;AAAA,SAc7BL,eAd6B,GAcX,MAAM;AACpBM,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EADoB,CAEpB;AACH,KAjB4B;;AAAA,SAmB7BC,aAnB6B,GAmBb,MAAOC,QAAP,IAAoB;AAChC,UAAIC,OAAO,GAAGf,QAAQ,CAACe,OAAT,EAAd;AACAA,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAAsBG,cAAtB,GACKC,IADL,CACUC,GAAG,IAAI;AACT,aAAKC,QAAL,mBACO,KAAKd,KADZ;AAEIC,UAAAA,QAAQ,EAAEY;AAFd;AAIH,OANL,EAOKE,KAPL,CAOWC,GAAG,IAAI;AACVZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,GAAZ;AACH,OATL;AAUH,KA/B4B;;AAAA,SAkC7BC,UAlC6B,GAkChB,MAAM;AACf,UAAIC,EAAE,GAAGxB,QAAQ,CAACyB,SAAT,EAAT;AACAD,MAAAA,EAAE,CAACE,UAAH,CAAc,WAAd,EAA2BC,KAA3B,CAAiC,KAAjC,EAAwC,IAAxC,EAA8C,KAAKf,KAAL,CAAWgB,GAAzD,EAA8DC,UAA9D,CAAyEC,IAAI,IAAI;AAC7E,YAAItB,KAAK,GAAG,CAAZ;AACAsB,QAAAA,IAAI,CAACC,IAAL,CAAUC,OAAV,CAAkBC,GAAG,IAAI;AACrBzB,UAAAA,KAAK,IAAIyB,GAAG,CAACC,IAAJ,GAAWC,KAApB;AACH,SAFD;AAGA3B,QAAAA,KAAK,GAAG4B,IAAI,CAACC,GAAL,CAAS7B,KAAT,EAAgB,CAAhB,CAAR;AACA,aAAKY,QAAL,mBACO,KAAKd,KADZ;AAEIE,UAAAA,KAAK,EAAEA;AAFX;AAIH,OAVD;AAYH,KAhD4B;;AAAA,SAkD7B8B,kBAlD6B,GAkDR,MAAM;AACvB,UAAId,EAAE,GAAGxB,QAAQ,CAACyB,SAAT,EAAT;AACAD,MAAAA,EAAE,CAACE,UAAH,CAAc,cAAd,EAA8BC,KAA9B,CAAoC,KAApC,EAA2C,IAA3C,EAAiD,KAAKf,KAAL,CAAWgB,GAA5D,EAAiEC,UAAjE,CAA4EC,IAAI,IAAI;AAChF,cAAMS,KAAK,GAAGT,IAAI,CAACU,IAAnB;AACA,aAAKpB,QAAL,mBACO,KAAKd,KADZ;AAEIG,UAAAA,aAAa,EAAE8B;AAFnB;AAIH,OAND;AAOH,KA3D4B;AAAA;;AAO7BE,EAAAA,iBAAiB,GAAG;AAChB,SAAK5B,aAAL,CAAmB,KAAKD,KAAL,CAAWE,QAA9B;AACA,SAAKS,UAAL;AACA,SAAKe,kBAAL,GAHgB,CAIhB;AACH;;AAmDDI,EAAAA,MAAM,GAAG;AAEL;AACA,QAAIC,WAAW,GAAG,KAAK/B,KAAL,CAAWgC,SAAX,CAAqBC,MAArB,GAA8BC,YAA9B,EAAlB;AACA,UAAMC,IAAI,GAAGJ,WAAW,CAACK,KAAZ,CAAkB,CAAlB,EAAqBL,WAAW,CAACM,MAAjC,CAAb,CAJK,CAML;;AACA,QAAIC,OAAO,GAAG,KAAKtC,KAAL,CAAWsC,OAAX,CAAmBC,OAAnB,GAA6B,KAA7B,GAAqC,KAAKvC,KAAL,CAAWsC,OAAX,CAAmBE,OAAxD,GAAkE,KAAlE,GAA0E,KAAKxC,KAAL,CAAWsC,OAAX,CAAmBG,SAA7F,GAAyG,KAAzG,GAAiH,KAAKzC,KAAL,CAAWsC,OAAX,CAAmBI,QAAlJ,CAPK,CASL;;AACA,QAAI9C,KAAK,GAAG,KAAKF,KAAL,CAAWE,KAAvB,CAVK,CAYL;;AACA,UAAMC,aAAa,GAAG,KAAKH,KAAL,CAAWG,aAAjC,CAbK,CAeL;;AACA,UAAM8C,SAAS,GAAG;AACd,cAAQ,QADM;AAEd,cAAQ,OAFM;AAGd,eAAS,MAHK;AAId,iBAAW;AAJG,KAAlB;AAOA,UAAMC,UAAU,GAAGD,SAAS,CAAC,KAAK3C,KAAL,CAAW6C,OAAX,CAAmBC,MAApB,CAA5B;AAGA,WACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,EAAE,EAAE,KAAK9C,KAAL,CAAWgB,GAA1C;AAA+C,MAAA,OAAO,EAAE,MAAM,KAAKhB,KAAL,CAAW+C,UAAX,CAAsB,KAAK/C,KAAL,CAAWgB,GAAjC,CAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAmC,MAAA,EAAE,EAAE,KAAKhB,KAAL,CAAWgB,GAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,GAAG,EAAE,KAAKtB,KAAL,CAAWC,QAA/C;AAAyD,MAAA,GAAG,EAAC,KAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKK,KAAL,CAAWgD,QAAhB,CADJ,EAEI;AAAG,MAAA,EAAE,EAAE,KAAKhD,KAAL,CAAWgB,GAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwBmB,IAAxB,CAFJ,CAFJ,CADJ,EAQI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAkC,MAAA,EAAE,EAAES,UAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAK5C,KAAL,CAAW6C,OAAX,CAAmBC,MAAnB,CAA0BG,WAA1B,EADL,CARJ,EAWI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAA6B,MAAA,GAAG,EAAE5D,WAAlC;AAA+C,MAAA,GAAG,EAAC,KAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEKQ,aAFL,EAGI;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,GAAG,EAAEP,SAAhC;AAA2C,MAAA,GAAG,EAAC,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,EAIKM,KAJL,CAXJ,CADJ,EAmBI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAQ0C,OAAR,QADJ,CAnBJ,EAsBI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,4BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,aAAb;AAA2B,qBAAY,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EAII;AAAQ,MAAA,SAAS,EAAC,yBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,CAtBJ,CADJ;AAkCH;;AA3H4B;;AA8HjC,eAAe7C,QAAf","sourcesContent":["import React, { Component } from 'react'\nimport './ManyPost.css'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\nimport manyComment from '../../../../../assets/manyComment.png'\nimport manyFlame from '../../../../../assets/manyFlame.png'\nimport ViewedPost from '../../../../../components/Scribble/MyBars/ViewedBar/ViewedPost'\nimport scrollToElement from 'scroll-to-element'\n\nclass ManyPost extends Component {\n    state = {\n        photoURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n        score: 0,\n        commentsCount: 0,\n\n    }\n    componentDidMount() {\n        this.fetchPhotoURL(this.props.photoRef)\n        this.fetchScore()\n        this.fetchCommentsCount()\n        // document.addEventListener('click', scrollToElement)\n    }\n\n    scrollToElement = () => {\n        console.log(this.props)\n        // scrollToElement()\n    }\n\n    fetchPhotoURL = async (photoRef) => {\n        var storage = firebase.storage()\n        storage.ref(photoRef).getDownloadURL()\n            .then(url => {\n                this.setState({\n                    ...this.state,\n                    photoURL: url\n                })\n            })\n            .catch(err => {\n                console.log(err)\n            });\n    }\n\n\n    fetchScore = () => {\n        var db = firebase.firestore()\n        db.collection('postVotes').where('pid', '==', this.props.pid).onSnapshot(snap => {\n            var score = 0\n            snap.docs.forEach(doc => {\n                score += doc.data().value\n            })\n            score = Math.max(score, 0)\n            this.setState({\n                ...this.state,\n                score: score\n            })\n        })\n\n    }\n\n    fetchCommentsCount = () => {\n        var db = firebase.firestore()\n        db.collection('postComments').where('pid', '==', this.props.pid).onSnapshot(snap => {\n            const count = snap.size\n            this.setState({\n                ...this.state,\n                commentsCount: count\n            })\n        })\n    }\n\n\n\n    render() {\n\n        // date\n        var verboseDate = this.props.createdOn.toDate().toDateString()\n        const date = verboseDate.slice(4, verboseDate.length)\n\n        // content\n        var content = this.props.content.lineOne + ' / ' + this.props.content.lineTwo + ' / ' + this.props.content.lineThree + ' / ' + this.props.content.lineFour\n\n        // votes \n        var score = this.state.score\n\n        // comments count\n        const commentsCount = this.state.commentsCount\n\n        // dict {coast: color}\n        const colorDict = {\n            'West': 'yellow',\n            'East': 'green',\n            'South': 'blue',\n            'Midwest': 'purple',\n        }\n\n        const coastColor = colorDict[this.props.address.region]\n\n\n        return (\n            <div className='many-post' id={this.props.pid} onClick={() => this.props.selectPost(this.props.pid)}>\n                <header>\n                    <div className='many-post-details' id={this.props.pid}>\n                        <img className='many-post-pic' src={this.state.photoURL} alt='pic'></img>\n                        <div className='many-post-name-date-container'>\n                            <h6>{this.props.username}</h6>\n                            <p id={this.props.pid}>{date}</p>\n                        </div>\n                    </div>\n                    <div className='many-post-region' id={coastColor}>\n                        {this.props.address.region.toLowerCase()}\n                    </div>\n                    <div className='many-post-misc'>\n                        <img className='manyComment' src={manyComment} alt='pic' />\n                        {commentsCount}\n                        <img className='manyFlame' src={manyFlame} alt='pic' />\n                        {score}\n                    </div>\n                </header>\n                <div className='many-post-body'>\n                    <p>{`\"${content}\"`}</p>\n                </div>\n                <div className='vote-box'>\n                    <button className='vote-button dislike-button'>\n                        <i className=\"fa fa-trash\" aria-hidden=\"true\"></i>\n                    </button>\n                    <button className='vote-button like-button'>\n                        <i className=\"fas fa-fire\"></i>\n                    </button>\n\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default ManyPost\n"]},"metadata":{},"sourceType":"module"}