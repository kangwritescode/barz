{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport './ManyPost.css';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\nimport manyComment from '../../../../../assets/manyComment.png';\nimport manyFlame from '../../../../../assets/manyFlame.png';\nimport ViewedPost from '../../../../../components/Scribble/MyBars/ViewedBar/ViewedPost';\n\nclass ManyPost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      photoURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n      score: 0,\n      commentsCount: 0\n    };\n\n    this.fetchPhotoURL = async photoRef => {\n      var storage = firebase.storage();\n      storage.ref(photoRef).getDownloadURL().then(url => {\n        this.setState(_objectSpread({}, this.state, {\n          photoURL: url\n        }));\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.fetchScore = () => {\n      var db = firebase.firestore();\n      db.collection('postVotes').where('pid', '==', this.props.pid).onSnapshot(snap => {\n        var score = 0;\n        snap.docs.forEach(doc => {\n          score += doc.data().value;\n        });\n        score = Math.max(score, 0);\n        this.setState(_objectSpread({}, this.state, {\n          score: score\n        }));\n      });\n    };\n\n    this.fetchCommentsCount = () => {\n      var db = firebase.firestore();\n      db.collection('postComments').where('pid', '==', this.props.pid).onSnapshot(snap => {\n        const count = snap.size;\n        console.log(count);\n        this.setState(_objectSpread({}, this.state, {\n          commentsCount: count\n        }));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchPhotoURL(this.props.photoRef);\n    this.fetchScore();\n    this.fetchCommentsCount();\n  }\n\n  render() {\n    // date\n    var verboseDate = this.props.createdOn.toDate().toDateString();\n    const date = verboseDate.slice(4, verboseDate.length); // content\n\n    var content = this.props.content.lineOne + ' / ' + this.props.content.lineTwo; // votes \n\n    var score = this.state.score; // comments count\n\n    const commentsCount = this.state.commentsCount;\n    return React.createElement(\"div\", {\n      className: \"many-post\",\n      onClick: () => this.props.toggleModal('showPost', true, this.props.pid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"many-post-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"many-post-pic\",\n      src: this.state.photoURL,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"many-post-name-date-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, this.props.username), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, date))), React.createElement(\"div\", {\n      className: \"many-post-misc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"manyComment\",\n      src: manyComment,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), commentsCount, React.createElement(\"img\", {\n      className: \"manyFlame\",\n      src: manyFlame,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), score)), React.createElement(\"div\", {\n      className: \"many-post-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, content + '...')), React.createElement(\"div\", {\n      className: \"vote-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"vote-button dislike-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"vote-button like-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-fire\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default ManyPost;","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js"],"names":["React","Component","firebase","manyComment","manyFlame","ViewedPost","ManyPost","state","photoURL","score","commentsCount","fetchPhotoURL","photoRef","storage","ref","getDownloadURL","then","url","setState","catch","err","console","log","fetchScore","db","firestore","collection","where","props","pid","onSnapshot","snap","docs","forEach","doc","data","value","Math","max","fetchCommentsCount","count","size","componentDidMount","render","verboseDate","createdOn","toDate","toDateString","date","slice","length","content","lineOne","lineTwo","toggleModal","username"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './ManyPost.css'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\nimport manyComment from '../../../../../assets/manyComment.png'\nimport manyFlame from '../../../../../assets/manyFlame.png'\nimport ViewedPost from '../../../../../components/Scribble/MyBars/ViewedBar/ViewedPost'\n\nclass ManyPost extends Component {\n    state = {\n        photoURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n        score: 0,\n        commentsCount: 0,\n\n    }\n    componentDidMount() {\n        this.fetchPhotoURL(this.props.photoRef)\n        this.fetchScore()\n        this.fetchCommentsCount()\n    }\n\n    fetchPhotoURL = async (photoRef) => {\n        var storage = firebase.storage()\n        storage.ref(photoRef).getDownloadURL()\n            .then(url => {\n                this.setState({\n                    ...this.state,\n                    photoURL: url\n                })\n            })\n            .catch(err => {\n                console.log(err)\n            });\n    }\n\n\n    fetchScore = () => {\n        var db = firebase.firestore()\n        db.collection('postVotes').where('pid', '==', this.props.pid).onSnapshot(snap => {\n            var score = 0\n            snap.docs.forEach(doc => {\n                score += doc.data().value\n            })\n            score = Math.max(score, 0)\n            this.setState({\n                ...this.state,\n                score: score\n            })\n        })\n\n    }\n\n    fetchCommentsCount = () => {\n        var db = firebase.firestore()\n        db.collection('postComments').where('pid', '==', this.props.pid).onSnapshot(snap => {\n            const count = snap.size\n            console.log(count)\n            this.setState({\n                ...this.state,\n                commentsCount: count\n            })\n        })\n    }\n\n\n\n    render() {\n\n        // date\n        var verboseDate = this.props.createdOn.toDate().toDateString()\n        const date = verboseDate.slice(4, verboseDate.length)\n\n        // content\n        var content = this.props.content.lineOne + ' / ' + this.props.content.lineTwo\n\n        // votes \n        var score = this.state.score\n\n        // comments count\n        const commentsCount = this.state.commentsCount\n\n\n\n        return (\n            <div className='many-post' onClick={() => this.props.toggleModal('showPost', true, this.props.pid)}>\n                <header>\n                    <div className='many-post-details'>\n                        <img className='many-post-pic' src={this.state.photoURL} alt='pic'></img>\n                        <div className='many-post-name-date-container'>\n                            <h6>{this.props.username}</h6>\n                            <p>{date}</p>\n                        </div>\n                    </div>\n                    <div className='many-post-misc'>\n                        <img className='manyComment' src={manyComment} alt='pic' />\n                        {commentsCount}\n                        <img className='manyFlame' src={manyFlame} alt='pic' />\n                        {score}\n                    </div>\n                </header>\n                <div className='many-post-body'>\n                    <p>{content + '...'}</p>\n                </div>\n                <div className='vote-box'>\n                    <button className='vote-button dislike-button'></button>\n                    <button className='vote-button like-button'>\n                        <i className=\"fas fa-fire\"></i>\n                    </button>\n\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default ManyPost\n"]},"metadata":{},"sourceType":"module"}