{"ast":null,"code":"import _slicedToArray from \"/Users/davidkang/Documents/GitHub/barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Documents/GitHub/barz/src/containers/Hub/ProfileBox/ProfileBox.js\";\nimport React, { useEffect, useState } from 'react';\nimport './ProfileBox.css';\nimport PhotoContainer from './PhotoContainer/PhotoContainer';\nimport firebase from 'firebase';\nimport { getOrdinal } from '../../../shared/utility';\nimport { connect } from 'react-redux';\nimport { postUserData } from '../../../store/actions/auth';\nimport * as actions from '../../../store/actions/index';\nimport FireApi from '../../../Api/FireApi/FireApi';\n\nfunction ProfileBox(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showDropOptions = _useState2[0],\n        toggleDropOptions = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        follows = _useState4[0],\n        setFollows = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        blurbText = _useState6[0],\n        setBlurbText = _useState6[1]; // componentDidMount\n\n\n  useEffect(() => {\n    document.addEventListener('click', closeDropOptions);\n    var followsListener = FireApi.allFollowsListener(setFollows);\n    return () => {\n      document.removeEventListener('click', closeDropOptions);\n      followsListener();\n    };\n  }, []); // componentDidUpdate\n\n  useEffect(() => {\n    if (props.blurb) {\n      setBlurbText(props.blurb);\n    }\n  }, [props.photoRef, props.rapper, follows, props.uid, props.blurb]);\n\n  const closeDropOptions = event => {\n    if (!event.target.classList.contains('hub-profile-box__three-dots') && !event.target.classList.contains('dot')) {\n      toggleDropOptions(false);\n    }\n  };\n\n  const textAreaKeyDown = event => {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      event.target.blur();\n    }\n  };\n\n  const addhttp = url => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n      url = \"http://\" + url;\n    }\n\n    return url;\n  };\n\n  const follow = () => {\n    let db = firebase.firestore();\n    db.collection('follows').add({\n      from: props.uid,\n      to: props.paramsUser.uid\n    }).then(() => console.log('follow set successfully')).catch(err => console.log(err.message));\n  };\n\n  const unfollow = () => {\n    let db = firebase.firestore();\n    console.log(props.uid, props.user);\n    db.collection('follows').where('from', '==', props.uid).where('to', '==', props.paramsUser.uid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete();\n      });\n    }).catch(err => console.log(err));\n  }; // RENDER ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`\n\n\n  var user = props.paramsUser ? props.paramsUser : props;\n  let blockOneContent = null;\n  let handles = React.createElement(\"div\", {\n    className: \"contents-wrapper__handles-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fab fa-facebook-f icon\",\n    onClick: () => props.toggleUploadHandles(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"i\", {\n    className: \"fab fa-instagram icon\",\n    onClick: () => props.toggleUploadHandles(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"i\", {\n    className: \"fab fa-soundcloud icon\",\n    onClick: () => props.toggleUploadHandles(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"i\", {\n    className: \"fab fa-youtube icon\",\n    onClick: () => props.toggleUploadHandles(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }));\n\n  if (props.paramsUser) {\n    handles = Object.entries(user.handles).map(entry => {\n      if (entry[1] !== \"\") {\n        return React.createElement(\"i\", {\n          className: \"fab fa-\".concat(entry[0] + (entry[0] === 'facebook' ? '-f' : ''), \" icon\"),\n          onClick: () => window.open(addhttp(entry[1])),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        });\n      }\n\n      return null;\n    });\n    handles = React.createElement(\"div\", {\n      className: \"contents-wrapper__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, handles);\n  }\n\n  if (!user.needsInfo && !props.isLoading) {\n    blockOneContent = React.createElement(\"div\", {\n      className: \"block-one__contents-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, props.paramsUser ? React.createElement(\"img\", {\n      className: \"contents-wrapper__params-photo\",\n      src: props.paramsUser.photoURL,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }) : React.createElement(PhotoContainer, {\n      imgURL: user.photoURL,\n      setShowPhotoModal: props.setShowPhotoModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"contents-wrapper__username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, user.username), React.createElement(\"div\", {\n      className: \"contents-wrapper__address-gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, user.address.city, \", \", user.address.state, \" | \", user.sex ? user.sex : user.gender), handles, !props.paramsUser ? React.createElement(\"textarea\", {\n      className: \"contents-wrapper__blurb\",\n      placeholder: props.paramsUser ? null : '-Write a blurb-',\n      spellCheck: false,\n      maxLength: 55,\n      style: props.paramsUser ? {\n        cursor: 'default'\n      } : null,\n      onKeyDown: event => textAreaKeyDown(event),\n      onChange: event => setBlurbText(event.target.value),\n      onBlur: event => props.postUserData(props.uid, {\n        blurb: event.target.value\n      }),\n      disabled: !!props.paramsUser,\n      value: props.paramsUser ? user.blurb : blurbText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      className: \"contents-wrapper__blurb\",\n      style: {\n        cursor: 'default'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, props.paramsUser.blurb));\n  }\n\n  if (props.needsInfo && !props.isLoading) {\n    blockOneContent = React.createElement(\"div\", {\n      className: \"block-one__contents-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"contents-wrapper__dummy-img\",\n      alt: \"\",\n      src: props.photoURL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"contents-wrapper__username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Anonymous\"));\n  }\n\n  let detailsContainer = null;\n\n  if (!props.isLoading) {\n    detailsContainer = React.createElement(\"div\", {\n      className: 'block-two__place-point-container',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, props.myPlace + getOrdinal(props.myPlace) + \" place\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')));\n  }\n\n  let editOptions;\n\n  if (props.paramsUser || props.isLoading) {\n    editOptions = null;\n  } else {\n    editOptions = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"hub-profile-box__three-dots\",\n      onClick: () => toggleDropOptions(!showDropOptions),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    })), showDropOptions ? React.createElement(\"div\", {\n      className: \"hub-profile-box__drop-options\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"drop-options__log-out\",\n      onClick: props.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Log Out\")) : null, React.createElement(\"i\", {\n      className: \"fas fa-cog hub-profile-box__settings\",\n      onClick: () => props.toggleDeleteAcc(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }));\n  }\n\n  var myFollow = null;\n\n  if (props.paramsUser) {\n    myFollow = follows.filter(follow => follow.from === props.uid && follow.to === props.paramsUser.uid);\n  }\n\n  console.log(myFollow);\n  return React.createElement(\"div\", {\n    className: \"hub-profile-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, editOptions, React.createElement(\"div\", {\n    className: \"hub-profile-box__block-one\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, blockOneContent), React.createElement(\"div\", {\n    className: \"hub-profile-box__block-two\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, props.paramsUser ? React.createElement(\"div\", {\n    className: \"block-two__follow-button\",\n    onClick: myFollow.length === 0 ? () => follow() : () => unfollow(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, myFollow.length === 0 ? 'follow' : 'following') : null, detailsContainer));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.user.uid,\n    email: state.user.email,\n    username: state.user.username,\n    sex: state.user.gender,\n    address: state.user.address,\n    zipcode: state.user.address.zip_code,\n    city: state.user.address.city,\n    state: state.user.address.state,\n    needsInfo: state.user.needsInfo,\n    photoURL: state.user.photoURL,\n    blurb: state.user.blurb\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n    logout: () => dispatch(actions.logOut())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox);","map":{"version":3,"sources":["/Users/davidkang/Documents/GitHub/barz/src/containers/Hub/ProfileBox/ProfileBox.js"],"names":["React","useEffect","useState","PhotoContainer","firebase","getOrdinal","connect","postUserData","actions","FireApi","ProfileBox","props","showDropOptions","toggleDropOptions","follows","setFollows","blurbText","setBlurbText","document","addEventListener","closeDropOptions","followsListener","allFollowsListener","removeEventListener","blurb","photoRef","rapper","uid","event","target","classList","contains","textAreaKeyDown","keyCode","preventDefault","blur","addhttp","url","test","follow","db","firestore","collection","add","from","to","paramsUser","then","console","log","catch","err","message","unfollow","user","where","get","snap","forEach","doc","ref","delete","blockOneContent","handles","toggleUploadHandles","Object","entries","map","entry","window","open","needsInfo","isLoading","photoURL","setShowPhotoModal","username","address","city","state","sex","gender","cursor","value","detailsContainer","myPlace","myPoints","editOptions","logout","toggleDeleteAcc","myFollow","filter","length","mapStateToProps","email","zipcode","zip_code","mapDispatchToProps","dispatch","data","logOut"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './ProfileBox.css'\nimport PhotoContainer from './PhotoContainer/PhotoContainer'\nimport firebase from 'firebase'\nimport { getOrdinal } from '../../../shared/utility'\nimport { connect } from 'react-redux'\nimport { postUserData } from '../../../store/actions/auth'\nimport * as actions from '../../../store/actions/index'\nimport FireApi from '../../../Api/FireApi/FireApi'\n\n\n\nfunction ProfileBox(props) {\n\n    const [showDropOptions, toggleDropOptions] = useState(false)\n    const [follows, setFollows] = useState([])\n    const [blurbText, setBlurbText] = useState('')\n\n    // componentDidMount\n    useEffect(() => {\n        document.addEventListener('click', closeDropOptions)\n        var followsListener = FireApi.allFollowsListener(setFollows)\n        return () => {\n            document.removeEventListener('click', closeDropOptions)\n            followsListener()\n        };\n    }, [])\n\n    // componentDidUpdate\n    useEffect(() => {\n\n        if (props.blurb) {\n            setBlurbText(props.blurb)\n        }\n    }, [props.photoRef, props.rapper, follows, props.uid, props.blurb])\n\n\n    const closeDropOptions = (event) => {\n        if (!event.target.classList.contains('hub-profile-box__three-dots') && !event.target.classList.contains('dot')) {\n            toggleDropOptions(false)\n        }\n    }\n\n    const textAreaKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault()\n            event.target.blur()\n        }\n    }\n    const addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n    const follow = () => {\n        let db = firebase.firestore()\n        db.collection('follows').add({\n            from: props.uid,\n            to: props.paramsUser.uid\n        })\n            .then(() => console.log('follow set successfully'))\n            .catch(err => console.log(err.message))\n    }\n\n    const unfollow = () => {\n        let db = firebase.firestore()\n        console.log(props.uid, props.user)\n        db.collection('follows')\n            .where('from', '==', props.uid)\n            .where('to', '==', props.paramsUser.uid)\n            .get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete()\n                })\n            })\n            .catch(err => console.log(err))\n    }\n    // RENDER ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`\n\n\n    var user = props.paramsUser ? props.paramsUser : props\n\n    let blockOneContent = null;\n\n    let handles = (\n        <div className='contents-wrapper__handles-container'>\n            <i className=\"fab fa-facebook-f icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n            <i className=\"fab fa-instagram icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n            <i className=\"fab fa-soundcloud icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n            <i className=\"fab fa-youtube icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n        </div>\n    )\n\n    if (props.paramsUser) {\n        handles = Object.entries(user.handles).map(entry => {\n            if (entry[1] !== \"\") {\n                return <i className={`fab fa-${entry[0] + (entry[0] === 'facebook' ? '-f' : '')} icon`} onClick={() => window.open(addhttp(entry[1]))}></i>\n            }\n            return null\n        })\n        handles = (\n            <div className='contents-wrapper__handles-container'>\n                {handles}\n            </div>\n        )\n    }\n\n    if (!user.needsInfo && !props.isLoading) {\n        blockOneContent = (\n            <div className={`block-one__contents-wrapper`}>\n                {props.paramsUser ? <img className='contents-wrapper__params-photo' src={props.paramsUser.photoURL} alt=''></img> : (\n                    <PhotoContainer imgURL={user.photoURL} setShowPhotoModal={props.setShowPhotoModal} />\n                )}\n\n                <div className='contents-wrapper__username'>{user.username}</div>\n                <div className='contents-wrapper__address-gender'>{user.address.city}, {user.address.state} | {user.sex ? user.sex : user.gender}</div>\n                {handles}\n                {!props.paramsUser ?\n                    (<textarea\n                        className='contents-wrapper__blurb'\n                        placeholder={props.paramsUser ? null : '-Write a blurb-'}\n                        spellCheck={false}\n                        maxLength={55}\n                        style={props.paramsUser ? { cursor: 'default' } : null}\n                        onKeyDown={event => textAreaKeyDown(event)}\n                        onChange={event => setBlurbText(event.target.value)}\n                        onBlur={event => props.postUserData(props.uid, { blurb: event.target.value })}\n                        disabled={!!props.paramsUser}\n                        value={props.paramsUser ? user.blurb : blurbText} />)\n                    : <div className='contents-wrapper__blurb' style={{ cursor: 'default' }}>{props.paramsUser.blurb}</div>}\n\n            </div>\n        )\n    }\n    if (props.needsInfo && !props.isLoading) {\n        blockOneContent = (\n            <div className={`block-one__contents-wrapper`}>\n                <img\n                    className='contents-wrapper__dummy-img'\n                    alt=''\n                    src={props.photoURL}></img>\n                <div className='contents-wrapper__username'>Anonymous</div>\n            </div>\n        )\n    }\n\n    let detailsContainer = null;\n\n    if (!props.isLoading) {\n        detailsContainer = (\n            <div className={'block-two__place-point-container'}>\n                <div>\n                    {props.myPlace + getOrdinal(props.myPlace) + \" place\"}\n                </div>\n                <div>\n                    {props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')}\n                </div>\n            </div>\n        )\n    }\n\n    let editOptions;\n    if (props.paramsUser || props.isLoading) {\n        editOptions = null;\n    } else {\n        editOptions = (\n            <div>\n                <div className='hub-profile-box__three-dots' onClick={() => toggleDropOptions(!showDropOptions)}>\n                    <div className='dot' />\n                    <div className='dot' />\n                    <div className='dot' />\n                </div>\n                {showDropOptions ?\n                    <div className='hub-profile-box__drop-options'>\n                        <div className='drop-options__log-out' onClick={props.logout}>Log Out</div>\n                    </div> : null}\n\n                <i className=\"fas fa-cog hub-profile-box__settings\" onClick={() => props.toggleDeleteAcc(true)}></i>\n            </div>\n        )\n    }\n    var myFollow = null;\n    if (props.paramsUser) {\n        myFollow = follows.filter(follow => (follow.from === props.uid && follow.to === props.paramsUser.uid))\n\n    }\n    console.log(myFollow);\n\n\n    return (\n        <div className='hub-profile-box' >\n            {editOptions}\n            <div className='hub-profile-box__block-one'>\n                {blockOneContent}\n            </div>\n            <div className='hub-profile-box__block-two'>\n                {props.paramsUser ?\n                    <div\n                        className='block-two__follow-button'\n                        onClick={myFollow.length === 0 ? () => follow() : () => unfollow()}>\n                        {myFollow.length === 0 ? 'follow' : 'following'}\n                    </div>\n                    : null}\n                {detailsContainer}\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.user.uid,\n        email: state.user.email,\n        username: state.user.username,\n        sex: state.user.gender,\n        address: state.user.address,\n        zipcode: state.user.address.zip_code,\n        city: state.user.address.city,\n        state: state.user.address.state,\n        needsInfo: state.user.needsInfo,\n        photoURL: state.user.photoURL,\n        blurb: state.user.blurb\n    }\n}\n\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n        logout: () => dispatch(actions.logOut())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox)\n"]},"metadata":{},"sourceType":"module"}