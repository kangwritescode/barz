{"ast":null,"code":"import _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowItem/FollowItem.js\";\nimport React, { useEffect, useState } from 'react';\nimport firebase from 'firebase';\nimport './FollowItem.css';\nimport 'firebase/firestore';\nimport { connect } from 'react-redux';\n\nconst FollowItem = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        amFollowing = _useState2[0],\n        setAmFollowing = _useState2[1]; // componentDidMount\n\n\n  useEffect(() => {\n    return () => {};\n  }, []);\n  useEffect(() => {\n    // return true if user is following this user, otherwise false\n    const iAmFollowing = () => {\n      return props.follows.filter(follow => follow.to === props.user.uid && follow.from === props.myUID).length !== 0;\n    };\n\n    setAmFollowing(iAmFollowing);\n    return () => {};\n  }, [props.follows, props.myUID, props.user.uid]);\n\n  const follow = () => {\n    let db = firebase.firestore();\n    db.collection('follows').add({\n      from: props.myUID,\n      to: props.user.uid\n    }).then(() => console.log('follow set successfully')).catch(err => console.log(err.message));\n  };\n\n  const unfollow = () => {\n    let db = firebase.firestore();\n    console.log(props.uid, props.user);\n    db.collection('follows').where('from', '==', props.myUID).where('to', '==', props.user.uid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete();\n      });\n    }).catch(err => console.log(err));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"follow-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"follow-item__profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"profile__photo\",\n    alt: \"\",\n    src: props.user.photoURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"profile__details-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"details-container__name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, props.user.username), React.createElement(\"div\", {\n    className: \"details-container__details\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, props.user.address.city, \", \", props.user.address.state, \" | \", props.user.gender === 'Male' ? 'M' : 'F'))), React.createElement(\"button\", {\n    className: \"follow-item__follow-button\",\n    onClick: amFollowing ? unfollow : follow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, amFollowing ? 'following' : 'follow'));\n};\n\nconst mapStateToProps = state => {\n  return {\n    myUID: state.uid\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowItem);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowItem/FollowItem.js"],"names":["React","useEffect","useState","firebase","connect","FollowItem","props","amFollowing","setAmFollowing","iAmFollowing","follows","filter","follow","to","user","uid","from","myUID","length","db","firestore","collection","add","then","console","log","catch","err","message","unfollow","where","get","snap","forEach","doc","ref","delete","photoURL","username","address","city","state","gender","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport firebase from 'firebase'\nimport './FollowItem.css'\nimport 'firebase/firestore'\nimport { connect } from 'react-redux'\n\nconst FollowItem = (props) => {\n\n    const [amFollowing, setAmFollowing] = useState(false);\n\n    // componentDidMount\n    useEffect(() => {\n        return () => {\n        };\n    }, [])\n\n    useEffect(() => {\n        // return true if user is following this user, otherwise false\n        const iAmFollowing = () => {\n            return props.follows.filter(follow => follow.to === props.user.uid && follow.from === props.myUID).length !== 0\n        }\n        setAmFollowing(iAmFollowing)\n        return () => {\n\n        };\n    }, [props.follows, props.myUID, props.user.uid])\n\n\n    const follow = () => {\n        let db = firebase.firestore()\n        db.collection('follows').add({\n            from: props.myUID,\n            to: props.user.uid\n        })\n            .then(() => console.log('follow set successfully'))\n            .catch(err => console.log(err.message))\n    }\n\n    const unfollow = () => {\n        let db = firebase.firestore()\n        console.log(props.uid, props.user)\n        db.collection('follows')\n            .where('from', '==', props.myUID)\n            .where('to', '==', props.user.uid)\n            .get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete()\n                })\n            })\n            .catch(err => console.log(err))\n    }\n\n\n    return (\n        <div className='follow-item'>\n            <div className={`follow-item__profile`}>\n                <img className={`profile__photo`} alt='' src={props.user.photoURL}></img>\n                <div className={`profile__details-container`}>\n                    <div className={`details-container__name`}>\n                        {props.user.username}\n                    </div>\n                    <div className={`details-container__details`}>\n                        {props.user.address.city}, {props.user.address.state} | {props.user.gender === 'Male' ? 'M' : 'F'}\n                    </div>\n                </div>\n            </div>\n            <button\n                className={`follow-item__follow-button`}\n                onClick={amFollowing ? unfollow : follow}>\n                {amFollowing ? 'following' : 'follow'}\n            </button>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        myUID: state.uid\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowItem)\n"]},"metadata":{},"sourceType":"module"}