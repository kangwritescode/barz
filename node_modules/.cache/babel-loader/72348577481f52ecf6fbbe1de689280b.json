{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/ProfileBox.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport './ProfileBox.css';\nimport PhotoContainer from './PhotoContainer/PhotoContainer';\nimport * as actionTypes from '../../../store/actions/actionsTypes';\nimport firebase from 'firebase';\nimport { getOrdinal } from '../../../shared/utility';\nimport { connect } from 'react-redux';\nimport { postUserData } from '../../../store/actions/auth';\nimport * as actions from '../../../store/actions/index';\n\nfunction ProfileBox(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showDropOptions = _useState2[0],\n        toggleDropOptions = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        follows = _useState4[0],\n        setFollows = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        blurbText = _useState6[0],\n        setBlurbText = _useState6[1]; // componentDidMount\n\n\n  useEffect(() => {\n    document.addEventListener('click', closeDropOptions);\n    fetchFollows();\n    return () => {\n      document.removeEventListener('click', closeDropOptions);\n    };\n  }, []); // componentDidUpdate\n\n  useEffect(() => {\n    if (props.blurb) {\n      setBlurbText(props.blurb);\n    }\n  }, [props.photoRef, props.rapper, follows, props.uid, props.blurb]);\n\n  const fetchFollows = async () => {\n    let db = firebase.firestore();\n    let follows = await db.collection(\"follows\").get().then(querySnapshot => {\n      let fetchedFollows = [];\n      querySnapshot.forEach(doc => {\n        fetchedFollows.push(_objectSpread({}, doc.data(), {\n          fid: doc.id\n        }));\n      });\n      return fetchedFollows;\n    });\n    setFollows(follows);\n  };\n\n  const closeDropOptions = event => {\n    if (!event.target.classList.contains('hub-profile-box__three-dots') && !event.target.classList.contains('dot')) {\n      toggleDropOptions(false);\n    }\n  };\n\n  const textAreaKeyDown = event => {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      event.target.blur();\n    }\n  };\n\n  let blockOneContent = null; // <DotSpinner customStyle={{position: 'absolute', top: '-1em'}}/>\n\n  if (!props.needsInfo) {\n    blockOneContent = React.createElement(\"div\", {\n      className: \"block-one__contents-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(PhotoContainer, {\n      imgURL: props.photoURL,\n      setShowPhotoModal: props.setShowPhotoModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"contents-wrapper__username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, props.username), React.createElement(\"div\", {\n      className: \"contents-wrapper__address-gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, props.city, \", \", props.state, \" | \", props.sex), React.createElement(\"div\", {\n      className: \"contents-wrapper__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    })), React.createElement(\"textarea\", {\n      className: \"contents-wrapper__blurb\",\n      placeholder: \"-Write a blurb-\",\n      spellCheck: false,\n      maxLength: 55,\n      onKeyDown: event => textAreaKeyDown(event),\n      onChange: event => setBlurbText(event.target.value),\n      onBlur: event => props.postUserData(props.uid, {\n        blurb: event.target.value\n      }),\n      value: blurbText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }));\n  }\n\n  if (props.needsInfo) {\n    blockOneContent = React.createElement(\"div\", {\n      className: \"block-one__contents-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"contents-wrapper__dummy-img\",\n      alt: \"\",\n      style: {\n        height: '50px',\n        borderRadius: '50%',\n        background: 'white'\n      },\n      src: props.photoURL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"contents-wrapper__username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Anonymous\"));\n  }\n\n  let blockTwoContent = null;\n\n  if (!props.isLoading) {\n    blockTwoContent = React.createElement(\"div\", {\n      className: 'block-two__place-point-container',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, props.myPlace + getOrdinal(props.myPlace) + \" place\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"hub-profile-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"hub-profile-box__three-dots\",\n    onClick: () => toggleDropOptions(!showDropOptions),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"dot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"dot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"dot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  })), showDropOptions ? React.createElement(\"div\", {\n    className: \"hub-profile-box__drop-options\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"drop-options__log-out\",\n    onClick: props.logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Log Out\")) : null, React.createElement(\"i\", {\n    className: \"fas fa-cog hub-profile-box__settings\",\n    onClick: () => props.toggleDeleteAcc(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"hub-profile-box__block-one\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, blockOneContent), React.createElement(\"div\", {\n    className: \"hub-profile-box__block-two\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, blockTwoContent));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.user.uid,\n    email: state.user.email,\n    username: state.user.username,\n    sex: state.user.gender,\n    address: state.user.address,\n    zipcode: state.user.address.zip_code,\n    city: state.user.address.city,\n    state: state.user.address.state,\n    needsInfo: state.user.needsInfo,\n    photoURL: state.user.photoURL,\n    blurb: state.user.blurb\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n    logout: () => dispatch(actions.logOut())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/ProfileBox.js"],"names":["React","useEffect","useState","PhotoContainer","actionTypes","firebase","getOrdinal","connect","postUserData","actions","ProfileBox","props","showDropOptions","toggleDropOptions","follows","setFollows","blurbText","setBlurbText","document","addEventListener","closeDropOptions","fetchFollows","removeEventListener","blurb","photoRef","rapper","uid","db","firestore","collection","get","then","querySnapshot","fetchedFollows","forEach","doc","push","data","fid","id","event","target","classList","contains","textAreaKeyDown","keyCode","preventDefault","blur","blockOneContent","needsInfo","photoURL","setShowPhotoModal","username","city","state","sex","toggleUploadHandles","value","height","borderRadius","background","blockTwoContent","isLoading","myPlace","myPoints","logout","toggleDeleteAcc","mapStateToProps","user","email","gender","address","zipcode","zip_code","mapDispatchToProps","dispatch","logOut"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './ProfileBox.css'\nimport PhotoContainer from './PhotoContainer/PhotoContainer'\nimport * as actionTypes from '../../../store/actions/actionsTypes'\nimport firebase from 'firebase'\nimport { getOrdinal } from '../../../shared/utility'\nimport { connect } from 'react-redux'\nimport { postUserData } from '../../../store/actions/auth'\nimport * as actions from '../../../store/actions/index'\n\n\n\nfunction ProfileBox(props) {\n\n    const [showDropOptions, toggleDropOptions] = useState(false)\n    const [follows, setFollows] = useState([])\n    const [blurbText, setBlurbText] = useState('')\n\n\n\n    // componentDidMount\n    useEffect(() => {\n        document.addEventListener('click', closeDropOptions)\n        fetchFollows()\n        return () => {\n            document.removeEventListener('click', closeDropOptions)\n        };\n    }, [])\n\n    // componentDidUpdate\n    useEffect(() => {\n\n        if (props.blurb) {\n            setBlurbText(props.blurb)\n        }\n    }, [props.photoRef, props.rapper, follows, props.uid, props.blurb])\n\n    const fetchFollows = async () => {\n        let db = firebase.firestore()\n        let follows = await db.collection(\"follows\").get().then(((querySnapshot) => {\n            let fetchedFollows = []\n            querySnapshot.forEach(doc => {\n                fetchedFollows.push({\n                    ...doc.data(),\n                    fid: doc.id\n                })\n            })\n            return fetchedFollows\n        }))\n        setFollows(follows)\n\n    }\n\n\n    const closeDropOptions = (event) => {\n        if (!event.target.classList.contains('hub-profile-box__three-dots') && !event.target.classList.contains('dot')) {\n            toggleDropOptions(false)\n        }\n    }\n\n    const textAreaKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault()\n            event.target.blur()\n        }\n    }\n\n\n    let blockOneContent = null;\n    // <DotSpinner customStyle={{position: 'absolute', top: '-1em'}}/>\n    if (!props.needsInfo) {\n        blockOneContent = (\n            <div className={`block-one__contents-wrapper`}>\n                <PhotoContainer imgURL={props.photoURL} setShowPhotoModal={props.setShowPhotoModal} />\n                <div className='contents-wrapper__username'>{props.username}</div>\n                <div className='contents-wrapper__address-gender'>{props.city}, {props.state} | {props.sex}</div>\n                <div className='contents-wrapper__handles-container'>\n                    <i className=\"fab fa-facebook-f icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                    <i className=\"fab fa-instagram icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                    <i className=\"fab fa-soundcloud icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                    <i className=\"fab fa-youtube icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                </div>\n                <textarea\n                    className='contents-wrapper__blurb'\n                    placeholder='-Write a blurb-'\n                    spellCheck={false}\n                    maxLength={55}\n                    onKeyDown={event => textAreaKeyDown(event)}\n                    onChange={event => setBlurbText(event.target.value)}\n                    onBlur={event => props.postUserData(props.uid, { blurb: event.target.value })}\n                    value={blurbText} />\n            </div>\n        )\n    }\n    if (props.needsInfo) {\n        blockOneContent = (\n            <div className={`block-one__contents-wrapper`}>\n                <img\n                    className='contents-wrapper__dummy-img'\n                    alt=''\n                    style={\n                        {\n                            height: '50px',\n                            borderRadius: '50%', \n                            background: 'white',\n                        }\n                    } src={props.photoURL}></img>\n                <div className='contents-wrapper__username'>Anonymous</div>\n            </div>\n        )\n    }\n\n    let blockTwoContent = null;\n\n    if (!props.isLoading) {\n        blockTwoContent = (\n            <div className={'block-two__place-point-container'}>\n                <div>\n                    {props.myPlace + getOrdinal(props.myPlace) + \" place\"}\n                </div>\n                <div>\n                    {props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')}\n                </div>\n            </div>\n        )\n    }\n\n    return (<div className='hub-profile-box' >\n\n        <div>\n            <div className='hub-profile-box__three-dots' onClick={() => toggleDropOptions(!showDropOptions)}>\n                <div className='dot' />\n                <div className='dot' />\n                <div className='dot' />\n            </div>\n            {showDropOptions ?\n                <div className='hub-profile-box__drop-options'>\n                    <div className='drop-options__log-out' onClick={props.logout}>Log Out</div>\n                </div> : null}\n\n            <i className=\"fas fa-cog hub-profile-box__settings\" onClick={() => props.toggleDeleteAcc(true)}></i>\n        </div>\n        <div className='hub-profile-box__block-one'>\n            {blockOneContent}\n        </div>\n        <div className='hub-profile-box__block-two'>\n            {blockTwoContent}\n        </div>\n    </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.user.uid,\n        email: state.user.email,\n        username: state.user.username,\n        sex: state.user.gender,\n        address: state.user.address,\n        zipcode: state.user.address.zip_code,\n        city: state.user.address.city,\n        state: state.user.address.state,\n        needsInfo: state.user.needsInfo,\n        photoURL: state.user.photoURL,\n        blurb: state.user.blurb\n    }\n}\n\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n        logout: () => dispatch(actions.logOut())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox)\n"]},"metadata":{},"sourceType":"module"}