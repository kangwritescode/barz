{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/barz/src/containers/Wordsmiths/Pedestal/Pedestal.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport './Pedestal.css';\nimport 'firebase/firestore';\nimport copy from 'clipboard-copy';\nimport ig from '../../../assets/handles/ig.png';\nimport fb from '../../../assets/handles/fb.png';\nimport sc from '../../../assets/handles/sc.png';\nimport yt from '../../../assets/handles/yt.png';\nimport PopNotif from '../../../shared/PopNotif/PopNotif';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\n\nclass Pedestal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      photoURL: '',\n      user: null,\n      fetching: false\n    };\n\n    this.componentDidUpdate = async (prevProps, prevState) => {\n      if (prevProps.rapper !== this.props.rapper) {\n        this.setState(_objectSpread({}, this.state, {\n          fetching: true\n        }));\n        var db = firebase.firestore();\n        var user = await db.collection('users').doc(this.props.rapper.uid).get().then(doc => {\n          return doc.data();\n        });\n        var photoURL = await this.fetchRapperPhotoURL(user.photoRef);\n        this.setState(_objectSpread({}, this.state, {\n          user: user,\n          photoURL: photoURL,\n          fetching: false\n        }));\n      }\n    };\n\n    this.fetchRapperPhotoURL = async photoRef => {\n      var storage = firebase.storage();\n      return storage.ref(photoRef).getDownloadURL().then(url => {\n        return url;\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getOrdinal = i => {\n      var j = i % 10;\n      var k = i % 100;\n\n      if (j === 1 && k !== 11) {\n        return \"st\";\n      }\n\n      if (j === 2 && k !== 12) {\n        return \"nd\";\n      }\n\n      if (j === 3 && k !== 13) {\n        return \"rd\";\n      } else {\n        return \"th\";\n      }\n    };\n\n    this.openSocialMedia = (type, url) => {\n      try {\n        if (url && type === 'ig') {\n          window.open(\"www.instagram.com/\".concat(url));\n        } else if (url) {\n          window.open(url);\n        }\n      } catch (err) {\n        console.log(\"sorry that link is broken\");\n      }\n    };\n\n    this.addhttp = url => {\n      if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n        url = \"http://\" + url;\n      }\n\n      return url;\n    };\n  }\n\n  render() {\n    // fetching ?\n    var fetching = this.state.fetching ? 'fetching' : null;\n    console.log(fetching, 'sfsdfsd'); // relevantRapper\n\n    var releventRapper = this.props.rapper; // general information\n\n    var username = releventRapper ? releventRapper.username : 'Select a User';\n    var city = releventRapper ? releventRapper.city : null;\n    var state = releventRapper ? releventRapper.state : null;\n    var gender = releventRapper ? releventRapper.gender : null;\n    var cityStateGender = releventRapper ? \"\".concat(city, \", \").concat(state, \" | \").concat(gender) : null;\n    var rank = releventRapper ? releventRapper.rank + this.getOrdinal(releventRapper.rank) : null;\n    var subCount = releventRapper ? releventRapper.submissionCount : null;\n    var score = releventRapper ? releventRapper.votes : null; // databaseUser\n\n    var firebaseUser = this.state.user; // handles\n\n    var hasFB = firebaseUser && firebaseUser.handles.facebook ? firebaseUser.handles.facebook : null;\n    var hasIG = firebaseUser && firebaseUser.handles.instagram ? firebaseUser.handles.instagram : null;\n    var hasSC = firebaseUser && firebaseUser.handles.soundcloud ? firebaseUser.handles.soundcloud : null;\n    var hasYT = firebaseUser && firebaseUser.handles.youtube ? firebaseUser.handles.youtube : null; // everything ( firebaseUser, relevantUser, photoRef) is loaded\n\n    return React.createElement(\"div\", {\n      className: \"Pedestal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"Pedestal-Header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Spotlight\"), React.createElement(\"div\", {\n      className: \"spotlight-block\",\n      id: \"spotlight-block-one\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"spotlight-username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, username), React.createElement(\"div\", {\n      className: \"spotlight-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, cityStateGender), React.createElement(\"div\", {\n      className: \"spotlight-photo-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"spotlight-photo \".concat(fetching),\n      alt: \"alt\",\n      src: this.state.photoURL ? this.state.photoURL : this.props.defaultURL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"spotlight-block\",\n      id: \"spotlight-block-two\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"spotlight-stats-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.props.sort === \"Best\" ? React.createElement(\"div\", {\n      className: \"stat-holder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"stat-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, rank), React.createElement(\"div\", {\n      className: \"stat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, this.props.rapper ? 'Rank' : null))) : null, React.createElement(\"div\", {\n      className: \"stat-holder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"stat-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, score), React.createElement(\"div\", {\n      className: \"stat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, this.props.rapper ? 'Score' : null))), React.createElement(\"div\", {\n      className: \"stat-holder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"stat-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, subCount), React.createElement(\"div\", {\n      className: \"stat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, this.props.rapper ? 'Posts' : null))))), React.createElement(\"div\", {\n      className: \"spotlight-block\",\n      id: \"spotlight-block-three\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"spotlight-handles-container \".concat(fetching),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, hasFB ? React.createElement(\"a\", {\n      className: \"handle-container handle-activated\",\n      href: this.addhttp(hasFB),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"spotlight-fb\",\n      alt: \"alt\",\n      src: fb,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })) : null, hasIG ? React.createElement(\"a\", {\n      className: \"handle-container handle-activated\",\n      href: \"https://www.instagram.com/\".concat(hasIG, \"/\"),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"spotlight-ig\",\n      alt: \"alt\",\n      src: ig,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    })) : null, hasSC ? React.createElement(\"a\", {\n      className: \"handle-container handle-activated\",\n      href: this.addhttp(hasSC),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"spotlight-sc\",\n      alt: \"alt\",\n      src: sc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })) : null, hasYT ? React.createElement(\"a\", {\n      className: \"handle-container handle-activated\",\n      href: this.addhttp(hasYT),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"spotlight-yt\",\n      alt: \"alt\",\n      src: yt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })) : null)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }));\n  }\n\n}\n\nPedestal.defaultProps = {\n  defaultURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n  rapper: {}\n};\nexport default Pedestal;","map":{"version":3,"sources":["/Users/davidkang/Desktop/barz/src/containers/Wordsmiths/Pedestal/Pedestal.js"],"names":["React","Component","copy","ig","fb","sc","yt","PopNotif","firebase","Pedestal","state","photoURL","user","fetching","componentDidUpdate","prevProps","prevState","rapper","props","setState","db","firestore","collection","doc","uid","get","then","data","fetchRapperPhotoURL","photoRef","storage","ref","getDownloadURL","url","catch","err","console","log","getOrdinal","i","j","k","openSocialMedia","type","window","open","addhttp","test","render","releventRapper","username","city","gender","cityStateGender","rank","subCount","submissionCount","score","votes","firebaseUser","hasFB","handles","facebook","hasIG","instagram","hasSC","soundcloud","hasYT","youtube","defaultURL","sort","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './Pedestal.css'\nimport 'firebase/firestore'\nimport copy from 'clipboard-copy'\nimport ig from '../../../assets/handles/ig.png'\nimport fb from '../../../assets/handles/fb.png'\nimport sc from '../../../assets/handles/sc.png'\nimport yt from '../../../assets/handles/yt.png'\nimport PopNotif from '../../../shared/PopNotif/PopNotif'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\n\nclass Pedestal extends Component {\n\n    static defaultProps = {\n        defaultURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n        rapper: {}\n    }\n    state = {\n        photoURL: '',\n        user: null,\n        fetching: false\n    }\n\n    componentDidUpdate = async (prevProps, prevState) => {\n\n        if (prevProps.rapper !== this.props.rapper) {\n            this.setState({\n                ...this.state,\n                fetching: true\n            })\n            var db = firebase.firestore()\n            var user = await db.collection('users').doc(this.props.rapper.uid).get()\n                .then(doc => {\n                    return doc.data()\n                })\n            var photoURL = await this.fetchRapperPhotoURL(user.photoRef)\n\n            this.setState({\n                ...this.state,\n                user: user,\n                photoURL: photoURL,\n                fetching: false\n            })\n        }\n    }\n\n    fetchRapperPhotoURL = async (photoRef) => {\n\n        var storage = firebase.storage()\n        return storage.ref(photoRef).getDownloadURL()\n            .then(url => {\n                return url\n            })\n            .catch(err => {\n                console.log(err)\n            });\n\n    }\n\n    // credit to stackoverflow.com/questions/13627308\n    getOrdinal = (i) => {\n        var j = i % 10\n        var k = i % 100\n        if (j === 1 && k !== 11) { return \"st\" }\n        if (j === 2 && k !== 12) { return \"nd\" }\n        if (j === 3 && k !== 13) { return \"rd\" }\n        else { return \"th\" }\n    }\n\n    openSocialMedia = (type, url) => {\n\n        try {\n\n            if (url && type === 'ig') {\n                window.open(`www.instagram.com/${url}`)\n            }\n            else if (url) {\n                window.open(url)\n            }\n        }\n        catch (err) {\n            console.log(\"sorry that link is broken\")\n        }\n    }\n\n    addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n\n    render() {\n\n\n        // fetching ?\n        var fetching = this.state.fetching ? 'fetching' : null\n        console.log(fetching, 'sfsdfsd')\n\n        // relevantRapper\n        var releventRapper = this.props.rapper\n        // general information\n        var username = releventRapper ? releventRapper.username : 'Select a User'\n        var city = releventRapper ? releventRapper.city : null\n        var state = releventRapper ? releventRapper.state : null\n        var gender = releventRapper ? releventRapper.gender : null\n        var cityStateGender = releventRapper ? `${city}, ${state} | ${gender}` : null\n        var rank = releventRapper ? releventRapper.rank + this.getOrdinal(releventRapper.rank) : null\n        var subCount = releventRapper ? releventRapper.submissionCount : null\n        var score = releventRapper ? releventRapper.votes : null\n\n        // databaseUser\n        var firebaseUser = this.state.user\n\n        // handles\n        var hasFB = firebaseUser && firebaseUser.handles.facebook ? firebaseUser.handles.facebook : null\n        var hasIG = firebaseUser && firebaseUser.handles.instagram ? firebaseUser.handles.instagram : null\n        var hasSC = firebaseUser && firebaseUser.handles.soundcloud ? firebaseUser.handles.soundcloud : null\n        var hasYT = firebaseUser && firebaseUser.handles.youtube ? firebaseUser.handles.youtube : null\n\n        // everything ( firebaseUser, relevantUser, photoRef) is loaded\n\n        return (\n            <div className=\"Pedestal\">\n                <div id=\"Pedestal-Header\">Spotlight</div>\n                <div className=\"spotlight-block\" id=\"spotlight-block-one\">\n                    <div className={`spotlight-username`}>{username}</div>\n                    <div className={`spotlight-details`}>{cityStateGender}</div>\n                    <div className={`spotlight-photo-container`}>\n                        <img className={`spotlight-photo ${fetching}`} alt=\"alt\" src={this.state.photoURL ? this.state.photoURL : this.props.defaultURL} />\n                    </div>\n                </div>\n                <div className=\"spotlight-block\" id=\"spotlight-block-two\">\n                    <div className=\"spotlight-stats-container\">\n                        {this.props.sort === \"Best\" ?\n                            <div className=\"stat-holder\">\n                                <div className={`stat-value`}>{rank}</div>\n                                <div className=\"stat\"><u>{this.props.rapper ? 'Rank' : null}</u></div>\n                            </div> : null}\n                        <div className=\"stat-holder\">\n                            <div className={`stat-value`}>{score}</div>\n                            <div className=\"stat\"><u>{this.props.rapper ? 'Score' : null}</u></div>\n                        </div>\n                        <div className=\"stat-holder\">\n                            <div className={`stat-value`}>{subCount}</div>\n                            <div className=\"stat\"><u>{this.props.rapper ? 'Posts' : null}</u></div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"spotlight-block\" id=\"spotlight-block-three\">\n                    <div className={`spotlight-handles-container ${fetching}`}>\n                        {hasFB ?\n                            <a className={`handle-container handle-activated`} href={this.addhttp(hasFB)} target=\"_blank\">\n                                <img className={`spotlight-fb`} alt=\"alt\" src={fb}></img>\n                            </a> : null}\n                        {hasIG ?\n                            <a className={`handle-container handle-activated`} href={`https://www.instagram.com/${hasIG}/`} target=\"_blank\">\n                                <img className={`spotlight-ig`} alt=\"alt\" src={ig}></img>\n                            </a> : null}\n                        {hasSC ?\n                            <a className={`handle-container handle-activated`} href={this.addhttp(hasSC)} target=\"_blank\">\n                                <img className={`spotlight-sc`} alt=\"alt\" src={sc}></img>\n                            </a> : null}\n                        {hasYT ?\n                            <a className={`handle-container handle-activated`} href={this.addhttp(hasYT)} target=\"_blank\">\n                                <img className={`spotlight-yt`} alt=\"alt\" src={yt}></img>\n                            </a> : null}\n\n                    </div>\n                </div>\n                <div></div>\n            </div>\n        )\n    }\n}\n\nexport default Pedestal"]},"metadata":{},"sourceType":"module"}