{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Documents/GitHub/barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Documents/GitHub/barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Documents/GitHub/barz/src/containers/Wordsmiths/Rappers/Spotlight/Spotlight.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport firebase from 'firebase';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { getOrdinal } from '../../../../shared/utility';\nimport { postUserData } from '../../../../store/actions/auth';\nimport * as actions from '../../../../store/actions/index';\nimport './Spotlight.css';\n\nfunction Spotlight(props) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        follows = _useState2[0],\n        setFollows = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        amFollowing = _useState4[0],\n        setAmFollowing = _useState4[1]; // componentDidMount\n\n\n  useEffect(() => {\n    fetchFollows();\n    return () => {};\n  }, []); // componentDidUpdate\n\n  useEffect(() => {\n    const calcAmFollowing = otherUID => {\n      let follow = follows.filter(follow => {\n        return follow.to === otherUID && follow.from === props.uid;\n      });\n      setAmFollowing(follow.length === 0 ? false : true);\n    };\n\n    if (props.rapper) {\n      calcAmFollowing(props.rapper.uid);\n    }\n  }, [props.photoURL, props.rapper, follows, props.uid, props.blurb]);\n\n  const fetchFollows = async () => {\n    let db = firebase.firestore();\n    let follows = await db.collection(\"follows\").get().then(querySnapshot => {\n      let fetchedFollows = [];\n      querySnapshot.forEach(doc => {\n        fetchedFollows.push(_objectSpread({}, doc.data(), {\n          fid: doc.id\n        }));\n      });\n      return fetchedFollows;\n    });\n    setFollows(follows);\n  };\n\n  const follow = () => {\n    setAmFollowing(true);\n    let db = firebase.firestore();\n    db.collection('follows').add({\n      from: props.uid,\n      to: props.rapper.uid\n    }).then(() => fetchFollows()).catch(err => console.log(err.message));\n  };\n\n  const unfollow = () => {\n    setAmFollowing(false);\n    let db = firebase.firestore();\n    db.collection('follows').where('from', '==', props.uid).where('to', '==', props.rapper.uid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete();\n      });\n      fetchFollows();\n    }).catch(err => console.log(err));\n  };\n\n  const addhttp = url => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n      url = \"http://\" + url;\n    }\n\n    return url;\n  };\n\n  let username = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Link, {\n    style: {\n      textDecoration: 'none',\n      color: 'white'\n    },\n    to: \"/\" + props.rapper.username + \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, props.rapper ? props.rapper.username : null)) : React.createElement(\"h2\", {\n    className: \"block-one__select-a-user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Select a User\");\n  let addressGender = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__address-gender\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, props.rapper ? props.rapper.city : null, \", \", props.rapper ? props.rapper.state : null, \" | \", props.rapper ? props.rapper.gender : null) : null;\n  let photo = props.rapper ? React.createElement(Link, {\n    style: {\n      textDecoration: 'none',\n      color: 'white'\n    },\n    to: \"/\" + props.rapper.username + \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"block-one__img-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"\",\n    src: props.rapper.photoURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), props.rapper.rank === 1 ? React.createElement(\"i\", {\n    class: \"fas fa-crown crown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }) : null, props.rapper.rank === 2 ? React.createElement(\"i\", {\n    class: \"fas fa-crown crown\",\n    style: {\n      color: 'silver'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }) : null))) : null;\n  let button = React.createElement(\"button\", {\n    className: \"follow-button\",\n    onClick: follow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"follow\");\n\n  if (amFollowing) {\n    button = React.createElement(\"button\", {\n      className: \"follow-button\",\n      onClick: unfollow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"following\");\n  }\n\n  let handles = null;\n\n  if (props.rapper && (props.rapper.handles.facebook || props.rapper.handles.soundcloud || props.rapper.handles.instagram || props.rapper.handles.youtube)) {\n    handles = React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, props.rapper && props.rapper.handles.facebook ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.facebook),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.instagram ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.instagram),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.soundcloud ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.soundcloud),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.youtube ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.youtube),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    })) : null);\n  }\n\n  let blurb = null;\n\n  if (props.rapper && props.rapper.blurb) {\n    blurb = React.createElement(\"p\", {\n      className: \"block-one__blurb\",\n      style: {\n        cursor: 'text'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, props.rapper ? props.rapper.blurb : null);\n  }\n\n  console.log(props.rapper);\n  return React.createElement(\"div\", {\n    className: \"spotlight\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"spotlight__block-one\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, photo, username, addressGender, handles, blurb), React.createElement(\"div\", {\n    className: \"spotlight__block-two\",\n    style: {\n      fontSize: '.7em'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, props.focus === 'them' ? button : null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null, \" \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null, \" \")));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.user.uid,\n    email: state.user.email,\n    username: state.user.username,\n    sex: state.user.gender,\n    address: state.user.address,\n    zipcode: state.user.address.zip_code,\n    city: state.user.address.city,\n    state: state.user.address.state,\n    needsInfo: state.user.needsInfo,\n    photoURL: state.user.photoURL,\n    blurb: state.user.blurb\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n    logout: () => dispatch(actions.logOut())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spotlight);","map":{"version":3,"sources":["/Users/davidkang/Documents/GitHub/barz/src/containers/Wordsmiths/Rappers/Spotlight/Spotlight.js"],"names":["firebase","React","useEffect","useState","connect","Link","getOrdinal","postUserData","actions","Spotlight","props","follows","setFollows","amFollowing","setAmFollowing","fetchFollows","calcAmFollowing","otherUID","follow","filter","to","from","uid","length","rapper","photoURL","blurb","db","firestore","collection","get","then","querySnapshot","fetchedFollows","forEach","doc","push","data","fid","id","add","catch","err","console","log","message","unfollow","where","snap","ref","delete","addhttp","url","test","username","textDecoration","color","addressGender","city","state","gender","photo","rank","button","handles","facebook","soundcloud","instagram","youtube","cursor","fontSize","focus","votes","mapStateToProps","user","email","sex","address","zipcode","zip_code","needsInfo","mapDispatchToProps","dispatch","logout","logOut"],"mappings":"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","sourcesContent":["import firebase from 'firebase'\nimport React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { getOrdinal } from '../../../../shared/utility'\nimport { postUserData } from '../../../../store/actions/auth'\nimport * as actions from '../../../../store/actions/index'\nimport './Spotlight.css'\n\n\n\nfunction Spotlight(props) {\n\n    const [follows, setFollows] = useState([])\n    const [amFollowing, setAmFollowing] = useState(false)\n\n    // componentDidMount\n    useEffect(() => {\n        fetchFollows()\n        return () => {\n        };\n    }, [])\n\n    // componentDidUpdate\n    useEffect(() => {\n        const calcAmFollowing = (otherUID) => {\n            let follow = follows\n                .filter(follow => {\n                    return follow.to === otherUID && follow.from === props.uid\n                })\n            setAmFollowing(follow.length === 0 ? false : true)\n        }\n\n        if (props.rapper) {\n            calcAmFollowing(props.rapper.uid)\n        }\n\n    }, [props.photoURL, props.rapper, follows, props.uid, props.blurb])\n\n    const fetchFollows = async () => {\n        let db = firebase.firestore()\n        let follows = await db.collection(\"follows\").get().then(((querySnapshot) => {\n            let fetchedFollows = []\n            querySnapshot.forEach(doc => {\n                fetchedFollows.push({\n                    ...doc.data(),\n                    fid: doc.id\n                })\n            })\n            return fetchedFollows\n        }))\n        setFollows(follows)\n\n    }\n\n\n    const follow = () => {\n        setAmFollowing(true)\n        let db = firebase.firestore()\n        db.collection('follows').add({\n            from: props.uid,\n            to: props.rapper.uid\n        })\n            .then(() => fetchFollows())\n            .catch(err => console.log(err.message))\n    }\n\n    const unfollow = () => {\n        setAmFollowing(false)\n        let db = firebase.firestore()\n        db.collection('follows')\n            .where('from', '==', props.uid)\n            .where('to', '==', props.rapper.uid)\n            .get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete()\n                })\n                fetchFollows()\n            })\n            .catch(err => console.log(err))\n    }\n\n    const addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n    let username = props.rapper ?\n        <div className='block-one__username'><Link style={{ textDecoration: 'none', color: 'white' }} to={\"/\" + props.rapper.username + \"/\"}>{props.rapper ? props.rapper.username : null}</Link></div>\n        : <h2 className='block-one__select-a-user'>Select a User</h2>\n    let addressGender = props.rapper ?\n        <div className='block-one__address-gender'>{props.rapper ? props.rapper.city : null}, {props.rapper ? props.rapper.state : null} | {props.rapper ? props.rapper.gender : null}</div>\n        : null\n\n\n    let photo = props.rapper ?\n        <Link\n            style={{ textDecoration: 'none', color: 'white' }}\n            to={\"/\" + props.rapper.username + \"/\"}>\n            <div className='block-one__img-wrapper'>\n                <div>\n                    <img alt='' src={props.rapper.photoURL} />\n                    {props.rapper.rank === 1 ?\n                        <i class=\"fas fa-crown crown\"></i>\n                        : null}\n                    {props.rapper.rank === 2 ?\n                        <i class=\"fas fa-crown crown\" style={{ color: 'silver' }}></i>\n                        : null}\n                </div>\n\n            </div>\n        </Link>\n        : null\n    let button = <button className='follow-button' onClick={follow}>follow</button>\n    if (amFollowing) {\n        button = <button className='follow-button' onClick={unfollow}>following</button>\n    }\n    let handles = null;\n\n\n    if (props.rapper && (props.rapper.handles.facebook\n        || props.rapper.handles.soundcloud\n        || props.rapper.handles.instagram\n        || props.rapper.handles.youtube)) {\n        handles = (<div className='block-one__handles-container'>\n            {props.rapper && props.rapper.handles.facebook ?\n                <a href={addhttp(props.rapper.handles.facebook)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-facebook-f icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.instagram ?\n                <a href={addhttp(props.rapper.handles.instagram)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-instagram icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.soundcloud ?\n                <a href={addhttp(props.rapper.handles.soundcloud)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-soundcloud icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.youtube ?\n                <a href={addhttp(props.rapper.handles.youtube)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-youtube icon\"></i>\n                </a> : null}\n        </div>)\n    }\n    let blurb = null;\n    if (props.rapper && props.rapper.blurb) {\n        blurb = (\n            <p className='block-one__blurb' style={{ cursor: 'text' }}>\n                {props.rapper ? props.rapper.blurb : null}\n            </p>\n        )\n    }\n    console.log(props.rapper)\n    return (\n        <div className='spotlight' >\n            <div className='spotlight__block-one'>\n\n                {photo}\n                {username}\n                {addressGender}\n                {handles}\n                {blurb}\n            </div>\n            <div className='spotlight__block-two' style={{ fontSize: '.7em' }}>\n                {props.focus === 'them' ? button : null}\n                <div>{props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null} </div>\n                <div>{props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null} </div>\n\n            </div>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.user.uid,\n        email: state.user.email,\n        username: state.user.username,\n        sex: state.user.gender,\n        address: state.user.address,\n        zipcode: state.user.address.zip_code,\n        city: state.user.address.city,\n        state: state.user.address.state,\n        needsInfo: state.user.needsInfo,\n        photoURL: state.user.photoURL,\n        blurb: state.user.blurb\n    }\n}\n\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n        logout: () => dispatch(actions.logOut())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spotlight)\n"]},"metadata":{},"sourceType":"module"}