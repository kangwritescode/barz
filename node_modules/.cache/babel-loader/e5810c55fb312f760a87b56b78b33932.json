{"ast":null,"code":"import _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/ProfileBox.js\";\nimport React, { useEffect, useState } from 'react';\nimport './ProfileBox.css';\nimport PhotoContainer from '../Profile/PhotoContainer/PhotoContainer';\nimport * as actionTypes from '../../../store/actions';\nimport DeleteAccount from '../Profile/DeleteAccount/DeleteAccount';\nimport firebase from 'firebase';\nimport { getOrdinal } from '../../../shared/getOrdinal';\nimport { connect } from 'react-redux'; // this component is stupid an should be split into two separate components \n// or made dynamic so there isn't so much code\n\nfunction ProfileBox(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showDropOptions = _useState2[0],\n        toggleDropOptions = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showDeleteAcc = _useState4[0],\n        toggleDeleteAcc = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        imgURL = _useState6[0],\n        setImgURL = _useState6[1]; // componentDidMount\n\n\n  useEffect(() => {\n    document.addEventListener('click', closeDropOptions);\n    return () => {\n      document.removeEventListener('click', closeDropOptions);\n    };\n  }, []); // componentDidUpdate\n\n  useEffect(() => {\n    if (props.wrappedBy === 'Hub') {\n      fetchPhotoURL(props.photoRef);\n    }\n\n    if (props.wrappedBy === 'Rappers' && props.rapper) {\n      fetchPhotoURL(props.rapper.photoRef);\n    }\n  }, [props.photoRef, props.rapper, props.wrappedBy]);\n\n  const fetchPhotoURL = async photoRef => {\n    var storage = firebase.storage();\n    storage.ref(photoRef).getDownloadURL().then(url => {\n      setImgURL(url);\n    }).catch(function (error) {\n      console.log(\"error in Profile.js: \", error);\n    });\n    return () => {// cleanup\n    };\n  };\n\n  const addhttp = url => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n      url = \"http://\" + url;\n    }\n\n    return url;\n  };\n\n  const closeDropOptions = event => {\n    if (!event.target.classList.contains('profile-box__three-dots') && !event.target.classList.contains('dot')) {\n      toggleDropOptions(false);\n    }\n  };\n\n  const calcAmFollowing = otherUID => {\n    var follows = [...props.follows];\n    var follow = follows.filter(follow => {\n      return follow.to === otherUID && follow.from === props.uid;\n    });\n    return follow.length === 1 ? true : false;\n  };\n\n  var content = null;\n\n  if (props.wrappedBy === 'Hub') {\n    content = React.createElement(\"div\", {\n      className: \"profile-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, showDeleteAcc ? React.createElement(DeleteAccount, {\n      toggleDeleteAcc: toggleDeleteAcc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }) : null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"profile-box__three-dots\",\n      onClick: () => toggleDropOptions(!showDropOptions),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })), showDropOptions ? React.createElement(\"div\", {\n      className: \"profile-box__drop-options\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"drop-options__log-out\",\n      onClick: props.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Log Out\")) : null, React.createElement(\"i\", {\n      className: \"fas fa-cog profile-box__settings\",\n      onClick: () => toggleDeleteAcc(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"profile-box__block-one\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(PhotoContainer, {\n      imgURL: imgURL,\n      setShowPhotoModal: props.setShowPhotoModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"block-one__username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, props.username), React.createElement(\"div\", {\n      className: \"block-one__address-gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, props.city, \", \", props.state, \" | \", props.sex), React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      className: \"block-one__blurb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"\\\"West Philadelpha born and raised on the playground was where I spent most of my days...\\\"\")), React.createElement(\"div\", {\n      className: \"profile-box__block-two\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, props.myPlace + getOrdinal(props.myPlace) + \" place\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's'))));\n  } else if (props.wrappedBy === 'Rappers') {\n    var username = props.rapper ? React.createElement(\"div\", {\n      className: \"block-one__username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, props.rapper ? props.rapper.username : null) : React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Select a User\");\n    var addressGender = props.rapper ? React.createElement(\"div\", {\n      className: \"block-one__address-gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, props.rapper ? props.rapper.city : null, \", \", props.rapper ? props.rapper.state : null, \" | \", props.rapper ? props.rapper.gender : null) : null;\n    var photo = props.rapper ? React.createElement(PhotoContainer, {\n      imgURL: imgURL,\n      setShowPhotoModal: props.setShowPhotoModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }) : null;\n    var amFollowing = props.rapper && calcAmFollowing(props.rapper.uid) ? true : false;\n    var button = React.createElement(\"button\", {\n      className: \"follow-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"follow\");\n\n    if (amFollowing) {\n      button = React.createElement(\"button\", {\n        className: \"follow-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"following\");\n    }\n\n    content = React.createElement(\"div\", {\n      className: \"profile-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, showDeleteAcc ? React.createElement(DeleteAccount, {\n      toggleDeleteAcc: toggleDeleteAcc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }) : null, React.createElement(\"div\", {\n      className: \"profile-box__block-one\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, photo, username, addressGender, React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, props.rapper && props.rapper.handles.facebook ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.facebook),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.instagram ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.instagram),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.soundcloud ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.soundcloud),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.youtube ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.youtube),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })) : null), React.createElement(\"p\", {\n      className: \"block-one__blurb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, props.rapper ? \"\\\"West Philadelphia born and raised, on the playground was where I spent most of my days.\\\"\" : null)), React.createElement(\"div\", {\n      className: \"profile-box__block-two\",\n      style: {\n        fontSize: '.7em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, props.focus === 'them' ? button : null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null, \" \")));\n  }\n\n  return content;\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid,\n    loggedin: state.loggedIn,\n    email: state.email,\n    username: state.username,\n    sex: state.gender,\n    address: state.address,\n    zipcode: state.address.zip_code,\n    city: state.address.city,\n    state: state.address.state,\n    needsInfo: state.needsInfo,\n    photoRef: state.photoRef,\n    handles: state.handles,\n    playing: state.playing\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logout: () => dispatch({\n      type: actionTypes.LOG_OUT\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/ProfileBox.js"],"names":["React","useEffect","useState","PhotoContainer","actionTypes","DeleteAccount","firebase","getOrdinal","connect","ProfileBox","props","showDropOptions","toggleDropOptions","showDeleteAcc","toggleDeleteAcc","imgURL","setImgURL","document","addEventListener","closeDropOptions","removeEventListener","wrappedBy","fetchPhotoURL","photoRef","rapper","storage","ref","getDownloadURL","then","url","catch","error","console","log","addhttp","test","event","target","classList","contains","calcAmFollowing","otherUID","follows","follow","filter","to","from","uid","length","content","logout","setShowPhotoModal","username","city","state","sex","toggleUploadHandles","myPlace","myPoints","addressGender","gender","photo","amFollowing","button","handles","facebook","instagram","soundcloud","youtube","fontSize","focus","rank","votes","mapStateToProps","loggedin","loggedIn","email","address","zipcode","zip_code","needsInfo","playing","mapDispatchToProps","dispatch","type","LOG_OUT"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './ProfileBox.css'\nimport PhotoContainer from '../Profile/PhotoContainer/PhotoContainer'\nimport * as actionTypes from '../../../store/actions'\nimport DeleteAccount from '../Profile/DeleteAccount/DeleteAccount'\nimport firebase from 'firebase'\nimport { getOrdinal } from '../../../shared/getOrdinal'\nimport { connect } from 'react-redux'\n\n\n\n// this component is stupid an should be split into two separate components \n// or made dynamic so there isn't so much code\nfunction ProfileBox(props) {\n\n    const [showDropOptions, toggleDropOptions] = useState(false)\n    const [showDeleteAcc, toggleDeleteAcc] = useState(false)\n    const [imgURL, setImgURL] = useState(null)\n\n\n\n    // componentDidMount\n    useEffect(() => {\n        document.addEventListener('click', closeDropOptions)\n        return () => {\n            document.removeEventListener('click', closeDropOptions)\n        };\n    }, [])\n\n    // componentDidUpdate\n    useEffect(() => {\n        if (props.wrappedBy === 'Hub') {\n            fetchPhotoURL(props.photoRef)\n        }\n        if (props.wrappedBy === 'Rappers' && props.rapper) {\n            fetchPhotoURL(props.rapper.photoRef)\n        }\n    }, [props.photoRef, props.rapper, props.wrappedBy])\n\n\n    const fetchPhotoURL = async (photoRef) => {\n        var storage = firebase.storage();\n        storage.ref(photoRef).getDownloadURL().then(url => {\n            setImgURL(url)\n        }).catch(function (error) { console.log(\"error in Profile.js: \", error) });\n        return () => {\n            // cleanup\n        };\n    }\n\n    const addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n    const closeDropOptions = (event) => {\n        if (!event.target.classList.contains('profile-box__three-dots') && !event.target.classList.contains('dot')) {\n            toggleDropOptions(false)\n        }\n    }\n\n    const calcAmFollowing = (otherUID) => {\n        var follows = [...props.follows]\n        var follow = follows\n            .filter(follow => {\n                return follow.to === otherUID && follow.from === props.uid\n            })\n        return follow.length === 1 ? true : false\n    }\n    \n\n    var content = null;\n\n    if (props.wrappedBy === 'Hub') {\n        content = (<div className='profile-box' >\n            {showDeleteAcc ? <DeleteAccount toggleDeleteAcc={toggleDeleteAcc} /> : null}\n            <div>\n                <div className='profile-box__three-dots' onClick={() => toggleDropOptions(!showDropOptions)}>\n                    <div className='dot' />\n                    <div className='dot' />\n                    <div className='dot' />\n                </div>\n                {showDropOptions ?\n                    <div className='profile-box__drop-options'>\n                        <div className='drop-options__log-out' onClick={props.logout}>Log Out</div>\n                    </div> : null}\n\n                <i className=\"fas fa-cog profile-box__settings\" onClick={() => toggleDeleteAcc(true)}></i>\n            </div>\n            <div className='profile-box__block-one'>\n                <PhotoContainer imgURL={imgURL} setShowPhotoModal={props.setShowPhotoModal} />\n                <div className='block-one__username'>{props.username}</div>\n                <div className='block-one__address-gender'>{props.city}, {props.state} | {props.sex}</div>\n                <div className='block-one__handles-container'>\n                    <i className=\"fab fa-facebook-f icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                    <i className=\"fab fa-instagram icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                    <i className=\"fab fa-soundcloud icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                    <i className=\"fab fa-youtube icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                </div>\n                <p className='block-one__blurb'>\"West Philadelpha born and raised on the playground was where I spent most of my days...\"</p>\n            </div>\n            <div className='profile-box__block-two'>\n                <div>\n                    {props.myPlace + getOrdinal(props.myPlace) + \" place\"}\n                </div>\n                <div>\n                    {props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')}\n                </div>\n            </div>\n        </div>\n        )\n    }\n\n\n\n    else if (props.wrappedBy === 'Rappers') {\n\n        var username = props.rapper ?\n            <div className='block-one__username'>{props.rapper ? props.rapper.username : null}</div>\n            : <h2>Select a User</h2>\n        var addressGender = props.rapper ?\n            <div className='block-one__address-gender'>{props.rapper ? props.rapper.city : null}, {props.rapper ? props.rapper.state : null} | {props.rapper ? props.rapper.gender : null}</div>\n            : null\n        var photo = props.rapper ?\n            <PhotoContainer imgURL={imgURL} setShowPhotoModal={props.setShowPhotoModal} />\n            : null\n\n        var amFollowing = props.rapper && calcAmFollowing(props.rapper.uid) ? true : false\n        var button = <button className='follow-button'>follow</button>\n        if (amFollowing) {\n            button = <button className='follow-button'>following</button>\n        }\n\n        content = (\n            <div className='profile-box' >\n                {showDeleteAcc ? <DeleteAccount toggleDeleteAcc={toggleDeleteAcc} /> : null}\n                <div className='profile-box__block-one'>\n                    {photo}\n                    {username}\n                    {addressGender}\n                    <div className='block-one__handles-container'>\n                        {props.rapper && props.rapper.handles.facebook ?\n                            <a href={addhttp(props.rapper.handles.facebook)} rel=\"noopener noreferrer\" target=\"_blank\">\n                                <i className=\"fab fa-facebook-f icon\"></i>\n                            </a> : null}\n                        {props.rapper && props.rapper.handles.instagram ?\n                            <a href={addhttp(props.rapper.handles.instagram)} rel=\"noopener noreferrer\" target=\"_blank\">\n                                <i className=\"fab fa-instagram icon\"></i>\n                            </a> : null}\n                        {props.rapper && props.rapper.handles.soundcloud ?\n                            <a href={addhttp(props.rapper.handles.soundcloud)} rel=\"noopener noreferrer\" target=\"_blank\">\n                                <i className=\"fab fa-soundcloud icon\"></i>\n                            </a> : null}\n                        {props.rapper && props.rapper.handles.youtube ?\n                            <a href={addhttp(props.rapper.handles.youtube)} rel=\"noopener noreferrer\" target=\"_blank\">\n                                <i className=\"fab fa-youtube icon\"></i>\n                            </a> : null}\n                    </div>\n                    <p className='block-one__blurb'>{props.rapper ? \"\\\"West Philadelphia born and raised, on the playground was where I spent most of my days.\\\"\" : null}</p>\n                </div>\n                <div className='profile-box__block-two' style={{ fontSize: '.7em' }}>\n                    {props.focus === 'them' ? button : null}\n                    <div>{props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null} </div>\n                    <div>{props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null} </div>\n\n                </div>\n            </div>\n        )\n    }\n\n\n    return content\n}\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n        loggedin: state.loggedIn,\n        email: state.email,\n        username: state.username,\n        sex: state.gender,\n        address: state.address,\n        zipcode: state.address.zip_code,\n        city: state.address.city,\n        state: state.address.state,\n        needsInfo: state.needsInfo,\n        photoRef: state.photoRef,\n        handles: state.handles,\n        playing: state.playing\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        logout: () => dispatch({ type: actionTypes.LOG_OUT })\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox)\n"]},"metadata":{},"sourceType":"module"}