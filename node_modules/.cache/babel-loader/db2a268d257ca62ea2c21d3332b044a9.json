{"ast":null,"code":"import _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowItem/FollowItem.js\";\nimport React, { useEffect, useState } from 'react';\nimport firebase from 'firebase';\nimport './FollowItem.css';\nimport 'firebase/firestore';\nimport { connect } from 'react-redux';\n\nconst FollowItem = props => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        photoURL = _useState2[0],\n        setPhotoURL = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        amFollowing = _useState4[0],\n        setAmFollowing = _useState4[1]; // componentDidMount\n\n\n  useEffect(() => {\n    const fetchPhotoUrl = () => {\n      var storage = firebase.storage();\n      storage.ref(props.user.photoRef).getDownloadURL().then(url => {\n        setPhotoURL(url);\n      });\n    };\n\n    fetchPhotoUrl();\n    return () => {};\n  }, [props.user.photoRef]);\n  useEffect(() => {\n    // return true if user is following this user, otherwise false\n    const iAmFollowing = () => {\n      return props.follows.filter(follow => follow.to === props.user.uid && follow.from === props.myUID).length !== 0;\n    };\n\n    setAmFollowing(iAmFollowing);\n    return () => {};\n  }, [props.follows, props.myUID, props.user.uid]);\n\n  const follow = () => {\n    var db = firebase.firestore();\n    db.collection('follows').add({\n      from: props.myUID,\n      to: props.user.uid\n    }).then(() => console.log('follow set successfully')).catch(err => console.log(err.message));\n  };\n\n  const unfollow = () => {\n    var db = firebase.firestore();\n    console.log(props.uid, props.user);\n    db.collection('follows').where('from', '==', props.myUID).where('to', '==', props.user.uid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete();\n      });\n    }).catch(err => console.log(err));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"follow-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"follow-item__profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"profile__photo\",\n    alt: \"\",\n    src: photoURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"profile__details-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"details-container__name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, props.user.username), React.createElement(\"div\", {\n    className: \"details-container__details\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, props.user.address.city, \", \", props.user.address.state, \" | \", props.user.gender === 'Male' ? 'M' : 'F'))), React.createElement(\"button\", {\n    className: \"follow-item__follow-button\",\n    onClick: amFollowing ? unfollow : follow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, amFollowing ? 'following' : 'follow'));\n};\n\nconst mapStateToProps = state => {\n  return {\n    myUID: state.uid\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowItem);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowItem/FollowItem.js"],"names":["React","useEffect","useState","firebase","connect","FollowItem","props","photoURL","setPhotoURL","amFollowing","setAmFollowing","fetchPhotoUrl","storage","ref","user","photoRef","getDownloadURL","then","url","iAmFollowing","follows","filter","follow","to","uid","from","myUID","length","db","firestore","collection","add","console","log","catch","err","message","unfollow","where","get","snap","forEach","doc","delete","username","address","city","state","gender","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport firebase from 'firebase'\nimport './FollowItem.css'\nimport 'firebase/firestore'\nimport { connect } from 'react-redux'\n\nconst FollowItem = (props) => {\n\n    const [photoURL, setPhotoURL] = useState(null)\n    const [amFollowing, setAmFollowing] = useState(false);\n\n    // componentDidMount\n    useEffect(() => {\n        const fetchPhotoUrl = () => {\n            var storage = firebase.storage();\n            storage.ref(props.user.photoRef).getDownloadURL().then(url => {\n                setPhotoURL(url)\n            })\n        }\n        fetchPhotoUrl()\n        return () => {\n        };\n    }, [props.user.photoRef])\n\n    useEffect(() => {\n        // return true if user is following this user, otherwise false\n        const iAmFollowing = () => {\n            return props.follows.filter(follow => follow.to === props.user.uid && follow.from === props.myUID).length !== 0\n        }\n        setAmFollowing(iAmFollowing)\n        return () => {\n\n        };\n    }, [props.follows, props.myUID, props.user.uid])\n\n\n    const follow = () => {\n        var db = firebase.firestore()\n        db.collection('follows').add({\n            from: props.myUID,\n            to: props.user.uid\n        })\n            .then(() => console.log('follow set successfully'))\n            .catch(err => console.log(err.message))\n    }\n\n    const unfollow = () => {\n        var db = firebase.firestore()\n        console.log(props.uid, props.user)\n        db.collection('follows')\n            .where('from', '==', props.myUID)\n            .where('to', '==', props.user.uid)\n            .get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete()\n                })\n            })\n            .catch(err => console.log(err))\n    }\n\n\n    return (\n        <div className='follow-item'>\n            <div className={`follow-item__profile`}>\n                <img className={`profile__photo`} alt='' src={photoURL}></img>\n                <div className={`profile__details-container`}>\n                    <div className={`details-container__name`}>\n                        {props.user.username}\n                    </div>\n                    <div className={`details-container__details`}>\n                        {props.user.address.city}, {props.user.address.state} | {props.user.gender === 'Male' ? 'M' : 'F'}\n                    </div>\n                </div>\n            </div>\n            <button\n                className={`follow-item__follow-button`}\n                onClick={amFollowing ? unfollow : follow}>\n                {amFollowing ? 'following' : 'follow'}\n            </button>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        myUID: state.uid\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowItem)\n"]},"metadata":{},"sourceType":"module"}