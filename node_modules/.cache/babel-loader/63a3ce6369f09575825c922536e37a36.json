{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Documents/GitHub/barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Documents/GitHub/barz/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport Navbar from './containers/Navbar/Navbar';\nimport Scribble from './containers/Scribble/Scribble';\nimport Hub from './containers/Hub/Hub';\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom';\nimport ReactPlayer from 'react-player';\nimport { connect } from 'react-redux';\nimport Judge from './containers/Judge/Judge';\nimport { fetchUserData, authCheckState } from './store/actions/auth';\nimport Wordsmiths from './containers/Wordsmiths/Wordsmiths';\nimport './App.css';\nimport firebase from 'firebase';\nimport Landing from './containers/Landing/Landing';\nimport DevModal from './components/DevModal/DevModal';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showPopup: false\n    };\n\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (!prevProps.authenticated && this.props.authenticated) {// this.togglePopup(true)\n      }\n\n      if (prevProps.username != this.props.username) {\n        if (this.props.username === 'recruit_david') {\n          if (this.props.username === 'recruit_david') {\n            setTimeout(() => {\n              alert(\"You've been auto-signed in with the recruit_david profile!\");\n            }, 1000);\n          }\n        }\n      }\n    };\n\n    this.signIn = async () => {\n      const uid = await this.authenticate('recruitDavid@gmail.com', 'recruitDavid');\n      var db = firebase.firestore();\n      db.collection('users').doc(uid).get().then(() => {\n        this.props.fetchUserData(uid);\n      });\n    };\n\n    this.authenticate = async (email, password) => {\n      return await firebase.auth().signInWithEmailAndPassword(email, password).then(successObj => {\n        var uid = successObj.user.uid;\n        var refreshToken = successObj.user.refreshToken;\n        let expirationDate = new Date();\n        expirationDate.setHours(expirationDate.getHours() + 100);\n        localStorage.setItem('token', refreshToken);\n        localStorage.setItem('expirationDate', expirationDate);\n        localStorage.setItem('uid', uid);\n        return successObj.user.uid;\n      }).catch(function (error) {\n        console.log(error);\n        throw error;\n      });\n    };\n\n    this.togglePopup = bool => {\n      this.setState(_objectSpread({}, this.state, {\n        showPopup: bool\n      }));\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.location.pathname.slice(1) === 'recruit-david') {// this.signIn()\n    } else {\n      this.props.onTryAutoSignin();\n    }\n  }\n\n  render() {\n    if (this.props.location.pathname.slice(1) === 'recruit-david') {\n      this.signIn();\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      });\n    }\n\n    if (this.props.autoSignInOver && !this.props.authenticated) {\n      return React.createElement(Landing, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.state.showPopup ? React.createElement(DevModal, {\n      togglePopup: this.togglePopup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }) : null, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(ReactPlayer, {\n      volume: this.props.volume * 1.0 / 100,\n      url: this.props.musicURL,\n      a: true,\n      playing: this.props.playing,\n      loop: true,\n      width: \"0px\",\n      height: \"0px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/scribble\",\n      component: Scribble,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/judge\",\n      component: Judge,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/wordsmiths\",\n      component: Wordsmiths,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/hub\",\n      component: Hub,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/:username\",\n      component: Hub,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      component: Hub,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    playing: state.music.playing,\n    musicURL: state.music.musicURL,\n    volume: state.music.volume,\n    authenticated: state.user.loggedIn,\n    email: state.user.email,\n    autoSignInOver: state.user.autoSignInOver,\n    photoURL: state.user.photoURL,\n    username: state.user.username\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignin: () => dispatch(authCheckState()),\n    fetchUserData: uid => dispatch(fetchUserData(uid))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));","map":{"version":3,"sources":["/Users/davidkang/Documents/GitHub/barz/src/App.js"],"names":["React","Component","Navbar","Scribble","Hub","Route","Switch","withRouter","Redirect","ReactPlayer","connect","Judge","fetchUserData","authCheckState","Wordsmiths","firebase","Landing","DevModal","App","state","showPopup","componentDidUpdate","prevProps","prevState","authenticated","props","username","setTimeout","alert","signIn","uid","authenticate","db","firestore","collection","doc","get","then","email","password","auth","signInWithEmailAndPassword","successObj","user","refreshToken","expirationDate","Date","setHours","getHours","localStorage","setItem","catch","error","console","log","togglePopup","bool","setState","componentDidMount","location","pathname","slice","onTryAutoSignin","render","autoSignInOver","volume","musicURL","playing","mapStateToProps","music","loggedIn","photoURL","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Navbar from './containers/Navbar/Navbar'\nimport Scribble from './containers/Scribble/Scribble'\nimport Hub from './containers/Hub/Hub'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom';\nimport ReactPlayer from 'react-player'\nimport { connect } from 'react-redux'\nimport Judge from './containers/Judge/Judge'\nimport { fetchUserData, authCheckState } from './store/actions/auth'\nimport Wordsmiths from './containers/Wordsmiths/Wordsmiths'\nimport './App.css'\nimport firebase from 'firebase'\nimport Landing from './containers/Landing/Landing';\nimport DevModal from './components/DevModal/DevModal';\n\n\nclass App extends Component {\n\n\n  state = {\n    showPopup: false\n  }\n\n\n  componentDidMount() {\n    if (this.props.location.pathname.slice(1) === 'recruit-david') {\n      // this.signIn()\n    } else {\n      this.props.onTryAutoSignin()\n    }\n  }\n  componentDidUpdate = (prevProps, prevState) => {\n    if (!prevProps.authenticated && this.props.authenticated) {\n      // this.togglePopup(true)\n    }\n    if (prevProps.username != this.props.username) {\n      if (this.props.username === 'recruit_david') {\n        if (this.props.username === 'recruit_david') {\n          setTimeout(() => {\n            alert(\"You've been auto-signed in with the recruit_david profile!\")\n          }, 1000)\n\n        }\n      }\n    }\n  }\n  signIn = async () => {\n    const uid = await this.authenticate('recruitDavid@gmail.com', 'recruitDavid')\n    var db = firebase.firestore()\n    db.collection('users').doc(uid).get().then(() => {\n      this.props.fetchUserData(uid)\n    })\n  }\n  authenticate = async (email, password) => {\n\n    return await firebase.auth().signInWithEmailAndPassword(email, password)\n      .then(successObj => {\n\n        var uid = successObj.user.uid\n        var refreshToken = successObj.user.refreshToken\n        let expirationDate = new Date()\n        expirationDate.setHours(expirationDate.getHours() + 100)\n\n        localStorage.setItem('token', refreshToken)\n        localStorage.setItem('expirationDate', expirationDate)\n        localStorage.setItem('uid', uid)\n        return successObj.user.uid\n\n      })\n      .catch(function (error) {\n        console.log(error)\n        throw error\n      });\n  }\n\n\n\n  togglePopup = (bool) => {\n    this.setState({\n      ...this.state,\n      showPopup: bool\n    })\n  }\n\n  render() {\n\n    if (this.props.location.pathname.slice(1) === 'recruit-david') {\n      this.signIn()\n      return <Redirect to=\"/\" />\n    }\n\n    if (this.props.autoSignInOver && !this.props.authenticated) {\n      return <Landing />\n    }\n\n    return (\n      <div className=\"App\">\n        {this.state.showPopup ? <DevModal togglePopup={this.togglePopup} /> : null}\n        <Navbar />\n        <ReactPlayer\n          volume={this.props.volume * 1.0 / 100}\n          url={this.props.musicURL} a\n          playing={this.props.playing}\n          loop\n          width=\"0px\"\n          height=\"0px\" />\n        <Switch>\n          <Route path=\"/scribble\" component={Scribble} ></Route>\n          <Route path=\"/judge\" component={Judge} ></Route>\n          <Route path=\"/wordsmiths\" component={Wordsmiths} ></Route>\n          <Route path=\"/hub\" component={Hub} ></Route>\n          <Route path=\"/:username\" component={Hub}></Route>\n          <Route path=\"/\" component={Hub}></Route>\n        </Switch>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    playing: state.music.playing,\n    musicURL: state.music.musicURL,\n    volume: state.music.volume,\n    authenticated: state.user.loggedIn,\n    email: state.user.email,\n    autoSignInOver: state.user.autoSignInOver,\n    photoURL: state.user.photoURL,\n    username: state.user.username\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignin: () => dispatch(authCheckState()),\n    fetchUserData: (uid) => dispatch(fetchUserData(uid)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));\n"]},"metadata":{},"sourceType":"module"}