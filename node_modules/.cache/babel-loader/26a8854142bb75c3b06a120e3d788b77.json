{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport './ManyPost.css';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\n\nclass ManyPost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      photoURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n      score: 0,\n      commentsCount: 0\n    };\n\n    this.fetchScore = () => {\n      var db = firebase.firestore();\n      db.collection('postVotes').where('pid', '==', this.props.pid).onSnapshot(snap => {\n        var score = 0;\n        snap.docs.forEach(doc => {\n          if (doc.data().value === 1) score += doc.data().value;\n        });\n        score = Math.max(score, 0);\n        this.setState(_objectSpread({}, this.state, {\n          score: score\n        }));\n      });\n    };\n\n    this.fetchCommentsCount = () => {\n      var db = firebase.firestore();\n      db.collection('postComments').where('pid', '==', this.props.pid).onSnapshot(snap => {\n        const count = snap.size;\n        this.setState(_objectSpread({}, this.state, {\n          commentsCount: count\n        }));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchScore();\n    this.fetchCommentsCount();\n  }\n\n  render() {\n    // date\n    var verboseDate = this.props.createdOn.toDate().toDateString();\n    const date = verboseDate.slice(4, verboseDate.length); // content\n\n    var content = this.props.content.lineOne + ' / ' + this.props.content.lineTwo + ' / ' + this.props.content.lineThree + ' / ' + this.props.content.lineFour; // votes \n\n    var score = this.state.score; // comments count\n\n    const commentsCount = this.state.commentsCount; // dict {coast: color}\n\n    const colorDict = {\n      'West': 'yellow',\n      'East': 'greeen',\n      'South': 'blue',\n      'Midwest': 'purple'\n    };\n    const coastColor = colorDict[this.props.address.region];\n    return React.createElement(\"div\", {\n      className: \"many-post scrollTo\".concat(this.props.pid),\n      id: \"scrollTo\".concat(this.props.pid),\n      onClick: () => this.props.selectPost(this.props.pid),\n      style: this.props.customStyle ? this.props.customStyle.body : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"many-post-details\",\n      id: this.props.pid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"many-post-pic\",\n      src: this.props.photoURL,\n      alt: \"pic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"many-post-name-date-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      style: this.props.customStyle ? this.props.customStyle.username : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, this.props.username), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, date))), React.createElement(\"div\", {\n      className: \"many-post-region\",\n      id: coastColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, this.props.address.region.toLowerCase()), React.createElement(\"div\", {\n      className: \"many-post-misc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fas fa-comment\",\n      id: \"manyComment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), commentsCount, React.createElement(\"i\", {\n      className: \"fas fa-fire\",\n      id: \"manyFlame\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), score)), React.createElement(\"div\", {\n      className: \"many-post-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: this.props.customStyle ? this.props.customStyle.paragraph : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"\\\"\".concat(content, \"\\\"\"))), React.createElement(\"div\", {\n      className: \"vote-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"vote-button dislike-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"vote-button like-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-fire\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default ManyPost;","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js"],"names":["React","Component","firebase","ManyPost","state","photoURL","score","commentsCount","fetchScore","db","firestore","collection","where","props","pid","onSnapshot","snap","docs","forEach","doc","data","value","Math","max","setState","fetchCommentsCount","count","size","componentDidMount","render","verboseDate","createdOn","toDate","toDateString","date","slice","length","content","lineOne","lineTwo","lineThree","lineFour","colorDict","coastColor","address","region","selectPost","customStyle","body","username","toLowerCase","paragraph"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './ManyPost.css'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\n\n\n\nclass ManyPost extends Component {\n    state = {\n        photoURL: 'https://firebasestorage.googleapis.com/v0/b/barz-86ae0.appspot.com/o/mysteryman%2Fmysteryman.png?alt=media&token=7b1e5a7c-ede3-46ff-a036-70636e528cd2',\n        score: 0,\n        commentsCount: 0,\n\n    }\n    componentDidMount() {\n        this.fetchScore()\n        this.fetchCommentsCount()\n    }\n\n\n    fetchScore = () => {\n        var db = firebase.firestore()\n        db.collection('postVotes').where('pid', '==', this.props.pid).onSnapshot(snap => {\n            var score = 0\n            snap.docs.forEach(doc => {\n                if (doc.data().value === 1)\n                score += doc.data().value\n            })\n            score = Math.max(score, 0)\n            this.setState({\n                ...this.state,\n                score: score\n            })\n        })\n\n    }\n\n    fetchCommentsCount = () => {\n        var db = firebase.firestore()\n        db.collection('postComments').where('pid', '==', this.props.pid).onSnapshot(snap => {\n            const count = snap.size\n            this.setState({\n                ...this.state,\n                commentsCount: count\n            })\n        })\n    }\n\n\n\n\n    render() {\n\n        // date\n        var verboseDate = this.props.createdOn.toDate().toDateString()\n        const date = verboseDate.slice(4, verboseDate.length)\n\n        // content\n        var content = this.props.content.lineOne + ' / ' + this.props.content.lineTwo + ' / ' + this.props.content.lineThree + ' / ' + this.props.content.lineFour\n\n        // votes \n        var score = this.state.score\n\n        // comments count\n        const commentsCount = this.state.commentsCount\n\n        // dict {coast: color}\n        const colorDict = {\n            'West': 'yellow',\n            'East': 'greeen',\n            'South': 'blue',\n            'Midwest': 'purple',\n        }\n\n        const coastColor = colorDict[this.props.address.region]\n\n\n        return (\n\n            <div\n                className={`many-post scrollTo${this.props.pid}`}\n                id={`scrollTo${this.props.pid}`}\n                onClick={() => this.props.selectPost(this.props.pid)}\n                style={this.props.customStyle ? this.props.customStyle.body : null}\n            >\n                <header>\n                    <div className='many-post-details' id={this.props.pid}>\n                        <img className='many-post-pic' src={this.props.photoURL} alt='pic'></img>\n                        <div className='many-post-name-date-container'>\n                            <h6 style={this.props.customStyle ? this.props.customStyle.username : null}>{this.props.username}</h6>\n                            <p>{date}</p>\n                        </div>\n                    </div>\n                    <div className='many-post-region' id={coastColor}>\n                        {this.props.address.region.toLowerCase()}\n                    </div>\n                    <div className='many-post-misc'>\n                        <i class=\"fas fa-comment\" id='manyComment'></i>\n                        {commentsCount}\n                        <i className=\"fas fa-fire\" id='manyFlame' aria-hidden=\"true\"></i>\n                        {score}\n                    </div>\n                </header>\n                <div className='many-post-body'>\n                    <p style={this.props.customStyle ? this.props.customStyle.paragraph : null}>{`\"${content}\"`}</p>\n                </div>\n\n                <div className='vote-box'>\n                    <button className='vote-button dislike-button'>\n                        <i className=\"fa fa-trash\" aria-hidden=\"true\"></i>\n                    </button>\n                    <button className='vote-button like-button'>\n                        <i className=\"fas fa-fire\"></i>\n                    </button>\n\n                </div>\n            </div>\n\n        )\n    }\n}\n\nexport default ManyPost\n"]},"metadata":{},"sourceType":"module"}