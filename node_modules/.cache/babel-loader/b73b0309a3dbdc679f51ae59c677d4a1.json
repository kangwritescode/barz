{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/ProfileBox.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport './ProfileBox.css';\nimport PhotoContainer from '../Profile/PhotoContainer/PhotoContainer';\nimport * as actionTypes from '../../../store/actions';\nimport DeleteAccount from '../Profile/DeleteAccount/DeleteAccount';\nimport firebase from 'firebase';\nimport { getOrdinal } from '../../../shared/getOrdinal';\nimport ig from '../../../assets/handles/ig.png';\nimport fb from '../../../assets/handles/fb.png';\nimport sc from '../../../assets/handles/sc.png';\nimport yt from '../../../assets/handles/yt.png';\nimport { connect } from 'react-redux';\n\nfunction ProfileBox(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showDropOptions = _useState2[0],\n        toggleDropOptions = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showDeleteAcc = _useState4[0],\n        toggleDeleteAcc = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        imgURL = _useState6[0],\n        setImgURL = _useState6[1];\n\n  const _useState7 = useState(null),\n        _useState8 = _slicedToArray(_useState7, 2),\n        userData = _useState8[0],\n        setUserData = _useState8[1];\n\n  useEffect(() => {\n    document.addEventListener('click', closeDropOptions);\n    return () => {\n      document.removeEventListener('click', closeDropOptions);\n    };\n  }, []);\n  useEffect(() => {\n    if (props.uid) {\n      fetchUserData(props.uid);\n    }\n\n    if (props.photoRef) {\n      fetchPhotoURL(props.photoRef);\n    }\n\n    return () => {};\n  }, [props.uid, props.photoRef]);\n\n  const fetchUserData = async uid => {\n    var db = firebase.firestore();\n    db.collection('users').doc(uid).get().then(user => {\n      user = _objectSpread({}, user.data(), {\n        uid: user.id\n      });\n      setUserData(user);\n    });\n  };\n\n  const fetchPhotoURL = async photoRef => {\n    var storage = firebase.storage();\n    storage.ref(photoRef).getDownloadURL().then(url => {\n      setImgURL(url);\n    }).catch(function (error) {\n      console.log(\"error in Profile.js: \", error);\n    });\n    return () => {// cleanup\n    };\n  };\n\n  const addhttp = url => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n      url = \"http://\" + url;\n    }\n\n    return url;\n  };\n\n  const closeDropOptions = event => {\n    if (!event.target.classList.contains('profile-box__three-dots') && !event.target.classList.contains('dot')) {\n      toggleDropOptions(false);\n    }\n  };\n\n  var myAccountOptions = null;\n  var theHandles = null;\n  var blockTwo = null;\n\n  if (props.wrappedBy === 'Hub') {\n    myAccountOptions = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"profile-box__three-dots\",\n      onClick: () => toggleDropOptions(!showDropOptions),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })), showDropOptions ? React.createElement(\"div\", {\n      className: \"profile-box__drop-options\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"drop-options__log-out\",\n      onClick: props.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Log Out\")) : null, React.createElement(\"i\", {\n      className: \"fas fa-cog profile-box__settings\",\n      onClick: () => toggleDeleteAcc(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }));\n    theHandles = React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      onClick: () => props.toggleUploadHandles(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n    blockTwo = React.createElement(\"div\", {\n      className: \"profile-box__block-two\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, props.myPlace + getOrdinal(props.myPlace) + \" place\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')));\n  } else if (props.wrappedBy === 'Rappers') {\n    theHandles = React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, userData && userData.handles.facebook ? React.createElement(\"a\", {\n      href: addhttp(userData.handles.facebook),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })) : null, userData && userData.handles.instagram ? React.createElement(\"a\", {\n      href: addhttp(userData.handles.instagram),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })) : null, userData && userData.handles.soundcloud ? React.createElement(\"a\", {\n      href: addhttp(userData.handles.soundcloud),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })) : null, userData && userData.handles.youtube ? React.createElement(\"a\", {\n      href: addhttp(userData.handles.youtube),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })) : null);\n    var button = null;\n    console.log(props);\n\n    if (props.focus === 'them') {\n      button = React.createElement(\"button\", {\n        className: \"follow-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"follow\");\n    }\n\n    blockTwo = React.createElement(\"div\", {\n      className: \"profile-box__block-two\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, button);\n  }\n\n  return React.createElement(\"div\", {\n    className: \"profile-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, showDeleteAcc ? React.createElement(DeleteAccount, {\n    toggleDeleteAcc: toggleDeleteAcc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }) : null, myAccountOptions, React.createElement(\"div\", {\n    className: \"profile-box__block-one\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(PhotoContainer, {\n    imgURL: imgURL,\n    setShowPhotoModal: props.setShowPhotoModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"block-one__username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, userData ? userData.username : null), React.createElement(\"div\", {\n    className: \"block-one__address-gender\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, userData ? userData.address.city : null, \", \", userData ? userData.address.state : null, \" | \", userData ? userData.gender : null), theHandles, React.createElement(\"p\", {\n    className: \"block-one__blurb\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"\\\"West Philadelpha born and raised on the playground was where I spent most of my days...\\\"\")), blockTwo);\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid,\n    loggedin: state.loggedIn,\n    email: state.email,\n    username: state.username,\n    sex: state.gender,\n    address: state.address,\n    zipcode: state.address.zip_code,\n    city: state.address.city,\n    state: state.address.state,\n    needsInfo: state.needsInfo,\n    photoRef: state.photoRef,\n    handles: state.handles,\n    playing: state.playings\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logout: () => dispatch({\n      type: actionTypes.LOG_OUT\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/ProfileBox.js"],"names":["React","useEffect","useState","PhotoContainer","actionTypes","DeleteAccount","firebase","getOrdinal","ig","fb","sc","yt","connect","ProfileBox","props","showDropOptions","toggleDropOptions","showDeleteAcc","toggleDeleteAcc","imgURL","setImgURL","userData","setUserData","document","addEventListener","closeDropOptions","removeEventListener","uid","fetchUserData","photoRef","fetchPhotoURL","db","firestore","collection","doc","get","then","user","data","id","storage","ref","getDownloadURL","url","catch","error","console","log","addhttp","test","event","target","classList","contains","myAccountOptions","theHandles","blockTwo","wrappedBy","logout","toggleUploadHandles","myPlace","myPoints","handles","facebook","instagram","soundcloud","youtube","button","focus","setShowPhotoModal","username","address","city","state","gender","mapStateToProps","loggedin","loggedIn","email","sex","zipcode","zip_code","needsInfo","playing","playings","mapDispatchToProps","dispatch","type","LOG_OUT"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './ProfileBox.css'\nimport PhotoContainer from '../Profile/PhotoContainer/PhotoContainer'\nimport * as actionTypes from '../../../store/actions'\nimport DeleteAccount from '../Profile/DeleteAccount/DeleteAccount'\nimport firebase from 'firebase'\nimport { getOrdinal } from '../../../shared/getOrdinal'\nimport ig from '../../../assets/handles/ig.png'\nimport fb from '../../../assets/handles/fb.png'\nimport sc from '../../../assets/handles/sc.png'\nimport yt from '../../../assets/handles/yt.png'\nimport { connect } from 'react-redux'\n\nfunction ProfileBox(props) {\n\n    const [showDropOptions, toggleDropOptions] = useState(false)\n    const [showDeleteAcc, toggleDeleteAcc] = useState(false)\n    const [imgURL, setImgURL] = useState(null)\n    const [userData, setUserData] = useState(null)\n\n    useEffect(() => {\n        document.addEventListener('click', closeDropOptions)\n        return () => {\n            document.removeEventListener('click', closeDropOptions)\n        };\n    }, [])\n\n    useEffect(() => {\n        if (props.uid) {\n            fetchUserData(props.uid)\n        }\n        if (props.photoRef) {\n            fetchPhotoURL(props.photoRef)\n        }\n        return () => {\n        };\n    }, [props.uid, props.photoRef])\n\n    const fetchUserData = async (uid) => {\n        var db = firebase.firestore()\n        db.collection('users').doc(uid).get()\n            .then(user => {\n                user = {\n                    ...user.data(),\n                    uid: user.id\n                }\n                setUserData(user)\n            })\n    }\n    const fetchPhotoURL = async (photoRef) => {\n        var storage = firebase.storage();\n        storage.ref(photoRef).getDownloadURL().then(url => {\n            setImgURL(url)\n        }).catch(function (error) { console.log(\"error in Profile.js: \", error) });\n        return () => {\n            // cleanup\n        };\n    }\n\n    const addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n    const closeDropOptions = (event) => {\n        if (!event.target.classList.contains('profile-box__three-dots') && !event.target.classList.contains('dot')) {\n            toggleDropOptions(false)\n        }\n    }\n\n    var myAccountOptions = null;\n    var theHandles = null;\n    var blockTwo = null;\n\n    if (props.wrappedBy === 'Hub') {\n        myAccountOptions = (\n            <div>\n                <div className='profile-box__three-dots' onClick={() => toggleDropOptions(!showDropOptions)}>\n                    <div className='dot' />\n                    <div className='dot' />\n                    <div className='dot' />\n                </div>\n                {showDropOptions ?\n                    <div className='profile-box__drop-options'>\n                        <div className='drop-options__log-out' onClick={props.logout}>Log Out</div>\n                    </div> : null}\n\n                <i className=\"fas fa-cog profile-box__settings\" onClick={() => toggleDeleteAcc(true)}></i>\n            </div>\n        )\n        theHandles = (\n            <div className='block-one__handles-container'>\n                <i className=\"fab fa-facebook-f icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                <i className=\"fab fa-instagram icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                <i className=\"fab fa-soundcloud icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n                <i className=\"fab fa-youtube icon\" onClick={() => props.toggleUploadHandles(true)}></i>\n            </div>\n        )\n        blockTwo = (\n            <div className='profile-box__block-two'>\n                <div>\n                    {props.myPlace + getOrdinal(props.myPlace) + \" place\"}\n                </div>\n                <div>\n                    {props.myPoints + \" point\" + (props.myPoints === 1 ? '' : 's')}\n                </div>\n            </div>\n        )\n\n    }\n\n    else if (props.wrappedBy === 'Rappers') {\n        theHandles = (\n            <div className='block-one__handles-container'>\n                {userData && userData.handles.facebook ?\n                    <a href={addhttp(userData.handles.facebook)} rel=\"noopener noreferrer\" target=\"_blank\">\n                        <i className=\"fab fa-facebook-f icon\"></i>\n                    </a> : null}\n                {userData && userData.handles.instagram ?\n                    <a href={addhttp(userData.handles.instagram)} rel=\"noopener noreferrer\" target=\"_blank\">\n                        <i className=\"fab fa-instagram icon\"></i>\n                    </a> : null}\n                {userData && userData.handles.soundcloud ?\n                    <a href={addhttp(userData.handles.soundcloud)} rel=\"noopener noreferrer\" target=\"_blank\">\n                        <i className=\"fab fa-soundcloud icon\"></i>\n                    </a> : null}\n                {userData && userData.handles.youtube ?\n                    <a href={addhttp(userData.handles.youtube)} rel=\"noopener noreferrer\" target=\"_blank\">\n                        <i className=\"fab fa-youtube icon\"></i>\n                    </a> : null}\n            </div>\n        )\n        var button = null;\n        console.log(props)\n        if (props.focus === 'them') {\n            button = <button className='follow-button'>follow</button>\n        }\n        blockTwo = (\n            <div className='profile-box__block-two'>\n                {button}\n\n            </div>\n        )\n        \n    }\n\n\n    return (\n        <div className='profile-box' >\n            {showDeleteAcc ? <DeleteAccount toggleDeleteAcc={toggleDeleteAcc} /> : null}\n            {myAccountOptions}\n            <div className='profile-box__block-one'>\n                <PhotoContainer imgURL={imgURL} setShowPhotoModal={props.setShowPhotoModal} />\n                <div className='block-one__username'>{userData ? userData.username : null}</div>\n                <div className='block-one__address-gender'>{userData ? userData.address.city : null}, {userData ? userData.address.state : null} | {userData ? userData.gender : null}</div>\n                {theHandles}\n                <p className='block-one__blurb'>\"West Philadelpha born and raised on the playground was where I spent most of my days...\"</p>\n            </div>\n            {blockTwo}\n        </div>\n    )\n}\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n        loggedin: state.loggedIn,\n        email: state.email,\n        username: state.username,\n        sex: state.gender,\n        address: state.address,\n        zipcode: state.address.zip_code,\n        city: state.address.city,\n        state: state.address.state,\n        needsInfo: state.needsInfo,\n        photoRef: state.photoRef,\n        handles: state.handles,\n        playing: state.playings\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        logout: () => dispatch({ type: actionTypes.LOG_OUT })\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileBox)\n"]},"metadata":{},"sourceType":"module"}