{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Wordsmiths/Rappers/Spotlight/Spotlight.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport firebase from 'firebase';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { getOrdinal } from '../../../../shared/utility';\nimport { postUserData } from '../../../../store/actions/auth';\nimport * as actions from '../../../../store/actions/index';\nimport './Spotlight.css';\n\nfunction Spotlight(props) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        follows = _useState2[0],\n        setFollows = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        amFollowing = _useState4[0],\n        setAmFollowing = _useState4[1]; // componentDidMount\n\n\n  useEffect(() => {\n    fetchFollows();\n    return () => {};\n  }, []); // componentDidUpdate\n\n  useEffect(() => {\n    const calcAmFollowing = otherUID => {\n      let follow = follows.filter(follow => {\n        return follow.to === otherUID && follow.from === props.uid;\n      });\n      setAmFollowing(follow.length === 0 ? false : true);\n    };\n\n    if (props.rapper) {\n      console.log(props.rapper);\n      calcAmFollowing(props.rapper.uid);\n    }\n  }, [props.photoURL, props.rapper, follows, props.uid, props.blurb]);\n\n  const fetchFollows = async () => {\n    let db = firebase.firestore();\n    let follows = await db.collection(\"follows\").get().then(querySnapshot => {\n      let fetchedFollows = [];\n      querySnapshot.forEach(doc => {\n        fetchedFollows.push(_objectSpread({}, doc.data(), {\n          fid: doc.id\n        }));\n      });\n      return fetchedFollows;\n    });\n    setFollows(follows);\n  };\n\n  const follow = () => {\n    setAmFollowing(true);\n    let db = firebase.firestore();\n    db.collection('follows').add({\n      from: props.uid,\n      to: props.rapper.uid\n    }).then(() => fetchFollows()).catch(err => console.log(err.message));\n  };\n\n  const unfollow = () => {\n    setAmFollowing(false);\n    let db = firebase.firestore();\n    db.collection('follows').where('from', '==', props.uid).where('to', '==', props.rapper.uid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete();\n      });\n      fetchFollows();\n    }).catch(err => console.log(err));\n  };\n\n  const addhttp = url => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n      url = \"http://\" + url;\n    }\n\n    return url;\n  };\n\n  let username = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, props.rapper ? props.rapper.username : null) : React.createElement(\"h2\", {\n    className: \"block-one__select-a-user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Select a User\");\n  let addressGender = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__address-gender\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, props.rapper ? props.rapper.city : null, \", \", props.rapper ? props.rapper.state : null, \" | \", props.rapper ? props.rapper.gender : null) : null;\n  let photo = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__img-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"\",\n    src: props.rapper.photoURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), props.rapper.rank === 1 ? React.createElement(\"i\", {\n    class: \"fas fa-crown crown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }) : null, props.rapper.rank === 2 ? React.createElement(\"i\", {\n    class: \"fas fa-crown crown\",\n    style: {\n      color: 'silver'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }) : null)) : null;\n  let button = React.createElement(\"button\", {\n    className: \"follow-button\",\n    onClick: follow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"follow\");\n\n  if (amFollowing) {\n    button = React.createElement(\"button\", {\n      className: \"follow-button\",\n      onClick: unfollow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"following\");\n  }\n\n  let handles = null;\n\n  if (props.rapper && (props.rapper.handles.facebook || props.rapper.handles.soundcloud || props.rapper.handles.instagram || props.rapper.handles.youtube)) {\n    handles = React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, props.rapper && props.rapper.handles.facebook ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.facebook),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.instagram ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.instagram),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.soundcloud ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.soundcloud),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.youtube ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.youtube),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    })) : null);\n  }\n\n  let blurb = null;\n\n  if (props.rapper && props.rapper.blurb) {\n    blurb = React.createElement(\"p\", {\n      className: \"block-one__blurb\",\n      style: {\n        cursor: 'text'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, props.rapper ? props.rapper.blurb : null);\n  }\n\n  console.log(props.rapper);\n  return React.createElement(\"div\", {\n    className: \"spotlight\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"spotlight__block-one\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, photo, username, addressGender, handles, blurb), React.createElement(\"div\", {\n    className: \"spotlight__block-two\",\n    style: {\n      fontSize: '.7em'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, props.focus === 'them' ? button : null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null, \" \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null, \" \")));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.user.uid,\n    email: state.user.email,\n    username: state.user.username,\n    sex: state.user.gender,\n    address: state.user.address,\n    zipcode: state.user.address.zip_code,\n    city: state.user.address.city,\n    state: state.user.address.state,\n    needsInfo: state.user.needsInfo,\n    photoURL: state.user.photoURL,\n    blurb: state.user.blurb\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n    logout: () => dispatch(actions.logOut())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spotlight);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Wordsmiths/Rappers/Spotlight/Spotlight.js"],"names":["firebase","React","useEffect","useState","connect","getOrdinal","postUserData","actions","Spotlight","props","follows","setFollows","amFollowing","setAmFollowing","fetchFollows","calcAmFollowing","otherUID","follow","filter","to","from","uid","length","rapper","console","log","photoURL","blurb","db","firestore","collection","get","then","querySnapshot","fetchedFollows","forEach","doc","push","data","fid","id","add","catch","err","message","unfollow","where","snap","ref","delete","addhttp","url","test","username","addressGender","city","state","gender","photo","rank","color","button","handles","facebook","soundcloud","instagram","youtube","cursor","fontSize","focus","votes","mapStateToProps","user","email","sex","address","zipcode","zip_code","needsInfo","mapDispatchToProps","dispatch","logout","logOut"],"mappings":"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","sourcesContent":["import firebase from 'firebase'\nimport React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { getOrdinal } from '../../../../shared/utility'\nimport { postUserData } from '../../../../store/actions/auth'\nimport * as actions from '../../../../store/actions/index'\nimport './Spotlight.css'\n\n\n\nfunction Spotlight(props) {\n\n    const [follows, setFollows] = useState([])\n    const [amFollowing, setAmFollowing] = useState(false)\n\n\n\n    // componentDidMount\n    useEffect(() => {\n        fetchFollows()\n        return () => {\n        };\n    }, [])\n\n    // componentDidUpdate\n    useEffect(() => {\n\n        const calcAmFollowing = (otherUID) => {\n\n            let follow = follows\n                .filter(follow => {\n                    return follow.to === otherUID && follow.from === props.uid\n                })\n            setAmFollowing(follow.length === 0 ? false : true)\n        }\n\n        if (props.rapper) {\n            console.log(props.rapper)\n            calcAmFollowing(props.rapper.uid)\n        }\n\n    }, [props.photoURL, props.rapper, follows, props.uid, props.blurb])\n\n    const fetchFollows = async () => {\n        let db = firebase.firestore()\n        let follows = await db.collection(\"follows\").get().then(((querySnapshot) => {\n            let fetchedFollows = []\n            querySnapshot.forEach(doc => {\n                fetchedFollows.push({\n                    ...doc.data(),\n                    fid: doc.id\n                })\n            })\n            return fetchedFollows\n        }))\n        setFollows(follows)\n\n    }\n\n\n    const follow = () => {\n        setAmFollowing(true)\n        let db = firebase.firestore()\n        db.collection('follows').add({\n            from: props.uid,\n            to: props.rapper.uid\n        })\n            .then(() => fetchFollows())\n            .catch(err => console.log(err.message))\n    }\n\n    const unfollow = () => {\n        setAmFollowing(false)\n        let db = firebase.firestore()\n        db.collection('follows')\n            .where('from', '==', props.uid)\n            .where('to', '==', props.rapper.uid)\n            .get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete()\n                })\n                fetchFollows()\n            })\n            .catch(err => console.log(err))\n    }\n\n    const addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n    let username = props.rapper ?\n        <div className='block-one__username'>{props.rapper ? props.rapper.username : null}</div>\n        : <h2 className='block-one__select-a-user'>Select a User</h2>\n    let addressGender = props.rapper ?\n        <div className='block-one__address-gender'>{props.rapper ? props.rapper.city : null}, {props.rapper ? props.rapper.state : null} | {props.rapper ? props.rapper.gender : null}</div>\n        : null\n\n\n    let photo = props.rapper ?\n        <div className='block-one__img-wrapper'>\n            <div>\n                <img alt='' src={props.rapper.photoURL} />\n                {props.rapper.rank === 1 ? \n                    <i class=\"fas fa-crown crown\"></i> \n                    : null}\n                {props.rapper.rank === 2 ? \n                    <i class=\"fas fa-crown crown\" style={{color: 'silver'}}></i> \n                    : null}\n                    \n            </div>\n\n        </div>\n        : null\n    let button = <button className='follow-button' onClick={follow}>follow</button>\n    if (amFollowing) {\n        button = <button className='follow-button' onClick={unfollow}>following</button>\n    }\n    let handles = null;\n\n\n    if (props.rapper && (props.rapper.handles.facebook\n        || props.rapper.handles.soundcloud\n        || props.rapper.handles.instagram\n        || props.rapper.handles.youtube)) {\n        handles = (<div className='block-one__handles-container'>\n            {props.rapper && props.rapper.handles.facebook ?\n                <a href={addhttp(props.rapper.handles.facebook)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-facebook-f icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.instagram ?\n                <a href={addhttp(props.rapper.handles.instagram)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-instagram icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.soundcloud ?\n                <a href={addhttp(props.rapper.handles.soundcloud)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-soundcloud icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.youtube ?\n                <a href={addhttp(props.rapper.handles.youtube)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-youtube icon\"></i>\n                </a> : null}\n        </div>)\n    }\n    let blurb = null;\n    if (props.rapper && props.rapper.blurb) {\n        blurb = (\n            <p className='block-one__blurb' style={{ cursor: 'text' }}>\n                    {props.rapper ? props.rapper.blurb : null}\n                </p>\n        )\n    }\n    console.log(props.rapper)\n    return (\n        <div className='spotlight' >\n            <div className='spotlight__block-one'>\n\n                {photo}\n                {username}\n                {addressGender}\n                {handles}\n                {blurb}\n            </div>\n            <div className='spotlight__block-two' style={{ fontSize: '.7em' }}>\n                {props.focus === 'them' ? button : null}\n                <div>{props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null} </div>\n                <div>{props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null} </div>\n\n            </div>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.user.uid,\n        email: state.user.email,\n        username: state.user.username,\n        sex: state.user.gender,\n        address: state.user.address,\n        zipcode: state.user.address.zip_code,\n        city: state.user.address.city,\n        state: state.user.address.state,\n        needsInfo: state.user.needsInfo,\n        photoURL: state.user.photoURL,\n        blurb: state.user.blurb\n    }\n}\n\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n        logout: () => dispatch(actions.logOut())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spotlight)\n"]},"metadata":{},"sourceType":"module"}