{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component, useState, useEffect } from 'react';\nimport './ManyPost.css';\nimport { connect } from 'react-redux';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\n\nconst ManyPost = props => {\n  // vote\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        myVote = _useState2[0],\n        setMyVote = _useState2[1];\n\n  useEffect(() => {\n    if (props.pid && props.votes && props.uid) {\n      var myVote = props.votes.filter(vote => vote.voterID === props.myUID);\n      setMyVote(myVote);\n      return () => {};\n    }\n  }, [props.pid, props.uid, props.votes, props.comments]);\n\n  const vote = newValue => {\n    const db = firebase.firestore();\n\n    if (myVote.length === 0) {\n      var newVote = {\n        value: newValue,\n        date: new Date(),\n        pid: props.pid,\n        receiverID: props.uid,\n        voterID: props.myUID,\n        postDate: props.createdOn,\n        address: props.address\n      };\n      db.collection('postVotes').add(newVote).catch(err => console.log(err));\n    } else {\n      var updatedVote = _objectSpread({}, myVote[0], {\n        value: newValue === myVote[0].value ? 0 : newValue,\n        date: new Date() // set the vote \n\n      });\n\n      db.collection('postVotes').doc(myVote[0].vid).set(updatedVote).catch(err => console.log(err)); // cleanup leaked extras ***\n\n      if (myVote.length > 1) {\n        for (let i = 1; i < myVote.length; i++) {\n          db.collection('postVotes').doc(myVote[i].vid).delete().then(() => console.log('vote deleted successfully')).catch(err => console.log(err));\n        }\n      }\n    }\n  }; // RENDER ---->\n  // date\n\n\n  var verboseDate = props.createdOn.toDate().toDateString();\n  const date = verboseDate.slice(4, verboseDate.length); // content\n\n  var content = props.content.lineOne + ' / ' + props.content.lineTwo + ' / ' + props.content.lineThree + ' / ' + props.content.lineFour; // votes\n\n  var score = props.votes.filter(vote => {\n    return props.pid === vote.pid && vote.value === 1;\n  }); // dict {coast: color}\n\n  const colorDict = {\n    'West': 'yellow',\n    'East': 'greeen',\n    'South': 'blue',\n    'Midwest': 'purple'\n  };\n  const coastColor = colorDict[props.address.region];\n  var bottomBar;\n\n  if (!props.inEditor) {\n    bottomBar = React.createElement(\"div\", {\n      className: \"many-post__options-vote-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"vote-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"vote-button dislike-button\",\n      onClick: () => vote(-1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash\",\n      style: myVote.length === 1 && myVote[0].value === -1 ? {\n        color: 'darkRed'\n      } : null,\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"vote-button like-button\",\n      onClick: () => vote(1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-fire\",\n      style: myVote.length === 1 && myVote[0].value === 1 ? {\n        color: 'orange'\n      } : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }))));\n  } else {\n    bottomBar = React.createElement(\"div\", {\n      className: \"many-post__options-vote-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"vote-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"vote-button dislike-button\",\n      onClick: () => vote(-1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-trash\",\n      style: myVote.length === 1 && myVote[0].value === -1 ? {\n        color: 'darkRed'\n      } : null,\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"vote-button like-button\",\n      onClick: () => vote(1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-fire\",\n      style: myVote.length === 1 && myVote[0].value === 1 ? {\n        color: 'orange'\n      } : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }))));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"many-post scrollTo\".concat(props.pid),\n    id: \"scrollTo\".concat(props.pid),\n    style: props.customStyle ? props.customStyle.body : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    onClick: () => props.selectPost(props.pid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"many-post-details\",\n    id: props.pid,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"many-post-pic\",\n    src: props.myPhotoURL,\n    alt: \"pic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"many-post-name-date-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    style: props.customStyle ? props.customStyle.username : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, props.username), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, date))), React.createElement(\"div\", {\n    className: \"many-post-region\",\n    id: coastColor,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, props.address.region.toLowerCase()), React.createElement(\"div\", {\n    className: \"many-post-misc\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-comment\",\n    id: \"manyComment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), props.comments.length, React.createElement(\"i\", {\n    className: \"fas fa-fire\",\n    id: \"manyFlame\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), score.length)), React.createElement(\"div\", {\n    className: \"many-post-body\",\n    onClick: () => props.selectPost(props.pid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    style: props.customStyle ? props.customStyle.paragraph : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"\\\"\".concat(content, \"\\\"\"))), bottomBar);\n};\n\nconst mapStateToProps = state => {\n  return {\n    myUID: state.uid,\n    myPhotoURL: state.photoURL\n  };\n};\n\nexport default connect(mapStateToProps, null)(ManyPost);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Judge/JudgeBarz/ManyView/ManyPost/ManyPost.js"],"names":["React","Component","useState","useEffect","connect","firebase","ManyPost","props","myVote","setMyVote","pid","votes","uid","filter","vote","voterID","myUID","comments","newValue","db","firestore","length","newVote","value","date","Date","receiverID","postDate","createdOn","address","collection","add","catch","err","console","log","updatedVote","doc","vid","set","i","delete","then","verboseDate","toDate","toDateString","slice","content","lineOne","lineTwo","lineThree","lineFour","score","colorDict","coastColor","region","bottomBar","inEditor","color","customStyle","body","selectPost","myPhotoURL","username","toLowerCase","paragraph","mapStateToProps","state","photoURL"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react'\nimport './ManyPost.css'\nimport { connect } from 'react-redux'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\n\n\n\nconst ManyPost = (props) => {\n\n    // vote\n    const [myVote, setMyVote] = useState([])\n\n\n    useEffect(() => {\n\n        if (props.pid && props.votes && props.uid) {\n            var myVote = props.votes.filter(vote => vote.voterID === props.myUID)\n            setMyVote(myVote)\n            return () => {\n            };\n        }\n\n\n    }, [props.pid, props.uid, props.votes, props.comments]);\n\n    const vote = (newValue) => {\n        const db = firebase.firestore()\n\n        if (myVote.length === 0) {\n            var newVote = {\n                value: newValue,\n                date: new Date(),\n                pid: props.pid,\n                receiverID: props.uid,\n                voterID: props.myUID,\n                postDate: props.createdOn,\n                address: props.address\n            }\n            db.collection('postVotes').add(newVote)\n                .catch(err => console.log(err))\n        } else {\n            var updatedVote = {\n                ...myVote[0],\n                value: newValue === myVote[0].value ? 0 : newValue,\n                date: new Date()\n            }\n            // set the vote \n            db.collection('postVotes').doc(myVote[0].vid)\n                .set(updatedVote)\n                .catch(err => console.log(err))\n\n            // cleanup leaked extras ***\n            if (myVote.length > 1) {\n                for (let i = 1; i < myVote.length; i++) {\n                    db.collection('postVotes').doc(myVote[i].vid)\n                        .delete()\n                        .then(() => console.log('vote deleted successfully'))\n                        .catch(err => console.log(err))\n                }\n            }\n        }\n    }\n\n    // RENDER ---->\n\n\n    // date\n    var verboseDate = props.createdOn.toDate().toDateString()\n    const date = verboseDate.slice(4, verboseDate.length)\n\n    // content\n    var content = props.content.lineOne + ' / ' + props.content.lineTwo + ' / ' + props.content.lineThree + ' / ' + props.content.lineFour\n\n    // votes\n    var score = props.votes.filter(vote => {\n        return props.pid === vote.pid && vote.value === 1\n    })\n\n    // dict {coast: color}\n    const colorDict = {\n        'West': 'yellow',\n        'East': 'greeen',\n        'South': 'blue',\n        'Midwest': 'purple',\n    }\n    const coastColor = colorDict[props.address.region]\n\n    var bottomBar;\n    if (!props.inEditor) {\n        bottomBar = (\n            <div className={`many-post__options-vote-container`}>\n                <div className='vote-box'>\n                    <button className='vote-button dislike-button' onClick={() => vote(-1)}>\n                        <i className=\"fa fa-trash\" style={myVote.length === 1 && myVote[0].value === -1 ? { color: 'darkRed' } : null} aria-hidden=\"true\"></i>\n                    </button>\n                    <button className='vote-button like-button' onClick={() => vote(1)}>\n                        <i className=\"fas fa-fire\" style={myVote.length === 1 && myVote[0].value === 1 ? { color: 'orange' } : null}></i>\n                    </button>\n\n                </div>\n            </div>\n        )\n    } else {\n        bottomBar = (\n            <div className={`many-post__options-vote-container`}>\n                <div className='vote-box'>\n                    <button className='vote-button dislike-button' onClick={() => vote(-1)}>\n                        <i className=\"fa fa-trash\" style={myVote.length === 1 && myVote[0].value === -1 ? { color: 'darkRed' } : null} aria-hidden=\"true\"></i>\n                    </button>\n                    <button className='vote-button like-button' onClick={() => vote(1)}>\n                        <i className=\"fas fa-fire\" style={myVote.length === 1 && myVote[0].value === 1 ? { color: 'orange' } : null}></i>\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n\n        <div\n            className={`many-post scrollTo${props.pid}`}\n            id={`scrollTo${props.pid}`}\n            style={props.customStyle ? props.customStyle.body : null}>\n            <header onClick={() => props.selectPost(props.pid)}>\n                <div className='many-post-details' id={props.pid}>\n                    <img className='many-post-pic' src={props.myPhotoURL} alt='pic'></img>\n                    <div className='many-post-name-date-container'>\n                        <h6 style={props.customStyle ? props.customStyle.username : null}>{props.username}</h6>\n                        <p>{date}</p>\n                    </div>\n                </div>\n                <div className='many-post-region' id={coastColor}>\n                    {props.address.region.toLowerCase()}\n                </div>\n                <div className='many-post-misc'>\n                    <i className=\"fas fa-comment\" id='manyComment' ></i>\n                    {props.comments.length}\n                    <i className=\"fas fa-fire\" id='manyFlame' aria-hidden=\"true\"></i>\n                    {score.length}\n                </div>\n            </header>\n            <div className='many-post-body' onClick={() => props.selectPost(props.pid)}>\n                <p\n                    style={props.customStyle ? props.customStyle.paragraph : null}>\n                    {`\"${content}\"`}\n                </p>\n            </div>\n            {bottomBar}\n        </div>\n\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        myUID: state.uid,\n        myPhotoURL: state.photoURL\n    }\n}\n\nexport default connect(mapStateToProps, null)(ManyPost)\n"]},"metadata":{},"sourceType":"module"}