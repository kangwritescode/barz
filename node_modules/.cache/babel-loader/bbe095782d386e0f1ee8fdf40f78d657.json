{"ast":null,"code":"var _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/components/Scribble/MyBars/ViewedBar/PostComments/PostComment/PostComment.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport './PostComment.css';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\n\nfunction PostComment(props) {\n  var data = props.data; // fetch photo on mounting\n\n  useEffect(() => {\n    document.addEventListener('click', closeDropdowns);\n    return () => {\n      document.removeEventListener('click', closeDropdowns);\n    };\n  }, []);\n\n  const closeDropdowns = event => {\n    const classList = event.target.classList;\n\n    if (classList && !classList.contains('posted-comment__dots') && !classList.contains('posted-comment__dot')) {\n      const dropdowns = document.getElementsByClassName('delete-comment-drop-menu');\n\n      for (let dropdown of dropdowns) {\n        dropdown.classList.remove('delete-comment-drop-menu-show');\n      }\n    }\n  };\n\n  const toggleDeleteDropdown = (event, cid) => {\n    const dropdown = document.getElementById(cid);\n    console.log(dropdown);\n\n    if (dropdown.classList.contains('delete-comment-drop-menu-show')) {\n      dropdown.classList.remove('delete-comment-drop-menu-show');\n    } else {\n      const allDropdowns = document.getElementsByClassName('delete-comment-drop-menu-show');\n\n      for (let dropdown of allDropdowns) {\n        dropdown.classList.remove('delete-comment-drop-menu-show');\n      }\n\n      dropdown.classList.add('delete-comment-drop-menu-show');\n    }\n  };\n\n  const generateDatePassed = () => {\n    var datePassed = new Date().getTime() - props.data.date.toDate().getTime();\n    var minutesPassed = Math.trunc(datePassed / 1000 / 60);\n\n    if (minutesPassed < 60) {\n      return Math.max(minutesPassed, 1) + 'm';\n    }\n\n    var hoursPassed = Math.trunc(minutesPassed / 60);\n\n    if (hoursPassed < 24) {\n      return hoursPassed + 'h';\n    }\n\n    var daysPassed = Math.trunc(hoursPassed / 24);\n\n    if (daysPassed < 7) {\n      return daysPassed + 'd';\n    }\n\n    return Math.trunc(daysPassed / 7) + 'w';\n  }; // editable if current user's comment or current user's post\n\n\n  const editable = props.uid === data.uid || props.viewedPost.uid === props.uid;\n  var deleteOption = null;\n\n  if (editable) {\n    deleteOption = React.createElement(\"div\", {\n      className: \"posted-comment__dots-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"posted-comment__dots\",\n      onClick: event => toggleDeleteDropdown(event, data.cid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"delete-comment-drop-menu\",\n      id: data.cid,\n      onMouseLeave: event => {\n        closeDropdowns(event);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"delete-comment-drop-menu-item\",\n      id: \"delete-post\",\n      onClick: () => props.toggleDeleteCommentModal(true, data.cid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(\"div\", {\n      className: \"posted-comment__dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"posted-comment__dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"posted-comment__dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"posted-comment\",\n    onMouseLeave: event => {\n      closeDropdowns(event);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"posted-comment__img-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"\",\n    src: props.data.photoURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"posted-comment__content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, data.username), \" \", data.comment, \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"posted-comment__content__date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, generateDatePassed())), deleteOption);\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid,\n    myPhotoURL: state.photoURL\n  };\n};\n\nexport default connect(mapStateToProps, null)(PostComment);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/components/Scribble/MyBars/ViewedBar/PostComments/PostComment/PostComment.js"],"names":["React","useEffect","useState","connect","firebase","PostComment","props","data","document","addEventListener","closeDropdowns","removeEventListener","event","classList","target","contains","dropdowns","getElementsByClassName","dropdown","remove","toggleDeleteDropdown","cid","getElementById","console","log","allDropdowns","add","generateDatePassed","datePassed","Date","getTime","date","toDate","minutesPassed","Math","trunc","max","hoursPassed","daysPassed","editable","uid","viewedPost","deleteOption","toggleDeleteCommentModal","photoURL","username","comment","mapStateToProps","state","myPhotoURL"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,mBAAP;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAO,oBAAP;;AAGA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAExB,MAAIC,IAAI,GAAGD,KAAK,CAACC,IAAjB,CAFwB,CAIxB;;AACAN,EAAAA,SAAS,CAAC,MAAM;AACZO,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCC,cAAnC;AAEA,WAAO,MAAM;AACTF,MAAAA,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,EAAsCD,cAAtC;AAEH,KAHD;AAIH,GAPQ,EAON,EAPM,CAAT;;AAUA,QAAMA,cAAc,GAAIE,KAAD,IAAW;AAC9B,UAAMC,SAAS,GAAGD,KAAK,CAACE,MAAN,CAAaD,SAA/B;;AACA,QAAIA,SAAS,IACN,CAACA,SAAS,CAACE,QAAV,CAAmB,sBAAnB,CADJ,IAEG,CAACF,SAAS,CAACE,QAAV,CAAmB,qBAAnB,CAFR,EAEmD;AAC/C,YAAMC,SAAS,GAAGR,QAAQ,CAACS,sBAAT,CAAgC,0BAAhC,CAAlB;;AACA,WAAK,IAAIC,QAAT,IAAqBF,SAArB,EAAgC;AAC5BE,QAAAA,QAAQ,CAACL,SAAT,CAAmBM,MAAnB,CAA0B,+BAA1B;AACH;AACJ;AACJ,GAVD;;AAYA,QAAMC,oBAAoB,GAAG,CAACR,KAAD,EAAQS,GAAR,KAAgB;AACzC,UAAMH,QAAQ,GAAGV,QAAQ,CAACc,cAAT,CAAwBD,GAAxB,CAAjB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;;AACA,QAAIA,QAAQ,CAACL,SAAT,CAAmBE,QAAnB,CAA4B,+BAA5B,CAAJ,EAAkE;AAC9DG,MAAAA,QAAQ,CAACL,SAAT,CAAmBM,MAAnB,CAA0B,+BAA1B;AACH,KAFD,MAEO;AACH,YAAMM,YAAY,GAAGjB,QAAQ,CAACS,sBAAT,CAAgC,+BAAhC,CAArB;;AACA,WAAK,IAAIC,QAAT,IAAqBO,YAArB,EAAmC;AAC/BP,QAAAA,QAAQ,CAACL,SAAT,CAAmBM,MAAnB,CAA0B,+BAA1B;AACH;;AACDD,MAAAA,QAAQ,CAACL,SAAT,CAAmBa,GAAnB,CAAuB,+BAAvB;AACH;AACJ,GAZD;;AAcA,QAAMC,kBAAkB,GAAG,MAAM;AAC7B,QAAIC,UAAU,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuBxB,KAAK,CAACC,IAAN,CAAWwB,IAAX,CAAgBC,MAAhB,GAAyBF,OAAzB,EAAxC;AACA,QAAIG,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWP,UAAU,GAAG,IAAb,GAAoB,EAA/B,CAApB;;AACA,QAAIK,aAAa,GAAG,EAApB,EAAwB;AACpB,aAAOC,IAAI,CAACE,GAAL,CAASH,aAAT,EAAwB,CAAxB,IAA6B,GAApC;AACH;;AACD,QAAII,WAAW,GAAGH,IAAI,CAACC,KAAL,CAAWF,aAAa,GAAG,EAA3B,CAAlB;;AACA,QAAII,WAAW,GAAG,EAAlB,EAAsB;AAClB,aAAOA,WAAW,GAAG,GAArB;AACH;;AACD,QAAIC,UAAU,GAAGJ,IAAI,CAACC,KAAL,CAAWE,WAAW,GAAG,EAAzB,CAAjB;;AACA,QAAIC,UAAU,GAAG,CAAjB,EAAoB;AAChB,aAAOA,UAAU,GAAG,GAApB;AACH;;AACD,WAAOJ,IAAI,CAACC,KAAL,CAAYG,UAAU,GAAG,CAAzB,IAA+B,GAAtC;AACH,GAfD,CAzCwB,CAyDxB;;;AACA,QAAMC,QAAQ,GAAIjC,KAAK,CAACkC,GAAN,KAAcjC,IAAI,CAACiC,GAApB,IAA6BlC,KAAK,CAACmC,UAAN,CAAiBD,GAAjB,KAAyBlC,KAAK,CAACkC,GAA7E;AACA,MAAIE,YAAY,GAAG,IAAnB;;AACA,MAAIH,QAAJ,EAAc;AACVG,IAAAA,YAAY,GACR;AAAK,MAAA,SAAS,kCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AACI,MAAA,SAAS,EAAC,sBADd;AACqC,MAAA,OAAO,EAAG9B,KAAD,IAAWQ,oBAAoB,CAACR,KAAD,EAAQL,IAAI,CAACc,GAAb,CAD7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AACI,MAAA,SAAS,4BADb;AAEI,MAAA,EAAE,EAAEd,IAAI,CAACc,GAFb;AAGI,MAAA,YAAY,EAAGT,KAAD,IAAW;AAAEF,QAAAA,cAAc,CAACE,KAAD,CAAd;AAAuB,OAHtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAII;AAAK,MAAA,SAAS,EAAC,+BAAf;AAA+C,MAAA,EAAE,EAAC,aAAlD;AAAgE,MAAA,OAAO,EAAE,MAAMN,KAAK,CAACqC,wBAAN,CAA+B,IAA/B,EAAqCpC,IAAI,CAACc,GAA1C,CAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,CAFJ,EAUI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,EAWI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXJ,EAYI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZJ,CADJ,CADJ;AAmBH;;AAED,SACI;AACI,IAAA,SAAS,EAAC,gBADd;AAEI,IAAA,YAAY,EAAGT,KAAD,IAAW;AAAEF,MAAAA,cAAc,CAACE,KAAD,CAAd;AAAuB,KAFtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,GAAG,EAAC,EAAT;AAAY,IAAA,GAAG,EAAEN,KAAK,CAACC,IAAN,CAAWqC,QAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAHJ,EAMI;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIrC,IAAI,CAACsC,QAAT,CADJ,OAC4BtC,IAAI,CAACuC,OADjC,OAC0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD1C,EAEI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgDnB,kBAAkB,EAAlE,CAFJ,CANJ,EAUKe,YAVL,CADJ;AAcH;;AAED,MAAMK,eAAe,GAAGC,KAAK,IAAI;AAC7B,SAAO;AACHR,IAAAA,GAAG,EAAEQ,KAAK,CAACR,GADR;AAEHS,IAAAA,UAAU,EAAED,KAAK,CAACJ;AAFf,GAAP;AAIH,CALD;;AAOA,eAAezC,OAAO,CAAC4C,eAAD,EAAkB,IAAlB,CAAP,CAA+B1C,WAA/B,CAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport './PostComment.css'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\n\n\nfunction PostComment(props) {\n\n    var data = props.data\n\n    // fetch photo on mounting\n    useEffect(() => {\n        document.addEventListener('click', closeDropdowns)\n\n        return () => {\n            document.removeEventListener('click', closeDropdowns)\n\n        }\n    }, [])\n\n\n    const closeDropdowns = (event) => {\n        const classList = event.target.classList\n        if (classList\n            && !classList.contains('posted-comment__dots')\n            && !classList.contains('posted-comment__dot')) {\n            const dropdowns = document.getElementsByClassName('delete-comment-drop-menu')\n            for (let dropdown of dropdowns) {\n                dropdown.classList.remove('delete-comment-drop-menu-show')\n            }\n        }\n    }\n\n    const toggleDeleteDropdown = (event, cid) => {\n        const dropdown = document.getElementById(cid)\n        console.log(dropdown)\n        if (dropdown.classList.contains('delete-comment-drop-menu-show')) {\n            dropdown.classList.remove('delete-comment-drop-menu-show')\n        } else {\n            const allDropdowns = document.getElementsByClassName('delete-comment-drop-menu-show')\n            for (let dropdown of allDropdowns) {\n                dropdown.classList.remove('delete-comment-drop-menu-show')\n            }\n            dropdown.classList.add('delete-comment-drop-menu-show')\n        }\n    }\n\n    const generateDatePassed = () => {\n        var datePassed = new Date().getTime() - props.data.date.toDate().getTime()\n        var minutesPassed = Math.trunc(datePassed / 1000 / 60)\n        if (minutesPassed < 60) {\n            return Math.max(minutesPassed, 1) + 'm'\n        }\n        var hoursPassed = Math.trunc(minutesPassed / 60)\n        if (hoursPassed < 24) {\n            return hoursPassed + 'h'\n        }\n        var daysPassed = Math.trunc(hoursPassed / 24)\n        if (daysPassed < 7) {\n            return daysPassed + 'd'\n        }\n        return Math.trunc((daysPassed / 7)) + 'w'\n    }\n    // editable if current user's comment or current user's post\n    const editable = (props.uid === data.uid) || (props.viewedPost.uid === props.uid)\n    var deleteOption = null;\n    if (editable) {\n        deleteOption = (\n            <div className={`posted-comment__dots-container`}>\n                <div\n                    className='posted-comment__dots' onClick={(event) => toggleDeleteDropdown(event, data.cid)}>\n                    <div\n                        className={`delete-comment-drop-menu`}\n                        id={data.cid}\n                        onMouseLeave={(event) => { closeDropdowns(event) }}>\n                        <div className=\"delete-comment-drop-menu-item\" id=\"delete-post\" onClick={() => props.toggleDeleteCommentModal(true, data.cid)}>\n                            Delete\n                        </div>\n                    </div>\n                    <div className='posted-comment__dot'></div>\n                    <div className='posted-comment__dot'></div>\n                    <div className='posted-comment__dot'></div>\n                </div>\n                {/* <i className=\"fas fa-minus\"></i> */}\n            </div>\n        )\n    }\n\n    return (\n        <div\n            className='posted-comment'\n            onMouseLeave={(event) => { closeDropdowns(event) }}>\n            <div className='posted-comment__img-container'>\n                <img alt='' src={props.data.photoURL}></img>\n            </div>\n            <div className='posted-comment__content'>\n                <b>{data.username}</b> {data.comment} <br />\n                <div className='posted-comment__content__date'>{generateDatePassed()}</div>\n            </div>\n            {deleteOption}\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n        myPhotoURL: state.photoURL\n    }\n}\n\nexport default connect(mapStateToProps, null)(PostComment)"]},"metadata":{},"sourceType":"module"}