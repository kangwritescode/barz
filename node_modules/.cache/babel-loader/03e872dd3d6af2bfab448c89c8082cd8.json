{"ast":null,"code":"import _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/components/Scribble/MyBars/ViewedBar/DeletePost/DeletePost.js\";\nimport React, { Component, useState } from 'react';\nimport './DeletePost.css';\nimport firebase from '../../../../../Firebase';\nimport 'firebase/firestore';\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../../../store/actions';\n\nconst DeletePost = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        spinner = _useState2[0],\n        setSpinner = _useState2[1];\n\n  const deletePost = async pid => {\n    setSpinner(true);\n    var db = firebase.firestore();\n    await db.collection('postVotes').where('pid', '==', pid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete().catch(err => console.log(err.message));\n      });\n    }).catch(err => {\n      setSpinner(false);\n    });\n    await db.collection('postComments').where('pid', '==', pid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete().catch(err => console.log(err.message));\n      });\n    }).catch(err => {\n      setSpinner(false);\n    });\n    await db.collection('submissions').doc(pid).delete().catch(err => {\n      setSpinner(false);\n    });\n    setSpinner(false);\n  };\n\n  return React.createElement(\"div\", {\n    id: \"delete-post-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"delete-post-backdrop\",\n    onClick: () => props.toggle(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"delete-post-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, spinner ? React.createElement(\"div\", {\n    id: \"delete-post-spinner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }) : null, React.createElement(\"i\", {\n    className: \"fa fa-close\",\n    id: \"close-delete-post-x\",\n    onClick: () => props.toggle(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"delete-post-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Delete Post?\"), React.createElement(\"div\", {\n    id: \"delete-post-question\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"This cannot be reversed.\"), React.createElement(\"div\", {\n    id: \"delete-post-button-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"delete-post-button\",\n    id: \"cancel-button\",\n    onClick: () => props.toggle(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Cancel\"), React.createElement(\"div\", {\n    className: \"delete-post-button\",\n    id: \"delete-button\",\n    onClick: props.pid ? () => deletePost(props.pid) : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Delete\"))));\n};\n\nexport default connect(null, null)(DeletePost);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/components/Scribble/MyBars/ViewedBar/DeletePost/DeletePost.js"],"names":["React","Component","useState","firebase","connect","actionTypes","DeletePost","props","spinner","setSpinner","deletePost","pid","db","firestore","collection","where","get","then","snap","forEach","doc","ref","delete","catch","err","console","log","message","toggle"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,kBAAP;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAO,oBAAP;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,WAAZ,MAA6B,8BAA7B;;AAEA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAAA,oBAEIL,QAAQ,CAAC,KAAD,CAFZ;AAAA;AAAA,QAEnBM,OAFmB;AAAA,QAEVC,UAFU;;AAK1B,QAAMC,UAAU,GAAG,MAAOC,GAAP,IAAe;AAC9BF,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIG,EAAE,GAAGT,QAAQ,CAACU,SAAT,EAAT;AACA,UAAMD,EAAE,CAACE,UAAH,CAAc,WAAd,EAA2BC,KAA3B,CAAiC,KAAjC,EAAwC,IAAxC,EAA8CJ,GAA9C,EAAmDK,GAAnD,GACDC,IADC,CACIC,IAAI,IAAI;AACVA,MAAAA,IAAI,CAACC,OAAL,CAAaC,GAAG,IAAI;AAChBA,QAAAA,GAAG,CAACC,GAAJ,CAAQC,MAAR,GAAiBC,KAAjB,CAAuBC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB,CAA9B;AACH,OAFD;AAGH,KALC,EAMDJ,KANC,CAMKC,GAAG,IAAI;AAAEf,MAAAA,UAAU,CAAC,KAAD,CAAV;AAAmB,KANjC,CAAN;AAOA,UAAMG,EAAE,CAACE,UAAH,CAAc,cAAd,EAA8BC,KAA9B,CAAoC,KAApC,EAA2C,IAA3C,EAAiDJ,GAAjD,EAAsDK,GAAtD,GACDC,IADC,CACIC,IAAI,IAAI;AACVA,MAAAA,IAAI,CAACC,OAAL,CAAaC,GAAG,IAAI;AAChBA,QAAAA,GAAG,CAACC,GAAJ,CAAQC,MAAR,GAAiBC,KAAjB,CAAuBC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB,CAA9B;AACH,OAFD;AAGH,KALC,EAMDJ,KANC,CAMKC,GAAG,IAAI;AAAEf,MAAAA,UAAU,CAAC,KAAD,CAAV;AAAmB,KANjC,CAAN;AAOA,UAAMG,EAAE,CAACE,UAAH,CAAc,aAAd,EAA6BM,GAA7B,CAAiCT,GAAjC,EAAsCW,MAAtC,GACDC,KADC,CACKC,GAAG,IAAI;AAAEf,MAAAA,UAAU,CAAC,KAAD,CAAV;AAAmB,KADjC,CAAN;AAEAA,IAAAA,UAAU,CAAC,KAAD,CAAV;AAGH,GAtBD;;AAwBA,SACI;AAAK,IAAA,EAAE,EAAC,qBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,EAAE,EAAC,sBAAR;AAA+B,IAAA,OAAO,EAAE,MAAMF,KAAK,CAACqB,MAAN,CAAa,IAAb,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,EAAE,EAAC,kBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKpB,OAAO,GAAG;AAAK,IAAA,EAAE,EAAC,qBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAA0C,IADtD,EAEI;AAAG,IAAA,SAAS,EAAC,aAAb;AAA2B,IAAA,EAAE,EAAC,qBAA9B;AAAoD,IAAA,OAAO,EAAE,MAAMD,KAAK,CAACqB,MAAN,CAAa,IAAb,CAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI;AAAK,IAAA,EAAE,EAAC,oBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,EAII;AAAK,IAAA,EAAE,EAAC,sBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJJ,EAKI;AAAK,IAAA,EAAE,EAAC,8BAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAoC,IAAA,EAAE,EAAC,eAAvC;AAAuD,IAAA,OAAO,EAAE,MAAMrB,KAAK,CAACqB,MAAN,CAAa,IAAb,CAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAoC,IAAA,EAAE,EAAC,eAAvC;AAAuD,IAAA,OAAO,EAAErB,KAAK,CAACI,GAAN,GAAY,MAAMD,UAAU,CAACH,KAAK,CAACI,GAAP,CAA5B,GAA0C,IAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CALJ,CAFJ,CADJ;AAeH,CA5CD;;AAgDA,eAAeP,OAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CAAoBE,UAApB,CAAf","sourcesContent":["import React, { Component, useState } from 'react'\nimport './DeletePost.css'\nimport firebase from '../../../../../Firebase'\nimport 'firebase/firestore'\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../../../store/actions'\n\nconst DeletePost = (props) => {\n\n    const [spinner, setSpinner] = useState(false)\n\n\n    const deletePost = async (pid) => {\n        setSpinner(true)\n        var db = firebase.firestore()\n        await db.collection('postVotes').where('pid', '==', pid).get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete().catch(err => console.log(err.message))\n                })\n            })\n            .catch(err => { setSpinner(false) })\n        await db.collection('postComments').where('pid', '==', pid).get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete().catch(err => console.log(err.message))\n                })\n            })\n            .catch(err => { setSpinner(false) })\n        await db.collection('submissions').doc(pid).delete()\n            .catch(err => { setSpinner(false) })\n        setSpinner(false)\n        \n\n    }\n\n    return (\n        <div id=\"delete-post-wrapper\">\n            <div id=\"delete-post-backdrop\" onClick={() => props.toggle(null)}></div>\n            <div id=\"delete-post-body\">\n                {spinner ? <div id='delete-post-spinner'></div> : null}\n                <i className=\"fa fa-close\" id=\"close-delete-post-x\" onClick={() => props.toggle(null)}></i>\n                <div id=\"delete-post-header\">Delete Post?</div>\n                <div id=\"delete-post-question\">This cannot be reversed.</div>\n                <div id='delete-post-button-container'>\n                    <div className='delete-post-button' id='cancel-button' onClick={() => props.toggle(null)}>Cancel</div>\n                    <div className='delete-post-button' id='delete-button' onClick={props.pid ? () => deletePost(props.pid) : null}>Delete</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\nexport default connect(null, null)(DeletePost); "]},"metadata":{},"sourceType":"module"}