{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/UploadImage/UploadImage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport './UploadImage.css';\nimport { connect } from 'react-redux';\nimport firebase from 'firebase';\nimport * as actionTypes from '../../../../store/actions/actionsTypes';\nimport * as actions from '../../../../store/actions/index';\n\nclass UploadImage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedFile: null,\n      hasChanged: false,\n      uploading: false,\n      showNotification: false,\n      notificationMessage: 'Upload Successful!',\n      notificationStatus: 'successColor'\n    };\n\n    this.fileSelectedHandler = event => {\n      let targetFile = event.target.files[0];\n\n      if (targetFile) {\n        let reader = new FileReader();\n        let presentIMG = document.getElementById(\"uploadIMGPresent\");\n        presentIMG.title = targetFile.name;\n\n        reader.onload = event => {\n          presentIMG.src = event.target.result;\n        };\n\n        reader.readAsDataURL(targetFile);\n        this.setState(_objectSpread({}, this.state, {\n          selectedFile: event.target.files[0],\n          hasChanged: true\n        }));\n      }\n    };\n\n    this.toggleNotification = bool => {\n      this.setState(_objectSpread({}, this.state, {\n        showNotification: bool\n      }));\n    };\n  }\n\n  componentDidMount() {\n    this.setState(_objectSpread({}, this.state, {\n      selectedFile: this.props.photoURL\n    }));\n  }\n\n  fileUploadHandler() {\n    this.setState(_objectSpread({}, this.state, {\n      uploading: true\n    }));\n    let storageRef = firebase.storage().ref();\n    let imageRef = storageRef.child(\"images/\".concat(this.props.uid, \"/userIMG.png\"));\n    let uploadTask = imageRef.put(this.state.selectedFile);\n    uploadTask.on('state_changed', snapshot => {}, err => {\n      this.setState(_objectSpread({}, this.state, {\n        uploading: false,\n        showNotification: true,\n        notificationStatus: 'failed',\n        notificationMessage: err.message\n      }));\n    }, () => {\n      uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n        this.props.setUserData(downloadURL);\n        this.setState(_objectSpread({}, this.state, {\n          uploading: false,\n          showNotification: true\n        }));\n      });\n    });\n  }\n\n  render() {\n    let theImage;\n\n    if (this.state.selectedFile) {\n      theImage = React.createElement(\"img\", {\n        id: \"uploadIMGPresent\",\n        alt: \"what?\",\n        src: this.state.selectedFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      });\n    } else {\n      theImage = React.createElement(\"div\", {\n        className: \"lds-ripple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ul-img-backdrop\",\n      onClick: () => this.props.setShowPhotoModal(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"UploadImage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.uploading ? React.createElement(\"div\", {\n      id: \"dotdotLoader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }) : null, this.state.showNotification ? React.createElement(\"div\", {\n      className: \"upload-photo-success-msg\",\n      onAnimationEnd: () => this.toggleNotification(false),\n      id: this.state.notificationStatus ? \"successColor\" : \"failed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.notificationMessage) : null, React.createElement(\"div\", {\n      id: \"closeUploadImage\",\n      onClick: () => this.props.setShowPhotoModal(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    })), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Set Photo\"), React.createElement(\"div\", {\n      id: \"IMG_Border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, theImage), React.createElement(\"div\", {\n      id: \"UploadButtons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onChange: this.fileSelectedHandler,\n      type: \"file\",\n      id: \"files\",\n      className: \"hidden\",\n      accept: \"image/x-png, image/jpeg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      id: \"uploadIMG\",\n      htmlFor: \"files\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Choose File\"), this.state.hasChanged ? React.createElement(\"button\", {\n      onClick: () => this.fileUploadHandler(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Confirm\") : React.createElement(\"button\", {\n      onClick: () => this.props.setShowPhotoModal(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Cancel\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.user.uid,\n    photoURL: state.user.photoURL\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setUserData: photoURL => dispatch(actions.setUserData({\n      photoURL: photoURL\n    }))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadImage);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/ProfileBox/UploadImage/UploadImage.js"],"names":["React","Component","connect","firebase","actionTypes","actions","UploadImage","state","selectedFile","hasChanged","uploading","showNotification","notificationMessage","notificationStatus","fileSelectedHandler","event","targetFile","target","files","reader","FileReader","presentIMG","document","getElementById","title","name","onload","src","result","readAsDataURL","setState","toggleNotification","bool","componentDidMount","props","photoURL","fileUploadHandler","storageRef","storage","ref","imageRef","child","uid","uploadTask","put","on","snapshot","err","message","getDownloadURL","then","downloadURL","setUserData","render","theImage","setShowPhotoModal","mapStateToProps","user","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './UploadImage.css'\nimport { connect } from 'react-redux'\nimport firebase from 'firebase'\nimport * as actionTypes from '../../../../store/actions/actionsTypes'\nimport * as actions from '../../../../store/actions/index'\n\nclass UploadImage extends Component {\n\n    state = {\n        selectedFile: null,\n        hasChanged: false,\n        uploading: false,\n        showNotification: false,\n        notificationMessage: 'Upload Successful!',\n        notificationStatus: 'successColor'\n    }\n\n    componentDidMount() {\n\n        this.setState({\n            ...this.state,\n            selectedFile: this.props.photoURL\n        })\n    }\n\n\n    fileSelectedHandler = event => {\n        let targetFile = event.target.files[0]\n        if (targetFile) {\n            let reader = new FileReader()\n            let presentIMG = document.getElementById(\"uploadIMGPresent\")\n            presentIMG.title = targetFile.name\n            reader.onload = event => {\n                presentIMG.src = event.target.result\n            }\n            reader.readAsDataURL(targetFile)\n            this.setState({\n                ...this.state,\n                selectedFile: event.target.files[0],\n                hasChanged: true\n            })\n        }\n    }\n\n    fileUploadHandler() {\n        this.setState({\n            ...this.state,\n            uploading: true\n        })\n        let storageRef = firebase.storage().ref()\n        let imageRef = storageRef.child(`images/${this.props.uid}/userIMG.png`);\n        let uploadTask = imageRef.put(this.state.selectedFile)\n        uploadTask.on('state_changed', snapshot => {\n\n        }, (err) => {\n            this.setState({\n                ...this.state,\n                uploading: false,\n                showNotification: true,\n                notificationStatus: 'failed',\n                notificationMessage: err.message\n            })\n        }, () => {\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\n                this.props.setUserData(downloadURL)\n                this.setState({\n                    ...this.state,\n                    uploading: false,\n                    showNotification: true\n                })\n            });\n        });\n\n    }\n\n    toggleNotification = (bool) => {\n        this.setState({\n            ...this.state,\n            showNotification: bool\n        })\n    }\n\n\n\n\n    render() {\n        let theImage;\n        if (this.state.selectedFile) {\n            theImage = (<img id=\"uploadIMGPresent\" alt={\"what?\"} src={this.state.selectedFile} />\n\n            )\n        } else {\n            theImage = (<div className=\"lds-ripple\"><div></div><div></div></div>)\n        }\n\n        return (\n            <div>\n                <div className=\"ul-img-backdrop\" onClick={() => this.props.setShowPhotoModal(false)}></div>\n\n                <div id=\"UploadImage\">\n                    {this.state.uploading ? <div id=\"dotdotLoader\"></div> : null}\n                    {this.state.showNotification ?\n                        <div\n                            className=\"upload-photo-success-msg\"\n                            onAnimationEnd={() => this.toggleNotification(false)}\n                            id={this.state.notificationStatus ? \"successColor\" : \"failed\"}>\n                            {this.state.notificationMessage}\n                        </div> : null}\n\n                    <div id=\"closeUploadImage\" onClick={() => this.props.setShowPhotoModal(false)}><i className=\"fa fa-close\"></i></div>\n\n                    {/* <img alt=\"\" src={portrait}></img> */}\n                    <h1>Set Photo</h1>\n                    <div id=\"IMG_Border\">\n                        {theImage}\n                    </div>\n\n\n\n                    <div id=\"UploadButtons\">\n                        <input onChange={this.fileSelectedHandler} type=\"file\" id=\"files\" className=\"hidden\" accept=\"image/x-png, image/jpeg\" />\n                        <label id=\"uploadIMG\" htmlFor=\"files\">Choose File</label>\n                        {this.state.hasChanged ?\n                            <button onClick={() => this.fileUploadHandler()}>Confirm</button> :\n                            <button onClick={() => this.props.setShowPhotoModal(false)}>Cancel</button>}\n                    </div>\n\n                </div>\n            </div>\n\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.user.uid,\n        photoURL: state.user.photoURL,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setUserData: (photoURL) => dispatch(actions.setUserData({photoURL: photoURL}))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadImage)"]},"metadata":{},"sourceType":"module"}