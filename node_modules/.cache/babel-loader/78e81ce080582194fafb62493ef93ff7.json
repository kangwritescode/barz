{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Wordsmiths/Rappers/Rappers.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport './Rappers.css';\nimport Rapper from './Rapper/Rapper';\nimport { connect } from 'react-redux';\nimport firebase from '../../../Firebase';\nimport Pedestal from '../Pedestal/Pedestal';\nimport BestCity from '../BestCity/BestCity';\nimport BestCoast from '../BestCoast/BestCoast';\nimport ProfileBox from '../../Hub/ProfileBox/ProfileBox';\n\nclass Rappers extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      spotlightFocus: 'me',\n      spotlightRapper: null,\n      fetchingSpotlightRapper: false,\n      rappers: [],\n      follows: [],\n      followsRef: null,\n      dequedNo: 0,\n      toDeque: 0\n    };\n\n    this.componentDidMount = () => {\n      this.fetchFollows();\n    };\n\n    this.componentWillUnmount = () => {\n      this.state.followsRef();\n    };\n\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (prevProps.rappers !== this.props.rappers) {\n        var totalNo = this.props.rappers.length; // how much will you deque initially ?\n\n        var dequedNo = Math.min(totalNo, Rappers.pageLen); // how much do you have left to toDeque\n\n        var toDeque = totalNo <= Rappers.pageLen ? 0 : totalNo - Rappers.pageLen;\n        this.setState(_objectSpread({}, this.state, {\n          rappers: this.props.rappers,\n          dequedNo: dequedNo,\n          toDeque: toDeque\n        }));\n      }\n    };\n\n    this.fetchFollows = async () => {\n      var db = firebase.firestore();\n      const follows = [];\n      var followsRef = await db.collection(\"follows\").onSnapshot(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          follows.push(_objectSpread({}, doc.data(), {\n            fid: doc.id\n          }));\n        });\n      });\n      this.setState(_objectSpread({}, this.state, {\n        follows: follows,\n        followsRef: followsRef\n      }));\n    };\n\n    this.deque = () => {\n      if (this.state.toDeque <= Rappers.pageLen) {\n        this.setState(_objectSpread({}, this.state, {\n          dequedNo: this.state.dequedNo + this.state.toDeque,\n          toDeque: 0\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          dequedNo: this.state.dequedNo + Rappers.pageLen,\n          toDeque: this.state.toDeque - Rappers.pageLen\n        }));\n      }\n    };\n\n    this.findRapper = () => {\n      var rapper = this.state.rappers.filter(rapper => rapper.uid === this.props.uid)[0];\n      return rapper;\n    };\n\n    this.setSpotlightRapper = async rapper => {\n      console.log(rapper, 'new spot light rapper');\n\n      if (rapper.uid === this.props.uid) {\n        this.setState(_objectSpread({}, this.state, {\n          myCachedRapperData: rapper,\n          spotlightRapper: rapper,\n          spotlightFocus: 'me'\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          spotlightRapper: rapper,\n          spotlightFocus: 'them'\n        }));\n      }\n    };\n\n    this.setSpotlightFocus = value => {\n      if (value === 'me') {\n        this.setState(_objectSpread({}, this.state, {\n          spotlightFocus: value,\n          spotlightRapper: this.state.myCachedRapperData\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          spotlightFocus: value\n        }));\n      }\n    };\n  }\n\n  render() {\n    var placeholder = React.createElement(\"div\", {\n      className: \"Rappers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"votes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Score\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"right-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"right-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Location\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"right-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Region\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Gender\")), this.props.rappers.length === 0 && !this.props.fetching ? React.createElement(\"div\", {\n      id: \"no-rappers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"no-rappers-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"No rappers for that search!\")) : React.createElement(\"div\", {\n      className: \"loader\",\n      id: \"rappers-loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Loading...\"));\n    var tableHeader = React.createElement(\"div\", {\n      id: \"table-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"votes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Score\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"right-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"right-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Location\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      id: \"right-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Region\"), React.createElement(\"div\", {\n      className: \"headerDetail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Gender\"));\n    var rappers = this.state.rappers.length === 0 ? placeholder : React.createElement(\"div\", {\n      className: \"Rappers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, tableHeader, this.state.rappers.slice(0, this.state.dequedNo).map((rapper, index) => {\n      var style = index % 2 === 0 ? 'lighter' : 'darker';\n      return React.createElement(Rapper, {\n        rank: index + 1,\n        style: style,\n        key: rapper.username,\n        state: rapper.address.state,\n        username: rapper.username,\n        votes: rapper.tally,\n        city: rapper.address.city,\n        coast: rapper.address.region,\n        gender: rapper.gender,\n        address: rapper.address,\n        submissionCount: rapper.submissionCount,\n        uid: rapper.uid,\n        handles: rapper.handles,\n        photoRef: rapper.photoRef,\n        shineSpotlight: this.setSpotlightRapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      });\n    }), this.state.toDeque ? React.createElement(\"div\", {\n      id: \"load-more\",\n      onClick: this.deque,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"View More\") : null);\n    return React.createElement(\"div\", {\n      className: \"Rappers-Container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, rappers, React.createElement(\"div\", {\n      className: \"Winners-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Winners-container__spotlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"spotlight__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header__section\",\n      onClick: this.state.spotlightRapper && this.state.spotlightRapper.username === this.props.username ? () => alert('Select a rapper!') : () => this.setSpotlightFocus('them'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"section__word\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Wordsmith\"))), React.createElement(\"div\", {\n      className: \"spotlight__profile-box-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(ProfileBox, {\n      rapper: this.state.spotlightRapper,\n      focus: this.state.spotlightFocus,\n      wrappedBy: \"Rappers\",\n      setShowPhotoModal: this.props.setShowPhotoModal,\n      toggleUploadHandles: this.props.toggleUploadHandles,\n      follows: this.props.follows,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }))), React.createElement(BestCoast, {\n      rank: this.props.rank,\n      time: this.props.time,\n      state: this.props.state,\n      coast: this.props.coast,\n      gender: this.props.gender,\n      bestCoast: this.props.bestCoast,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(BestCity, {\n      rank: this.props.rank,\n      time: this.props.time,\n      state: this.props.state,\n      coast: this.props.coast,\n      gender: this.props.gender,\n      bestCity: this.props.bestCity,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    })));\n  }\n\n}\n\nRappers.pageLen = 20;\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid,\n    photoRef: state.photoRef,\n    username: state.username\n  };\n};\n\nexport default connect(mapStateToProps, null)(Rappers);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Wordsmiths/Rappers/Rappers.js"],"names":["React","Component","Rapper","connect","firebase","Pedestal","BestCity","BestCoast","ProfileBox","Rappers","state","spotlightFocus","spotlightRapper","fetchingSpotlightRapper","rappers","follows","followsRef","dequedNo","toDeque","componentDidMount","fetchFollows","componentWillUnmount","componentDidUpdate","prevProps","prevState","props","totalNo","length","Math","min","pageLen","setState","db","firestore","collection","onSnapshot","querySnapshot","forEach","doc","push","data","fid","id","deque","findRapper","rapper","filter","uid","setSpotlightRapper","console","log","myCachedRapperData","setSpotlightFocus","value","render","placeholder","fetching","tableHeader","slice","map","index","style","username","address","tally","city","region","gender","submissionCount","handles","photoRef","alert","setShowPhotoModal","toggleUploadHandles","rank","time","coast","bestCoast","bestCity","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './Rappers.css'\nimport Rapper from './Rapper/Rapper'\nimport { connect } from 'react-redux'\nimport firebase from '../../../Firebase'\nimport Pedestal from '../Pedestal/Pedestal'\nimport BestCity from '../BestCity/BestCity'\nimport BestCoast from '../BestCoast/BestCoast'\nimport ProfileBox from '../../Hub/ProfileBox/ProfileBox'\n\nclass Rappers extends Component {\n\n    static pageLen = 20\n\n    state = {\n        spotlightFocus: 'me',\n        spotlightRapper: null,\n        fetchingSpotlightRapper: false,\n        rappers: [],\n        follows: [],\n        followsRef: null,\n        dequedNo: 0,\n        toDeque: 0\n    }\n\n    componentDidMount = () => {\n        this.fetchFollows()\n    }\n    componentWillUnmount = () => {\n        this.state.followsRef()\n    }\n\n    componentDidUpdate = (prevProps, prevState) => {\n        if (prevProps.rappers !== this.props.rappers) {\n            var totalNo = this.props.rappers.length\n\n            // how much will you deque initially ?\n            var dequedNo = Math.min(totalNo, Rappers.pageLen)\n            // how much do you have left to toDeque\n            var toDeque = totalNo <= Rappers.pageLen ? 0 : totalNo - Rappers.pageLen\n\n            this.setState({\n                ...this.state,\n                rappers: this.props.rappers,\n                dequedNo: dequedNo,\n                toDeque: toDeque\n            })\n        }\n    }\n    fetchFollows = async () => {\n        var db = firebase.firestore()\n        const follows = []\n        var followsRef = await db.collection(\"follows\")\n            .onSnapshot((querySnapshot) => {\n                querySnapshot.forEach(doc => {\n                    follows.push({\n                        ...doc.data(),\n                        fid: doc.id\n                    })\n                })\n            })\n        this.setState({\n            ...this.state,\n            follows: follows,\n            followsRef: followsRef\n        })\n    }\n\n    deque = () => {\n\n        if (this.state.toDeque <= Rappers.pageLen) {\n            this.setState({\n                ...this.state,\n                dequedNo: this.state.dequedNo + this.state.toDeque,\n                toDeque: 0\n            })\n        }\n        else {\n            this.setState({\n                ...this.state,\n                dequedNo: this.state.dequedNo + Rappers.pageLen,\n                toDeque: this.state.toDeque - Rappers.pageLen\n            })\n        }\n    }\n\n    findRapper = () => {\n        var rapper = this.state.rappers.filter(rapper => rapper.uid === this.props.uid)[0]\n        return rapper\n    }\n\n    setSpotlightRapper = async (rapper) => {\n        console.log(rapper, 'new spot light rapper')\n\n        if (rapper.uid === this.props.uid) {\n            this.setState({\n                ...this.state,\n                myCachedRapperData: rapper,\n                spotlightRapper: rapper,\n                spotlightFocus: 'me'\n            })\n        }\n        else {\n            this.setState({\n                ...this.state,\n                spotlightRapper: rapper,\n                spotlightFocus: 'them'\n            })\n        }\n\n    }\n\n    setSpotlightFocus = (value) => {\n        if (value === 'me') {\n            this.setState({\n                ...this.state,\n                spotlightFocus: value,\n                spotlightRapper: this.state.myCachedRapperData\n            })\n        } else {\n            this.setState({\n                ...this.state,\n                spotlightFocus: value,\n            })\n        }\n        \n    }\n\n    render() {\n\n        var placeholder = (\n            <div className=\"Rappers\">\n                <div id=\"table-header\">\n                    <div className=\"headerDetail\" id=\"votes\">Score</div>\n                    <div className=\"headerDetail\" id=\"right-border\">Username</div>\n                    <div className=\"headerDetail\" id=\"right-border\">Location</div>\n                    <div className=\"headerDetail\" id=\"right-border\">Region</div>\n                    <div className=\"headerDetail\">Gender</div>\n                </div>\n                {this.props.rappers.length === 0 && !this.props.fetching ? <div id='no-rappers'><div id=\"no-rappers-text\">No rappers for that search!</div></div> : <div className=\"loader\" id=\"rappers-loader\">Loading...</div>}\n\n            </div>\n        )\n\n        var tableHeader = (\n            <div id=\"table-header\">\n                <div className=\"headerDetail\" id=\"votes\">Score</div>\n                <div className=\"headerDetail\" id=\"right-border\">Username</div>\n                <div className=\"headerDetail\" id=\"right-border\">Location</div>\n                <div className=\"headerDetail\" id=\"right-border\">Region</div>\n                <div className=\"headerDetail\">Gender</div>\n            </div>\n        )\n\n\n\n        var rappers = this.state.rappers.length === 0 ? placeholder : (\n            <div className=\"Rappers\">\n                {tableHeader}\n                {this.state.rappers.slice(0, this.state.dequedNo).map((rapper, index) => {\n\n                    var style = (index % 2) === 0 ? 'lighter' : 'darker'\n\n                    return <Rapper\n                        rank={index + 1}\n                        style={style}\n                        key={rapper.username}\n                        state={rapper.address.state}\n                        username={rapper.username}\n                        votes={rapper.tally}\n                        city={rapper.address.city}\n                        coast={rapper.address.region}\n                        gender={rapper.gender}\n                        address={rapper.address}\n                        submissionCount={rapper.submissionCount}\n                        uid={rapper.uid}\n                        handles={rapper.handles}\n                        photoRef={rapper.photoRef}\n                        shineSpotlight={this.setSpotlightRapper} />\n                })}\n                {this.state.toDeque ? <div id='load-more' onClick={this.deque}>View More</div> : null}\n\n            </div>\n        )\n\n\n\n        return (\n            <div className='Rappers-Container'>\n                {rappers}\n                <div className=\"Winners-container\">\n                    <div className='Winners-container__spotlight'>\n                        <div className='spotlight__header'>\n                            <div className={`header__section`} onClick={this.state.spotlightRapper && this.state.spotlightRapper.username === this.props.username ? () => alert('Select a rapper!'): () => this.setSpotlightFocus('them')}>\n                                <span className='section__word'>Wordsmith</span>\n                            </div>\n                        </div>\n                        <div className='spotlight__profile-box-container'>\n                            <ProfileBox\n                                rapper={this.state.spotlightRapper}\n                                focus={this.state.spotlightFocus}\n                                wrappedBy='Rappers'\n                                setShowPhotoModal={this.props.setShowPhotoModal}\n                                toggleUploadHandles={this.props.toggleUploadHandles}\n                                follows={this.props.follows}/>\n                        </div>\n                    </div>\n                    <BestCoast\n                        rank={this.props.rank}\n                        time={this.props.time}\n                        state={this.props.state}\n                        coast={this.props.coast}\n                        gender={this.props.gender}\n                        bestCoast={this.props.bestCoast} />\n                    <BestCity\n                        rank={this.props.rank}\n                        time={this.props.time}\n                        state={this.props.state}\n                        coast={this.props.coast}\n                        gender={this.props.gender}\n                        bestCity={this.props.bestCity} />\n                </div>\n            </div>\n        )\n\n\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n        photoRef: state.photoRef,\n        username: state.username\n    }\n}\nexport default connect(mapStateToProps, null)(Rappers)\n\n"]},"metadata":{},"sourceType":"module"}