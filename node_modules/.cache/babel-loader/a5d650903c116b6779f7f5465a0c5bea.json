{"ast":null,"code":"import _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/components/Scribble/MyBars/ViewedBar/DeletePost/DeletePost.js\";\nimport React, { Component, useState } from 'react';\nimport './DeletePost.css';\nimport firebase from '../../../../../Firebase';\nimport 'firebase/firestore';\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../../../store/actions';\n\nconst DeletePost = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        spinner = _useState2[0],\n        setSpinner = _useState2[1];\n\n  const deletePost = async pid => {\n    setSpinner(true);\n    var db = firebase.firestore();\n    await db.collection('submissions').doc(pid).delete().then(() => {\n      console.log(\"document successfully deleted\");\n    }).catch(err => {\n      setSpinner(false);\n    });\n    await db.collection('postVotes').where('pid', '==', pid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete().then(() => {\n          console.log('doc successfully deleted!!!');\n        });\n      });\n    }).catch(err => {\n      setSpinner(false);\n    });\n    setSpinner(false);\n  };\n\n  return React.createElement(\"div\", {\n    id: \"delete-post-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"delete-post-backdrop\",\n    onClick: () => props.toggle(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"delete-post-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, this.state.spinner ? React.createElement(\"div\", {\n    id: \"delete-post-spinner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }) : null, React.createElement(\"i\", {\n    className: \"fa fa-close\",\n    id: \"close-delete-post-x\",\n    onClick: () => props.toggle(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"delete-post-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"Delete Post?\"), React.createElement(\"div\", {\n    id: \"delete-post-question\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"This cannot be reversed.\"), React.createElement(\"div\", {\n    id: \"delete-post-button-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"delete-post-button\",\n    id: \"cancel-button\",\n    onClick: () => props.toggle(null),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Cancel\"), React.createElement(\"div\", {\n    className: \"delete-post-button\",\n    id: \"delete-button\",\n    onClick: () => deletePost(this.props.pid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Delete\"))));\n};\n\nexport default connect(null, null)(DeletePost);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/components/Scribble/MyBars/ViewedBar/DeletePost/DeletePost.js"],"names":["React","Component","useState","firebase","connect","actionTypes","DeletePost","props","spinner","setSpinner","deletePost","pid","db","firestore","collection","doc","delete","then","console","log","catch","err","where","get","snap","forEach","ref","toggle","state"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react'\nimport './DeletePost.css'\nimport firebase from '../../../../../Firebase'\nimport 'firebase/firestore'\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../../../../store/actions'\n\nconst DeletePost = (props) => {\n\n    const [spinner, setSpinner] = useState(false)\n\n\n    const deletePost = async (pid) => {\n        setSpinner(true)\n        var db = firebase.firestore()\n        await db.collection('submissions').doc(pid).delete()\n            .then(() => { console.log(\"document successfully deleted\") })\n            .catch(err => { setSpinner(false) })\n        await db.collection('postVotes').where('pid', '==', pid).get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete().then(() => {\n                        console.log('doc successfully deleted!!!')\n                    })\n                })\n            })\n            .catch(err => { setSpinner(false) })\n        setSpinner(false)\n\n    }\n\n    return (\n        <div id=\"delete-post-wrapper\">\n            <div id=\"delete-post-backdrop\" onClick={() => props.toggle(null)}></div>\n            <div id=\"delete-post-body\">\n                {this.state.spinner ? <div id='delete-post-spinner'></div> : null}\n                <i className=\"fa fa-close\" id=\"close-delete-post-x\" onClick={() => props.toggle(null)}></i>\n                <div id=\"delete-post-header\">Delete Post?</div>\n                <div id=\"delete-post-question\">This cannot be reversed.</div>\n                <div id='delete-post-button-container'>\n                    <div className='delete-post-button' id='cancel-button' onClick={() => props.toggle(null)}>Cancel</div>\n                    <div className='delete-post-button' id='delete-button' onClick={() => deletePost(this.props.pid)}>Delete</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\nexport default connect(null, null)(DeletePost); "]},"metadata":{},"sourceType":"module"}