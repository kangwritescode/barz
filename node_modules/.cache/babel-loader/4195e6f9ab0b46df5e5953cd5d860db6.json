{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Wordsmiths/Rappers/Spotlight/Spotlight.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport './Spotlight.css';\nimport PhotoContainer from '../../../Hub/Profile/PhotoContainer/PhotoContainer';\nimport * as actionTypes from '../../../../store/actions';\nimport firebase from 'firebase';\nimport { getOrdinal } from '../../../../shared/getOrdinal';\nimport { connect } from 'react-redux';\nimport { postUserData } from '../../../../store/actionCreators';\n\nfunction Spotlight(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showDropOptions = _useState2[0],\n        toggleDropOptions = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        follows = _useState4[0],\n        setFollows = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        amFollowing = _useState6[0],\n        setAmFollowing = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        blurbText = _useState8[0],\n        setBlurbText = _useState8[1]; // componentDidMount\n\n\n  useEffect(() => {\n    document.addEventListener('click', closeDropOptions);\n    fetchFollows();\n    return () => {\n      document.removeEventListener('click', closeDropOptions);\n    };\n  }, []); // componentDidUpdate\n\n  useEffect(() => {\n    const calcAmFollowing = otherUID => {\n      var follow = follows.filter(follow => {\n        return follow.to === otherUID && follow.from === props.uid;\n      });\n      setAmFollowing(follow.length === 0 ? false : true);\n    };\n\n    if (props.rapper) {\n      console.log(props.rapper);\n      calcAmFollowing(props.rapper.uid);\n    }\n\n    if (props.blurb) {\n      setBlurbText(props.blurb);\n    }\n  }, [props.photoURL, props.rapper, follows, props.uid, props.blurb]);\n\n  const fetchFollows = async () => {\n    var db = firebase.firestore();\n    var follows = await db.collection(\"follows\").get().then(querySnapshot => {\n      var fetchedFollows = [];\n      querySnapshot.forEach(doc => {\n        fetchedFollows.push(_objectSpread({}, doc.data(), {\n          fid: doc.id\n        }));\n      });\n      return fetchedFollows;\n    });\n    setFollows(follows);\n  };\n\n  const follow = () => {\n    setAmFollowing(true);\n    var db = firebase.firestore();\n    db.collection('follows').add({\n      from: props.uid,\n      to: props.rapper.uid\n    }).then(() => fetchFollows()).catch(err => console.log(err.message));\n  };\n\n  const unfollow = () => {\n    setAmFollowing(false);\n    var db = firebase.firestore();\n    db.collection('follows').where('from', '==', props.uid).where('to', '==', props.rapper.uid).get().then(snap => {\n      snap.forEach(doc => {\n        doc.ref.delete();\n      });\n      fetchFollows();\n    }).catch(err => console.log(err));\n  };\n\n  const addhttp = url => {\n    if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n      url = \"http://\" + url;\n    }\n\n    return url;\n  };\n\n  const closeDropOptions = event => {\n    if (!event.target.classList.contains('spotlight__three-dots') && !event.target.classList.contains('dot')) {\n      toggleDropOptions(false);\n    }\n  };\n\n  var username = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, props.rapper ? props.rapper.username : null) : React.createElement(\"h2\", {\n    className: \"block-one__select-a-user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Select a User\");\n  var addressGender = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__address-gender\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, props.rapper ? props.rapper.city : null, \", \", props.rapper ? props.rapper.state : null, \" | \", props.rapper ? props.rapper.gender : null) : null;\n  var photo = props.rapper ? React.createElement(\"div\", {\n    className: \"block-one__img-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"\",\n    src: props.rapper.photoURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), props.rapper.rank === 1 ? React.createElement(\"i\", {\n    class: \"fas fa-crown crown\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }) : null, props.rapper.rank === 2 ? React.createElement(\"i\", {\n    class: \"fas fa-crown crown\",\n    style: {\n      color: 'silver'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }) : null)) : null;\n  var button = React.createElement(\"button\", {\n    className: \"follow-button\",\n    onClick: follow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"follow\");\n\n  if (amFollowing) {\n    button = React.createElement(\"button\", {\n      className: \"follow-button\",\n      onClick: unfollow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"following\");\n  }\n\n  var handles = null;\n\n  if (props.rapper && (props.rapper.handles.facebook || props.rapper.handles.soundcloud || props.rapper.handles.instagram || props.rapper.handles.youtube)) {\n    handles = React.createElement(\"div\", {\n      className: \"block-one__handles-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, props.rapper && props.rapper.handles.facebook ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.facebook),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-facebook-f icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.instagram ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.instagram),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-instagram icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.soundcloud ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.soundcloud),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-soundcloud icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })) : null, props.rapper && props.rapper.handles.youtube ? React.createElement(\"a\", {\n      href: addhttp(props.rapper.handles.youtube),\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fab fa-youtube icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })) : null);\n  }\n\n  var blurb = null;\n\n  if (props.rapper && props.rapper.blurb) {\n    blurb = React.createElement(\"p\", {\n      className: \"block-one__blurb\",\n      style: {\n        cursor: 'text'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, props.rapper ? props.rapper.blurb : null);\n  }\n\n  console.log(props.rapper);\n  return React.createElement(\"div\", {\n    className: \"spotlight\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"spotlight__block-one\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, photo, username, addressGender, handles, React.createElement(\"p\", {\n    className: \"block-one__blurb\",\n    style: {\n      cursor: 'text'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, props.rapper ? props.rapper.blurb : null)), React.createElement(\"div\", {\n    className: \"spotlight__block-two\",\n    style: {\n      fontSize: '.7em'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, props.focus === 'them' ? button : null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null, \" \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null, \" \")));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid,\n    email: state.email,\n    username: state.username,\n    sex: state.gender,\n    address: state.address,\n    zipcode: state.address.zip_code,\n    city: state.address.city,\n    state: state.address.state,\n    needsInfo: state.needsInfo,\n    photoURL: state.photoURL,\n    blurb: state.blurb\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n    logout: () => dispatch({\n      type: actionTypes.LOG_OUT\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spotlight);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Wordsmiths/Rappers/Spotlight/Spotlight.js"],"names":["React","useEffect","useState","PhotoContainer","actionTypes","firebase","getOrdinal","connect","postUserData","Spotlight","props","showDropOptions","toggleDropOptions","follows","setFollows","amFollowing","setAmFollowing","blurbText","setBlurbText","document","addEventListener","closeDropOptions","fetchFollows","removeEventListener","calcAmFollowing","otherUID","follow","filter","to","from","uid","length","rapper","console","log","blurb","photoURL","db","firestore","collection","get","then","querySnapshot","fetchedFollows","forEach","doc","push","data","fid","id","add","catch","err","message","unfollow","where","snap","ref","delete","addhttp","url","test","event","target","classList","contains","username","addressGender","city","state","gender","photo","rank","color","button","handles","facebook","soundcloud","instagram","youtube","cursor","fontSize","focus","votes","mapStateToProps","email","sex","address","zipcode","zip_code","needsInfo","mapDispatchToProps","dispatch","logout","type","LOG_OUT"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './Spotlight.css'\nimport PhotoContainer from '../../../Hub/Profile/PhotoContainer/PhotoContainer'\nimport * as actionTypes from '../../../../store/actions'\nimport firebase from 'firebase'\nimport { getOrdinal } from '../../../../shared/getOrdinal'\nimport { connect } from 'react-redux'\nimport { postUserData } from '../../../../store/actionCreators'\n\n\n\nfunction Spotlight(props) {\n\n    const [showDropOptions, toggleDropOptions] = useState(false)\n    const [follows, setFollows] = useState([])\n    const [amFollowing, setAmFollowing] = useState(false)\n    const [blurbText, setBlurbText] = useState('')\n\n\n\n    // componentDidMount\n    useEffect(() => {\n        document.addEventListener('click', closeDropOptions)\n        fetchFollows()\n        return () => {\n            document.removeEventListener('click', closeDropOptions)\n        };\n    }, [])\n\n    // componentDidUpdate\n    useEffect(() => {\n\n        const calcAmFollowing = (otherUID) => {\n\n            var follow = follows\n                .filter(follow => {\n                    return follow.to === otherUID && follow.from === props.uid\n                })\n            setAmFollowing(follow.length === 0 ? false : true)\n        }\n\n        if (props.rapper) {\n            console.log(props.rapper)\n            calcAmFollowing(props.rapper.uid)\n        }\n        if (props.blurb) {\n            setBlurbText(props.blurb)\n        }\n    }, [props.photoURL, props.rapper, follows, props.uid, props.blurb])\n\n    const fetchFollows = async () => {\n        var db = firebase.firestore()\n        var follows = await db.collection(\"follows\").get().then(((querySnapshot) => {\n            var fetchedFollows = []\n            querySnapshot.forEach(doc => {\n                fetchedFollows.push({\n                    ...doc.data(),\n                    fid: doc.id\n                })\n            })\n            return fetchedFollows\n        }))\n        setFollows(follows)\n\n    }\n\n\n    const follow = () => {\n        setAmFollowing(true)\n        var db = firebase.firestore()\n        db.collection('follows').add({\n            from: props.uid,\n            to: props.rapper.uid\n        })\n            .then(() => fetchFollows())\n            .catch(err => console.log(err.message))\n    }\n\n    const unfollow = () => {\n        setAmFollowing(false)\n        var db = firebase.firestore()\n        db.collection('follows')\n            .where('from', '==', props.uid)\n            .where('to', '==', props.rapper.uid)\n            .get()\n            .then(snap => {\n                snap.forEach(doc => {\n                    doc.ref.delete()\n                })\n                fetchFollows()\n            })\n            .catch(err => console.log(err))\n    }\n\n    const addhttp = (url) => {\n        if (!/^(?:f|ht)tps?\\:\\/\\//.test(url)) {\n            url = \"http://\" + url;\n        }\n        return url;\n    }\n\n    const closeDropOptions = (event) => {\n        if (!event.target.classList.contains('spotlight__three-dots') && !event.target.classList.contains('dot')) {\n            toggleDropOptions(false)\n        }\n    }\n\n\n    var username = props.rapper ?\n        <div className='block-one__username'>{props.rapper ? props.rapper.username : null}</div>\n        : <h2 className='block-one__select-a-user'>Select a User</h2>\n    var addressGender = props.rapper ?\n        <div className='block-one__address-gender'>{props.rapper ? props.rapper.city : null}, {props.rapper ? props.rapper.state : null} | {props.rapper ? props.rapper.gender : null}</div>\n        : null\n\n\n    var photo = props.rapper ?\n        <div className='block-one__img-wrapper'>\n            <div>\n                <img alt='' src={props.rapper.photoURL} />\n                {props.rapper.rank === 1 ? \n                    <i class=\"fas fa-crown crown\"></i> \n                    : null}\n                {props.rapper.rank === 2 ? \n                    <i class=\"fas fa-crown crown\" style={{color: 'silver'}}></i> \n                    : null}\n                    \n            </div>\n\n        </div>\n        : null\n    var button = <button className='follow-button' onClick={follow}>follow</button>\n    if (amFollowing) {\n        button = <button className='follow-button' onClick={unfollow}>following</button>\n    }\n    var handles = null;\n\n\n    if (props.rapper && (props.rapper.handles.facebook\n        || props.rapper.handles.soundcloud\n        || props.rapper.handles.instagram\n        || props.rapper.handles.youtube)) {\n        handles = (<div className='block-one__handles-container'>\n            {props.rapper && props.rapper.handles.facebook ?\n                <a href={addhttp(props.rapper.handles.facebook)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-facebook-f icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.instagram ?\n                <a href={addhttp(props.rapper.handles.instagram)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-instagram icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.soundcloud ?\n                <a href={addhttp(props.rapper.handles.soundcloud)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-soundcloud icon\"></i>\n                </a> : null}\n            {props.rapper && props.rapper.handles.youtube ?\n                <a href={addhttp(props.rapper.handles.youtube)} rel=\"noopener noreferrer\" target=\"_blank\">\n                    <i className=\"fab fa-youtube icon\"></i>\n                </a> : null}\n        </div>)\n    }\n    var blurb = null;\n    if (props.rapper && props.rapper.blurb) {\n        blurb = (\n            <p className='block-one__blurb' style={{ cursor: 'text' }}>\n                    {props.rapper ? props.rapper.blurb : null}\n                </p>\n        )\n    }\n    console.log(props.rapper)\n    return (\n        <div className='spotlight' >\n            <div className='spotlight__block-one'>\n\n                {photo}\n                {username}\n                {addressGender}\n                {handles}\n\n                <p className='block-one__blurb' style={{ cursor: 'text' }}>\n                    {props.rapper ? props.rapper.blurb : null}\n                </p>\n            </div>\n            <div className='spotlight__block-two' style={{ fontSize: '.7em' }}>\n                {props.focus === 'them' ? button : null}\n                <div>{props.rapper ? props.rapper.rank + getOrdinal(props.rapper.rank) + ' place' : null} </div>\n                <div>{props.rapper ? props.rapper.votes + (props.rapper.votes === 1 ? ' point' : ' points') : null} </div>\n\n            </div>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n        email: state.email,\n        username: state.username,\n        sex: state.gender,\n        address: state.address,\n        zipcode: state.address.zip_code,\n        city: state.address.city,\n        state: state.address.state,\n        needsInfo: state.needsInfo,\n        photoURL: state.photoURL,\n        blurb: state.blurb\n    }\n}\n\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        postUserData: (uid, data) => dispatch(postUserData(uid, data)),\n        logout: () => dispatch({ type: actionTypes.LOG_OUT })\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spotlight)\n"]},"metadata":{},"sourceType":"module"}