{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowBox.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport { connect } from 'react-redux';\nimport './FollowBox.css';\nimport FollowItem from './FollowItem/FollowItem';\n\nfunction FollowBox(props) {\n  const followBoxClasses = ['follow-box', 'follow-box__header', 'follow-box_body', \"header__section\", 'follow-item__follow-button', 'follow-box_body follow-box__expanded', 'follow-item', 'profile__photo', 'details-container__name', 'details-container__details']; // follows\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        follows = _useState2[0],\n        setfollows = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        followersCount = _useState4[0],\n        setfollowersCount = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        followingCount = _useState6[0],\n        setfollowingCount = _useState6[1]; // users\n\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        users = _useState8[0],\n        setUsers = _useState8[1]; //ui\n\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        focusOn = _useState10[0],\n        setFocusOn = _useState10[1]; // componentDidMount\n\n\n  useEffect(() => {\n    document.addEventListener('click', toggleFocus);\n    return () => {\n      document.removeEventListener('click', toggleFocus);\n    };\n  }, []); // attach listeners for users, following, followers\n\n  useEffect(() => {\n    var db = firebase.firestore();\n\n    const fetchFollows = async () => {\n      return db.collection('follows').onSnapshot(snapshot => {\n        var followersCount = 0;\n        var followingCount = 0;\n        var arr = [];\n        snapshot.forEach(doc => {\n          if (doc.data().from === props.uid) {\n            followingCount += 1;\n          }\n\n          if (doc.data().to === props.uid) {\n            followersCount += 1;\n          }\n\n          arr.push(doc.data());\n        });\n        setfollowersCount(followersCount);\n        setfollowingCount(followingCount);\n        setfollows(arr);\n      });\n    };\n\n    if (props.uid) {\n      var fetchFollowsPromise = fetchFollows();\n      return () => {\n        fetchFollowsPromise.then(listener => listener());\n      };\n    }\n  }, [props.uid], followersCount, followingCount); // fetch followerUsers and followingUsers\n\n  useEffect(() => {\n    if (focusOn) {\n      var db = firebase.firestore();\n      db.collection('users').get().then(snapshot => {\n        var arr = [];\n        snapshot.forEach(doc => {\n          arr.push(_objectSpread({}, doc.data()));\n        });\n        setUsers(arr);\n      });\n    }\n\n    return () => {};\n  }, [focusOn]);\n\n  const toggleFocus = event => {\n    var clickedOnFollowBox = false;\n    followBoxClasses.forEach(className => {\n      if (event.target.classList.contains(className)) {\n        clickedOnFollowBox = true;\n      }\n    });\n\n    if (clickedOnFollowBox) {\n      return;\n    } else {\n      setFocusOn('');\n    }\n  }; // returns array of \n\n\n  const myFollowersUIDs = follows => {\n    const myFollowsFrom = [];\n    follows.forEach(follow => {\n      if (follow.to === props.uid) {\n        myFollowsFrom.push(follow.from);\n      }\n    });\n    return myFollowsFrom;\n  };\n\n  const myFollowingUIDs = follows => {\n    const myFollowsTo = [];\n    follows.forEach(follow => {\n      if (follow.from === props.uid) {\n        myFollowsTo.push(follow.to);\n      }\n    });\n    return myFollowsTo;\n  };\n\n  const getFilteredUsers = (users, follows) => {\n    return users.filter(user => {\n      if (follows.includes(user.uid)) {\n        return true;\n      }\n\n      return false;\n    });\n  }; // ui\n\n\n  const expandedBody = focusOn ? 'follow-box__expanded' : 'follow-box__compressed';\n  const followersFocused = focusOn === 'followers' ? 'focused' : null;\n  const followingFocused = focusOn === 'following' ? 'focused' : null; // focus bar style\n\n  var focusedBarStyle = null;\n\n  if (focusOn === 'following') {\n    focusedBarStyle = 'under-following';\n  } else if (focusOn === 'followers') {\n    focusedBarStyle = 'under-followers';\n  }\n\n  const followingUIDs = myFollowingUIDs(follows);\n  const followersUIDs = myFollowersUIDs(follows);\n  var followingUsers = getFilteredUsers(users, followingUIDs);\n  var followedUsers = getFilteredUsers(users, followersUIDs);\n  var displayedUsers;\n\n  if (focusOn === 'following') {\n    displayedUsers = followingUsers.map(user => {\n      return React.createElement(FollowItem, {\n        follows: follows,\n        user: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      });\n    });\n  } else if (focusOn === 'followers') {\n    displayedUsers = followedUsers.map(user => {\n      return React.createElement(FollowItem, {\n        follows: follows,\n        user: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      });\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"follow-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"follow-box__header \".concat(focusOn ? 'follow-box_header-filled' : 'follow-box_header-unfilled'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"header__section \".concat(followersFocused),\n    onClick: () => setFocusOn(focusOn === 'followers' ? '' : 'followers'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, followersCount, \" \", 'follower' + (followersCount !== 1 ? 's' : ''), React.createElement(\"div\", {\n    className: \"focused-bar \".concat(focusedBarStyle),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"header__section \".concat(followingFocused),\n    onClick: () => setFocusOn(focusOn === 'following' ? '' : 'following'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, followingCount, \" following\")), React.createElement(\"div\", {\n    className: \"follow-box_body \".concat(expandedBody),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, displayedUsers));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowBox);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowBox.js"],"names":["React","useState","useEffect","firebase","connect","FollowItem","FollowBox","props","followBoxClasses","follows","setfollows","followersCount","setfollowersCount","followingCount","setfollowingCount","users","setUsers","focusOn","setFocusOn","document","addEventListener","toggleFocus","removeEventListener","db","firestore","fetchFollows","collection","onSnapshot","snapshot","arr","forEach","doc","data","from","uid","to","push","fetchFollowsPromise","then","listener","get","event","clickedOnFollowBox","className","target","classList","contains","myFollowersUIDs","myFollowsFrom","follow","myFollowingUIDs","myFollowsTo","getFilteredUsers","filter","user","includes","expandedBody","followersFocused","followingFocused","focusedBarStyle","followingUIDs","followersUIDs","followingUsers","followedUsers","displayedUsers","map","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport firebase from 'firebase'\nimport { connect } from 'react-redux'\nimport './FollowBox.css'\nimport FollowItem from './FollowItem/FollowItem'\n\nfunction FollowBox(props) {\n\n    const followBoxClasses = [\n        'follow-box',\n        'follow-box__header',\n        'follow-box_body',\n        \"header__section\",\n        'follow-item__follow-button',\n        'follow-box_body follow-box__expanded',\n        'follow-item',\n        'profile__photo',\n        'details-container__name',\n        'details-container__details'\n    ]\n\n    // follows\n    const [follows, setfollows] = useState([])\n    const [followersCount, setfollowersCount] = useState(0);\n    const [followingCount, setfollowingCount] = useState(0);\n    // users\n    const [users, setUsers] = useState([]);\n    //ui\n    const [focusOn, setFocusOn] = useState('')\n\n\n    // componentDidMount\n    useEffect(() => {\n        document.addEventListener('click', toggleFocus)\n        return () => {\n            document.removeEventListener('click', toggleFocus)\n        };\n    }, [])\n\n    // attach listeners for users, following, followers\n    useEffect(() => {\n        var db = firebase.firestore()\n        const fetchFollows = async () => {\n            return db.collection('follows')\n                .onSnapshot(snapshot => {\n                    var followersCount = 0;\n                    var followingCount = 0;\n                    var arr = []\n                    snapshot.forEach(doc => {\n                        if (doc.data().from === props.uid) {\n                            followingCount += 1\n                        }\n                        if (doc.data().to === props.uid) {\n                            followersCount += 1\n                        }\n                        arr.push(doc.data())\n                    })\n                    setfollowersCount(followersCount)\n                    setfollowingCount(followingCount)\n                    setfollows(arr)\n                })\n        }\n        if (props.uid) {\n            var fetchFollowsPromise = fetchFollows()\n            return () => {\n                fetchFollowsPromise.then(listener => listener())\n            }\n        }\n    }, [props.uid], followersCount, followingCount)\n\n\n    // fetch followerUsers and followingUsers\n    useEffect(() => {\n        if (focusOn) {\n            var db = firebase.firestore()\n            db.collection('users').get()\n                .then(snapshot => {\n                    var arr = []\n                    snapshot.forEach(doc => {\n                        arr.push({ ...doc.data() })\n                    })\n                    setUsers(arr)\n                })\n        }\n        return () => {\n        };\n    }, [focusOn])\n\n    const toggleFocus = (event) => {\n        var clickedOnFollowBox = false;\n        followBoxClasses.forEach(className => {\n            if (event.target.classList.contains(className)) {\n                clickedOnFollowBox = true\n            }\n        });\n        if (clickedOnFollowBox) {\n            return\n        } else {\n            setFocusOn('')\n        }\n    }\n\n    // returns array of \n    const myFollowersUIDs = (follows) => {\n        const myFollowsFrom = []\n        follows.forEach(follow => {\n            if (follow.to === props.uid) {\n                myFollowsFrom.push(follow.from)\n            }\n        })\n        return myFollowsFrom\n    }\n    const myFollowingUIDs = (follows) => {\n        const myFollowsTo = []\n        follows.forEach(follow => {\n            if (follow.from === props.uid) {\n                myFollowsTo.push(follow.to)\n            }\n        })\n        return myFollowsTo\n    }\n    const getFilteredUsers = (users, follows) => {\n        return users.filter(user => {\n            if (follows.includes(user.uid)) {\n                return true\n            } return false\n        })\n    }\n\n\n    // ui\n    const expandedBody = focusOn ? 'follow-box__expanded' : 'follow-box__compressed'\n    const followersFocused = focusOn === 'followers' ? 'focused' : null\n    const followingFocused = focusOn === 'following' ? 'focused' : null\n\n    // focus bar style\n    var focusedBarStyle = null;\n    if (focusOn === 'following') {\n        focusedBarStyle = 'under-following'\n    } else if (focusOn === 'followers') {\n        focusedBarStyle = 'under-followers'\n    }\n\n\n\n    const followingUIDs = myFollowingUIDs(follows)\n    const followersUIDs = myFollowersUIDs(follows)\n\n    var followingUsers = getFilteredUsers(users, followingUIDs)\n    var followedUsers = getFilteredUsers(users, followersUIDs)\n\n    var displayedUsers;\n    if (focusOn === 'following') {\n        displayedUsers = followingUsers.map(user => {\n            return <FollowItem follows={follows} user={user} />\n        })\n    } else if (focusOn === 'followers') {\n        displayedUsers = followedUsers.map(user => {\n            return <FollowItem follows={follows} user={user} />\n        })\n    }\n\n    return (\n        <div className='follow-box'>\n            <div className={`follow-box__header ${focusOn ? 'follow-box_header-filled' : 'follow-box_header-unfilled'}`}>\n                <div className={`header__section ${followersFocused}`} onClick={() => setFocusOn(focusOn === 'followers' ? '' : 'followers')}>\n                    {followersCount} {'follower' + (followersCount !== 1 ? 's' : '')}\n                    <div className={`focused-bar ${focusedBarStyle}`}></div>\n                </div>\n                <div className={`header__section ${followingFocused}`} onClick={() => setFocusOn(focusOn === 'following' ? '' : 'following')}>\n                    {followingCount} following\n                </div>\n            </div>\n            <div className={`follow-box_body ${expandedBody}`}>\n                {displayedUsers}\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowBox)\n"]},"metadata":{},"sourceType":"module"}