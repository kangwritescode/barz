{"ast":null,"code":"import _defineProperty from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/davidkang/Desktop/local-barz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowBox.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport { connect } from 'react-redux';\nimport './FollowBox.css';\n\nfunction FollowBox(props) {\n  const followBoxClasses = ['follow-box', 'follow-box__header', 'follow-box_body']; // follows\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        followedBy = _useState2[0],\n        setFollowedBy = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        following = _useState4[0],\n        setFollowing = _useState4[1]; // users\n\n\n  const _useState5 = useState({}),\n        _useState6 = _slicedToArray(_useState5, 2),\n        users = _useState6[0],\n        setUsers = _useState6[1]; //ui\n\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        focusOn = _useState8[0],\n        setFocusOn = _useState8[1];\n\n  useEffect(() => {\n    document.addEventListener('click', toggleFocus);\n    return () => {\n      document.removeEventListener('click', toggleFocus);\n    };\n  }, []);\n  useEffect(() => {\n    if (props.uid) {\n      fetchUsers();\n      fetchFollows();\n    }\n  }, [props.uid]);\n\n  const toggleFocus = event => {\n    followBoxClasses.forEach(className => {\n      if (event.target.classList.contains(className)) {\n        return;\n      }\n    });\n    return setFocusOn('');\n  };\n\n  const fetchFollows = async () => {\n    var db = firebase.firestore();\n    db.collection('follows').get().then(snap => {\n      var following = [];\n      var followedBy = [];\n      snap.forEach(doc => {\n        var follow = _objectSpread({}, doc.data());\n\n        if (follow.to === props.uid) {\n          followedBy.push(follow.from);\n        } else if (follow.from === props.uid) {\n          following.push(follow.to);\n        }\n      });\n      setFollowedBy(followedBy);\n      setFollowing(following);\n    });\n  };\n\n  const fetchUsers = async () => {\n    var db = firebase.firestore();\n    db.collection('users').get().then(snap => {\n      var users = {};\n      snap.forEach(doc => {\n        users[doc.id] = doc.data();\n      });\n      setUsers(users);\n    });\n  };\n\n  var expandedStyle;\n\n  if (focusOn) {\n    expandedStyle = {\n      height: '13em'\n    };\n  }\n\n  return React.createElement(\"div\", {\n    className: \"follow-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"follow-box__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"header__section\",\n    onClick: () => setFocusOn('followers'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, followedBy.length, \" \", 'follower' + (followedBy.length !== 1 ? 's' : '')), React.createElement(\"div\", {\n    className: \"header__section\",\n    onClick: () => setFocusOn('following'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, following.length, \" following\")), React.createElement(\"div\", {\n    className: \"follow-box_body\",\n    style: expandedStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }));\n}\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.uid\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowBox);","map":{"version":3,"sources":["/Users/davidkang/Desktop/local-barz/src/containers/Hub/FollowBox/FollowBox.js"],"names":["React","useState","useEffect","firebase","connect","FollowBox","props","followBoxClasses","followedBy","setFollowedBy","following","setFollowing","users","setUsers","focusOn","setFocusOn","document","addEventListener","toggleFocus","removeEventListener","uid","fetchUsers","fetchFollows","event","forEach","className","target","classList","contains","db","firestore","collection","get","then","snap","doc","follow","data","to","push","from","id","expandedStyle","height","length","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport firebase from 'firebase'\nimport {connect} from 'react-redux'\nimport './FollowBox.css'\n\nfunction FollowBox(props) {\n\n    const followBoxClasses = [\n        'follow-box',\n        'follow-box__header',\n        'follow-box_body'\n    ]\n\n    // follows\n    const [followedBy, setFollowedBy] = useState([])\n    const [following, setFollowing] = useState([])\n    // users\n    const [users, setUsers] = useState({})\n    //ui\n    const [focusOn, setFocusOn] = useState('')\n\n\n    useEffect(() => {\n        document.addEventListener('click', toggleFocus)\n        return () => {\n            document.removeEventListener('click', toggleFocus)\n        };\n    }, [])\n\n    useEffect(() => {\n        if (props.uid) {\n            fetchUsers()\n            fetchFollows()\n        }\n    }, [props.uid])\n\n    const toggleFocus = (event) => {\n        followBoxClasses.forEach(className => {\n            if (event.target.classList.contains(className)) {\n                return\n            } \n        });\n        return setFocusOn('')\n       \n    }\n\n    const fetchFollows = async () => {\n        var db = firebase.firestore()\n        db.collection('follows').get()\n            .then(snap => {\n                var following = []\n                var followedBy = []\n                snap.forEach(doc => {\n                    var follow = {\n                        ...doc.data()\n                    }\n                    if (follow.to === props.uid) {\n                        followedBy.push(follow.from)\n                    } else if (follow.from === props.uid) {\n                        following.push(follow.to)\n                    }\n                })\n                setFollowedBy(followedBy)\n                setFollowing(following)\n            })\n    }\n    const fetchUsers = async () => {\n        var db = firebase.firestore()\n        db.collection('users').get()\n            .then(snap => {\n                var users = {}\n                snap.forEach(doc => {\n                    users[doc.id] = doc.data()\n                })\n                setUsers(users)\n            })\n    }\n\n    var expandedStyle;\n    if (focusOn) {\n        expandedStyle = {\n            height: '13em'\n        }\n    }\n    \n    return (\n        <div className='follow-box'>\n            <div className='follow-box__header'>\n                <div className='header__section' onClick={() => setFocusOn('followers')}>\n                    {followedBy.length} {'follower' + (followedBy.length !== 1 ? 's' : '')}\n                </div>\n                <div className='header__section' onClick={() => setFocusOn('following')}>\n                    {following.length} following\n                </div>\n            </div>\n            <div className='follow-box_body' style={expandedStyle}>\n\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        uid: state.uid,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n       \n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowBox)\n"]},"metadata":{},"sourceType":"module"}